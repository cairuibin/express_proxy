(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[140],{2146:function(e,t,a){},2696:function(e,t,a){"use strict";a.r(t);a(41);var s=a(8),r=a.n(s),n=(a(109),a(72)),c=a.n(n),o=(a(177),a(110)),i=a.n(o),u=(a(45),a(6)),l=a.n(u),d=(a(74),a(17)),h=a.n(d),m=(a(942),a(546)),f=a.n(m),g=(a(135),a(73)),p=a.n(g),C=(a(40),a(5)),k=a.n(C),y=(a(43),a(2)),v=a.n(y),S=(a(276),a(83)),b=a.n(S),T=a(98),I=(a(54),a(15)),O=a.n(I),E=a(3),N=a.n(E),j=a(7),L=a(20),x=a(9),w=a(12),F=a(52),M=a(11),z=a(10),A=(a(51),a(22)),D=a.n(A),V=(a(67),a(28)),P=a.n(V),_=(a(79),a(30)),B=a.n(_),R=(a(178),a(82)),Y=a.n(R),K=(a(204),a(101)),U=a.n(K),q=a(0),J=a.n(q),$=(a(2146),a(44)),H=a(27),W=a(102),G=a(99),Q=a(181),X=a(39),Z=a(318),ee=a(93),te=a(242),ae=a(241),se=a(319),re=a(136),ne=U.a.TabPane,ce=Y.a.TreeNode,oe=B.a.Option,ie=P.a.confirm,ue=D.a.Search,le=function(e){Object(M.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(x.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={userId:"",myCourseList:[],mySubjectList:[],courseTree:[],selectCatalogId:void 0,subjectKnowledgePointTree:[],bookId:void 0,subjectId:void 0,stageId:void 0,catalogStageId:void 0,catalogSubjectId:void 0,knowledgeStageId:void 0,knowledgeSubjectId:void 0,activeKey:"1",catalogArray:[],catalogArrayChecked:[],pointsArray:[],pointsArrayChecked:[],createUserId:void 0,courseCloudFlag:"1",myUnitId:"",testFormCheck:"",testDiffCheck:"",testCateCheck:"",testRealCheck:"",examYearCheck:"",selectType:"",regionCheck:"",shareModel:"",unitId:"",resourceProvince:"",resourceCity:"",resourceCounty:"",testDetail:"",size:"small",AnalyzeTestModal:!1,ErrorTestModal:!1,testId:"",resourceId:"",similarTestModal:!1,addTestModal:!1,isObligation:!0,isOrdinary:!1,courseTestList:[],total:0,pageNum:1,pageSize:10,testForm:[],testDiff:[],testCate:[],testReal:[],examYearList:[],unitList:[],unitListAll:[],testSourceList:[{label:"\u6570\u5b57\u6559\u6750",value:"4"},{label:"\u6821\u5185\u5171\u4eab",value:"2"},{label:"\u4e91\u5171\u4eab",value:"1"}],testSourceValue:"",region:[],testDiffMap:{},showAnswer:!1,testFormList:[],testBasketIdList:[],testBasketMax:40,orderAscfield:"",orderDescfield:"a.create_time",sortSet:{value:"zh",zhOrder:!0,zjOrder:!0,ndOrder:!0},provinceData:[],cityData:[],countyData:[],addressVisible:!1,examYearVisible:!1,testSourceVisible:!1,resourceProvinceName:"",resourceCityName:"",resourceCountyName:"",examYearName:"",myjsonData:"",searchCourseValue:void 0,searchCourseValueSchool:void 0,searchPaperValue:void 0,checklist:[{name:"\u5168\u9009",checked:!1}],searchSchool:"hide"},e.onProvinceChange=function(t,a){var s=t.target.value,r=""===s?"":s.value,n=""===s?"":s.title;e.setState({resourceProvince:r,resourceCity:"",resourceCounty:"",resourceProvinceName:n,resourceCityName:"",resourceCountyName:"",cityData:[],countyData:[]},(function(){e.getCourseTestList(),Object(H.w)({parentCode:r}).then((function(t){r?e.setState({cityData:t}):e.setState({addressVisible:!1})}))}))},e.onCityChange=function(t,a){var s=t.target.value,r=""===s?"":s.value,n=""===s?"":s.title;e.setState({resourceCity:r,resourceCounty:"",resourceCityName:n,resourceCountyName:"",countyData:[]},(function(){e.getCourseTestList(),Object(H.w)({parentCode:r}).then((function(t){r?e.setState({countyData:t}):e.setState({addressVisible:!1})}))}))},e.onCountyChange=function(t,a){var s=t.target.value,r=""===s?"":s.value,n=""===s?"":s.title;e.setState({resourceCounty:r,resourceCountyName:n,addressVisible:!1},(function(){return e.getCourseTestList()}))},e.testFormChange=function(t){e.setState({pageNum:1,testFormCheck:t.target.value},(function(){e.getCourseTestList()}))},e.testDiffChange=function(t){e.setState({pageNum:1,testDiffCheck:t.target.value},(function(){e.getCourseTestList()}))},e.testCateChange=function(t){e.setState({pageNum:1,testCateCheck:t.target.value},(function(){e.getCourseTestList()}))},e.testRealChange=function(t){e.setState({pageNum:1,testRealCheck:t.target.value},(function(){e.getCourseTestList()}))},e.examYearChange=function(t){var a=t.target.value;e.setState({examYearName:""===a?"":a.key}),a&&"\u66f4\u65e9"===a.key?e.setState({pageNum:1,examYearCheck:a.value,selectType:1,examYearVisible:!1},(function(){e.getCourseTestList()})):e.setState({pageNum:1,examYearCheck:a.value,selectType:0,examYearVisible:!1},(function(){e.getCourseTestList()}))},e.regionChange=function(t){e.setState({pageNum:1,regionCheck:t.target.value},(function(){e.getCourseTestList()}))},e.testSourceChange=function(t){var a=t.target.value;""===a||"1"===a||"2"===a||"4"===a?e.setState({pageNum:1,shareModel:a,testSourceValue:a,unitId:"",testSourceVisible:!1},(function(){e.getCourseTestList()})):e.setState({pageNum:1,shareModel:"5",unitId:a,testSourceValue:a,testSourceVisible:!1},(function(){e.getCourseTestList()}))},e.shareModelChange=function(t){e.setState({pageNum:1,shareModel:t.target.value},(function(){e.getCourseTestList()}))},e.zhClick=function(){var t=e.state.sortSet;"zh"===t.value?(t.zhOrder=!t.zhOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.zhOrder,"a.id")}))):e.setState({sortSet:Object(L.a)(Object(L.a)({},t),{},{zhOrder:!0,value:"zh"})},(function(){e.testOrderChange(t.zhOrder,"a.id")}))},e.zjClick=function(){var t=e.state.sortSet;"zj"===t.value?(t.zjOrder=!t.zjOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.zjOrder,"a.assembled_num")}))):e.setState({sortSet:Object(L.a)(Object(L.a)({},t),{},{zjOrder:!0,value:"zj"})},(function(){e.testOrderChange(t.zjOrder,"a.assembled_num")}))},e.ndClick=function(){var t=e.state.sortSet;"nd"===t.value?(t.ndOrder=!t.ndOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.ndOrder,"a.difficulty")}))):e.setState({sortSet:Object(L.a)(Object(L.a)({},t),{},{ndOrder:!0,value:"nd"})},(function(){e.testOrderChange(t.ndOrder,"a.difficulty")}))},e.testOrderChange=function(t,a){t?e.setState({pageNum:1,orderAscfield:a,orderDescfield:""},(function(){e.getCourseTestList()})):e.setState({pageNum:1,orderAscfield:"",orderDescfield:a},(function(){e.getCourseTestList()}))},e.onShowSizeChange=function(t,a){e.setState({pageNum:1,pageSize:a},(function(){e.getCourseTestList()}))},e.onPageNumChange=function(t,a){e.setState({pageNum:t},(function(){e.getCourseTestList()}))},e.tabChange=function(t){"1"===t?e.setState({pageNum:1,activeKey:t,createUserId:void 0,courseCloudFlag:"1",courseCollectFlag:"",shareModel:"",testSourceValue:"",searchSchool:"hide"},(function(){return e.getCourseTestList()})):"2"===t?e.setState({pageNum:1,activeKey:t,createUserId:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).user.id:"",courseCloudFlag:"",courseCollectFlag:"",testRealCheck:"",examYearCheck:"",regionCheck:"",shareModel:"",testSourceValue:"",unitId:"",resourceProvinceName:"",resourceCityName:"",resourceCountyName:"",examYearName:"",resourceProvince:"",resourceCity:"",resourceCounty:"",cityData:[],countyData:[],searchSchool:"show"},(function(){return e.getCourseTestList()})):e.setState({pageNum:1,activeKey:t,createUserId:void 0,courseCloudFlag:"",courseCollectFlag:"1",shareModel:"",testSourceValue:"",searchSchool:"show"},(function(){return e.getCourseTestList()}))},e.showAnswerChange=function(t,a){e.setState({showAnswer:t})},e.obligationClick=function(){var t=e.state,a=t.catalogStageId,s=t.catalogSubjectId,r=t.catalogArrayChecked;e.setState({stageId:a,subjectId:s,catalogArray:r,pointsArray:[],isObligation:!0,isOrdinary:!1,pageNum:1,courseTestList:[],total:0},(function(){e.testReal(),e.getTestIdList(),e.getTestFormList(),a&&s&&(e.getCourseListTree(),e.getCourseTestList())}))},e.ordinaryOnClick=function(){var t=e.state,a=t.knowledgeStageId,s=t.knowledgeSubjectId,r=t.pointsArrayChecked;e.setState({stageId:a,subjectId:s,catalogArray:[],pointsArray:r,isOrdinary:!0,isObligation:!1,pageNum:1,courseTestList:[],total:0},(function(){e.testReal(),e.getTestIdList(),e.getTestFormList(),a&&s&&(e.getSubjectKnowledgePointTree(),e.getCourseTestList())}))},e.collectChange=function(){var t=Object(j.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Q.a)({userId:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).user.id:"",resourceId:a});case 2:e.getCourseTestList();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.analyzeTestModal=function(t){e.setState({AnalyzeTestModal:!0,testDetail:t})},e.analyzeCancel=function(){e.setState({AnalyzeTestModal:!1})},e.errorTestModal=function(t){e.setState({ErrorTestModal:!0,testId:t})},e.errorTestCancel=function(){e.setState({ErrorTestModal:!1})},e.errorTestSave=function(){e.ErrorTestForm.props.form.validateFields((function(t,a){if(!t){var s=e.ErrorTestForm.getItemsValue(),r={errorTypeList:s.patternValue.map((function(e){return{errorType:e}})),errorMemo:s.errorMemo,testId:e.state.testId};Object(W.b)(r).then((function(t){e.ErrorTestForm.resetFields(),e.setState({ErrorTestModal:!1}),O.a.success("\u63d0\u4ea4\u6210\u529f\uff01")}))}}))},e.similarTestModal=function(t){e.setState({similarTestModal:!0,testId:t})},e.similarTestCancel=function(){e.setState({similarTestModal:!1})},e.addTestModal=function(t){e.setState({resourceId:t,addTestModal:!0})},e.addTestCancel=function(){e.setState({addTestModal:!1})},e.courseTestSave=function(){e.AddTestForm.props.form.validateFields((function(t,a){if(!t){var s=e.state.resourceId,r=e.AddTestForm.getItemsValue();Object(X.h)({resourceId:s,stepId:r.stepId,courseId:r.courseId}).then((function(t){O.a.success("\u6dfb\u52a0\u6210\u529f"),e.setState({addTestModal:!1})}))}}))},e.deleteTest=function(t){var a=Object(F.a)(e);ie({title:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u9053\u9898\u5417?",content:"\u5220\u9664\u540e\uff0c\u6240\u6709\u7528\u6237\u5c06\u4e0d\u80fd\u7ee7\u7eed\u4f7f\u7528\u8be5\u8bd5\u9898",okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){Object(W.a)(t).then((function(e){O.a.success("\u5220\u9664\u6210\u529f"),a.setState({pageNum:1},(function(){a.getCourseTestList()}))}))},onCancel:function(){O.a.info("\u5df2\u53d6\u6d88")}})},e.editTest=function(t){e.props.history.push({pathname:"/teaching/question-bank/create-test",state:t})},e.bookChange=function(t){var a=e.state.myCourseList,s="",r="";a.forEach((function(e){e.id===t&&(s=e.stageId,r=e.subjectId)})),e.setState({testRealCheck:"",pageNum:1,bookId:t,catalogArray:[],catalogArrayChecked:[],stageId:s,catalogStageId:s,subjectId:r,catalogSubjectId:r},(function(){e.testReal(),e.getCourseListTree(),e.getTestIdList(),e.getTestFormList(),e.getCourseTestList();var a=Object(L.a)(Object(L.a)({},e.state.myjsonData),{},{examBook:{lastExamBookId:t}});Object(G.b)(a).then((function(e){}))}))},e.myStageChange=function(t){e.setState({pageNum:1,stageId:t[0],knowledgeStageId:t[0],subjectId:t[1],knowledgeSubjectId:t[1],pointsArrayChecked:[],pointsArray:[]},(function(){e.testReal(),e.getSubjectKnowledgePointTree(),e.getTestIdList(),e.getTestFormList(),e.getCourseTestList()}))},e.classifyCheck=function(t,a){e.setState({pageNum:1,catalogArray:t,catalogArrayChecked:t,selectCatalogId:t[0]},(function(){e.getCourseTestList()}))},e.knowledgePointCheck=function(t,a){e.setState({pageNum:1,pointsArrayChecked:t,pointsArray:t},(function(){e.getCourseTestList()}))},e.renderTreeNodes=function(t){return t.map((function(t){return t.children?J.a.createElement(ce,{title:t.name,key:t.id,dataRef:t},e.renderTreeNodes(t.children)):J.a.createElement(ce,{title:t.name,key:t.id,value:t.id,dataRef:t})}))},e.selectMenu=function(t,a){var s=e.state,r=s.testFormList,n=(s.testForm,Object(T.a)(r)),c=e.testFormFilter(t);return r.includes(c)||n.push(c),J.a.createElement(b.a,null,n.map((function(t,s){return J.a.createElement(b.a.Item,{key:s},J.a.createElement("a",{onClick:function(){return e.saveTestBasket(a,t)}},t))})))},e.testDiffFilter=function(t){return e.state.testDiffMap[t]},e.testRealFilter=function(t){return e.state.testRealMap[t]},e.testFormFilter=function(t){var a=[];return e.state.checklist&&e.state.checklist.length>0&&e.state.checklist.map((function(e){return 1==e.checked&&"\u5168\u9009"!=e.name?a.push(e.name):""})),e.state.testFormMap[t]},e.getStem=function(t,a,s){var r=0===s?J.a.createElement("span",null,a+1+"\u3001"+(1===t.examFlag?"\uff08".concat(t.examYear," \xb7 ").concat(e.testRealFilter(t.examFrom),"\uff09"):"")):J.a.createElement("span",null,a+1+"."),n=e.state.showAnswer;if("2"===t.testForm){if(n){var c=t.courseTestBlankAnwser,o=t.stem;return c.filter((function(e){return 1===e.standardFlag})).forEach((function(e){o=o.replace("___".concat(e.blankId,"___"),'<span class="blank-show-anwser">&nbsp;&nbsp;'.concat(e.anwserText,"&nbsp;&nbsp;</span>"))})),J.a.createElement("div",null,r,J.a.createElement("span",{dangerouslySetInnerHTML:{__html:o}}))}return J.a.createElement("div",null,r,J.a.createElement("span",{dangerouslySetInnerHTML:{__html:t.stem.replace(/___.*?___/g,"______")}}))}return J.a.createElement("div",null,r,J.a.createElement("span",{dangerouslySetInnerHTML:{__html:t.stem}}))},e.goDetail=function(){if(e.state.testBasketIdList.length<=0)O.a.warning("\u8bd5\u9898\u7bee\u4e3a\u7a7a,\u8bf7\u6dfb\u52a0\u8bd5\u9898\u5230\u8bd5\u9898\u7bee\u540e\u91cd\u8bd5!");else{var t={subjectId:e.state.subjectId,stageId:e.state.stageId};e.props.history.push({pathname:"/teching/group-centers/1/0",search:JSON.stringify(t)})}},e.addressVisibleChange=function(t){e.setState({addressVisible:t})},e.examYearVisibleChange=function(t){e.setState({examYearVisible:t})},e.testSourceVisibleChange=function(t){e.setState({testSourceVisible:t})},e.testSourceFilter=function(t){if(""===t)return"\u6765\u6e90";var a=e.state,s=(a.testSourceList,a.unitListAll),r={};return s.forEach((function(e){return r[e.id]=e.unitName})),r[t]},e.zhClick=function(){var t=e.state.sortSet;"zh"===t.value?(t.zhOrder=!t.zhOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.zhOrder,"a.id")}))):e.setState({sortSet:Object(L.a)(Object(L.a)({},t),{},{zhOrder:!0,value:"zh"})},(function(){e.testOrderChange(t.zhOrder,"a.id")}))},e.syClick=function(){var t=e.state.sortSet;"sy"===t.value?(t.syOrder=!t.syOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.syOrder,"d.used_num")}))):e.setState({sortSet:Object(L.a)(Object(L.a)({},t),{},{syOrder:!0,value:"sy"})},(function(){e.testOrderChange(t.syOrder,"d.used_num")}))},e.scClick=function(){var t=e.state.sortSet;"sc"===t.value?(t.scOrder=!t.scOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.scOrder,"d.collect_num")}))):e.setState({sortSet:Object(L.a)(Object(L.a)({},t),{},{scOrder:!0,value:"sc"})},(function(){e.testOrderChange(t.scOrder,"d.collect_num")}))},e.testOrderChange=function(t,a){t?e.setState({orderAscfield:a,orderDescfield:""},(function(){e.getCourseTestList()})):e.setState({orderAscfield:"",orderDescfield:a},(function(){e.getCourseTestList()}))},e.resourceNameSearch=function(t){e.setState({pageNum:1,resourceName:t.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getCourseTestList()}))},e.searchChange=function(t){e.setState({searchCourseValue:t.target.value},(function(){e.setState({pageNum:1,resourceName:e.state.searchCourseValue.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getCourseTestList()}))}))},e.resourceNameSearchPaper=function(t){e.setState({pageNum:1,resourceName:t.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getCourseTestList()}))},e.searchChangeSchool=function(t){e.setState({searchCourseValueSchool:t.target.value},(function(){e.setState({pageNum:1,resourceName:e.state.searchCourseValueSchool.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getCourseTestList()}))}))},e.resourceNameSearchSchool=function(t){e.setState({pageNum:1,resourceName:t.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getCourseTestList()}))},e.searchChangePaper=function(t){e.setState({searchPaperValue:t.target.value},(function(){e.setState({pageNum:1,resourceName:e.state.searchPaperValue.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getCourseTestList()}))}))},e}return Object(w.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getExamYearList(5),this.setState({userId:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).user.id:"",myUnitId:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).user.unitId:""},(function(){e.getCourseList(),e.getMyStageList()})),this.getDicList({groupName:"testForm"}),this.testDiff({groupName:"testDiff"}),this.testCate({groupName:"testCate"}),this.getUnitListByKeyWord(""),this.getProvince()}},{key:"getProvince",value:function(){var e=Object(j.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.w)();case 2:(t=e.sent)&&t.length>0&&this.setState({provinceData:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUnitListByKeyWord",value:function(){var e=Object(j.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.a)(t);case 2:a=e.sent,this.setState({unitList:a}),t||this.setState({unitListAll:a});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getExamYearList",value:function(e){for(var t=(new Date).getFullYear(),a=[],s=0;s<e;s++){var r={value:t-s};r.key=s===e-1?"\u66f4\u65e9":t-s,a.push(r)}this.setState({examYearList:a})}},{key:"getSubCanton",value:function(){var e=Object(j.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.w)(t);case 2:a=e.sent,this.setState({region:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDicList",value:function(){var e=Object(j.a)(N.a.mark((function e(t){var a,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.o)(t);case 2:a=e.sent,s={},a.forEach((function(e){s[e.value]=e.text})),this.setState({testForm:a,testFormMap:s});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"testDiff",value:function(){var e=Object(j.a)(N.a.mark((function e(t){var a,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.o)(t);case 2:a=e.sent,s={},a.forEach((function(e){s[e.value]=e.title})),this.setState({testDiff:a,testDiffMap:s});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"testCate",value:function(){var e=Object(j.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.o)(t);case 2:a=e.sent,this.setState({testCate:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"testReal",value:function(){var e=Object(j.a)(N.a.mark((function e(){var t,a,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(t=this.state.stageId)){e.next=5;break}e.t0=[],e.next=8;break;case 5:return e.next=7,Object(W.i)(t);case 7:e.t0=e.sent;case 8:a=e.t0,s={},a.forEach((function(e){s[e.id]=e.typeName})),this.setState({testReal:a,testRealMap:s});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTestIdList",value:function(){var e=Object(j.a)(N.a.mark((function e(){var t,a,s,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.subjectId,s=t.stageId,e.next=3,Object(W.h)({subjectId:a,stageId:s});case 3:r=e.sent,this.setState({testBasketIdList:r});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTestFormList",value:function(){var e=Object(j.a)(N.a.mark((function e(){var t,a,s,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.subjectId,s=t.stageId,e.next=3,Object(W.g)({subjectId:a,stageId:s});case 3:r=e.sent,this.setState({testFormList:r});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveTestBasket",value:function(e,t){var a=this,s=this.state,r=s.testBasketIdList,n=s.testBasketMax,c=s.stageId,o=s.subjectId;if(r.length>=n)return O.a.error("\u8bd5\u9898\u7bee\u53ea\u80fd\u6dfb\u52a040\u9053\u9898\uff01");Object(W.k)({testId:e,subjectId:o,stageId:c,testFormName:t}).then((function(e){a.getTestFormList(),a.setState({testBasketIdList:e})}))}},{key:"getCourseTestList",value:function(){var e=Object(j.a)(N.a.mark((function e(){var t,a,s,r,n,c,o,i,u,l,d,h,m,f,g,p,C,k,y,v,S,b,T,I,O,E,j,L,x,w,F=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.checklist=[{name:"\u5168\u9009",checked:!1}],t=this.state,a=t.pageNum,s=t.pageSize,r=t.courseCloudFlag,n=t.courseCollectFlag,c=t.myUnitId,o=t.subjectId,i=t.stageId,u=t.catalogArray,l=t.pointsArray,d=t.testFormCheck,h=t.testDiffCheck,m=t.testCateCheck,f=t.testRealCheck,g=t.examYearCheck,p=t.shareModel,C=t.unitId,k=t.selectType,y=t.orderAscfield,v=t.orderDescfield,S=t.createUserId,b=t.resourceProvince,T=t.resourceCity,I=t.resourceCounty,O=t.searchCourseValue,E=t.searchPaperValue,j=t.resourceName,L=t.searchCourseValueSchool,x={pageNum:a,pageSize:s,seniorId:0,courseCloudFlag:r,courseCollectFlag:n,myUnitId:c,subjectId:o,stageId:i,pointsArray:l,catalogArray:u,testForm:d,difficulty:h,testType:m,examFrom:f,examYear:g,selectType:k,resourceProvince:b,resourceCity:T,resourceCounty:I,shareModel:p,unitId:C,createUserId:S,orderAscfield:y,orderDescfield:v,searchCourseValue:O,searchPaperValue:E,searchCourseValueSchool:L,resourceName:j},e.next=5,Object(W.e)(x);case 5:(w=e.sent).data&&w.data.length>0&&w.data.map((function(e){return F.state.checklist.push({name:e.id,checked:!1})})),this.setState({courseTestList:w.data,total:w.total});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCourseList",value:function(){var e=Object(j.a)(N.a.mark((function e(){var t,a,s,r,n,c,o=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.c)({userId:this.state.userId});case 2:return t=e.sent,e.next=5,Object(G.a)();case 5:a=e.sent,s=JSON.parse(a),this.setState({myjsonData:s}),r=null,r=s.examBook?s.examBook.lastExamBookId:t.length>0?t[0].id:null,n="",c="",t.forEach((function(e){e.id===r&&(n=e.stageId,c=e.subjectId)})),r&&this.setState({bookId:r,stageId:n,catalogStageId:n,subjectId:c,catalogSubjectId:c},(function(){o.testReal(),o.getCourseListTree(),o.getTestIdList(),o.getTestFormList(),o.getCourseTestList()})),this.setState({myCourseList:t});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMyStageList",value:function(){var e=Object(j.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.u)();case 2:t=e.sent,a=t.map((function(e){return Object(L.a)(Object(L.a)({},e),{},{subjectName:e.stageName,id:e.stageId})})),this.setState({mySubjectList:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCourseListTree",value:function(){var e=Object(j.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.bookId)){e.next=7;break}return e.next=4,Object($.d)({bookId:t});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=[];case 8:a=e.t0,this.setState({courseTree:a});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSubjectKnowledgePointTree",value:function(){var e=Object(j.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.subjectId)){e.next=7;break}return e.next=4,Object($.g)({subjectId:t});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=[];case 8:a=e.t0,this.setState({subjectKnowledgePointTree:a});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkThis",value:function(e){e.checked=!e.checked,"\u5168\u9009"===e.name&&(e.checked?this.state.checklist.forEach((function(e){e.checked=!0})):this.state.checklist.forEach((function(e){e.checked=!1})));this.state.checklist.some((function(e){if(!e.checked)return!0}));for(var t=this.state.checklist.length,a=!0,s=1;s<t;s++)this.state.checklist[s].checked||(a=!1);a&&(this.state.checklist[0].checked=!0),this.setState({checklist:this.state.checklist})}},{key:"render",value:function(){var e=this,t=this,a=this.state,s=a.courseTestList,r=a.total,n=a.pageNum,o=a.pageSize,u=a.myCourseList,d=a.mySubjectList,m=a.courseTree,g=a.subjectKnowledgePointTree,C=a.isObligation,y=a.isOrdinary,S=a.testDetail,b=a.testRealMap,T=a.testDiffMap,I=a.AnalyzeTestModal,O=a.ErrorTestModal,E=a.similarTestModal,N=a.addTestModal,j=a.testId,L=a.bookId,x=a.testBasketIdList,w=a.testBasketMax,F=(a.examYearList,a.sortSet),M=a.selectCatalogId,z=(a.unitList,a.testSourceValue,a.provinceData,a.cityData,a.countyData,a.searchCourseValue),A=a.searchPaperValue,D=a.searchCourseValueSchool,V=a.searchSchool,_=s.map((function(a,s){return J.a.createElement(p.a,{key:s,title:e.getStem(a,s,0),bordered:!1},J.a.createElement(k.a,{type:"flex",justify:"space-around",className:"question-container"},J.a.createElement(v.a,{span:12,className:"question-bottom"},J.a.createElement("div",{className:"question-bottom-left"},J.a.createElement("div",{className:"question-bottom-doc"},J.a.createElement("span",{className:"checkboxGro"},J.a.createElement("label",null,J.a.createElement("input",{type:"checkbox",onChange:t.checkThis.bind(t,e.state.checklist&&e.state.checklist[s+1]?e.state.checklist[s+1]:""),checked:e.state.checklist[s+1].checked}),"\u8bf7\u9009\u62e9")),J.a.createElement("span",null,"\u521b\u5efa\u65f6\u95f4\uff1a",a.createTime?a.createTime.substring(0,10):""),J.a.createElement("span",null,"\u5f15\u7528\uff1a",a.usedNum),J.a.createElement("span",null,"\u9898\u91cf\uff1a",a.usedNum),J.a.createElement("span",null,"\u6536\u85cf\uff1a",a.usedNum),J.a.createElement("span",null,"\u6240\u5c5e\u8bfe\u7a0b\uff1a",a.createUserName),J.a.createElement("span",null,"\u6765\u6e90\uff1a",a.createUserName)))),J.a.createElement(v.a,{span:12,className:"question-bottom-right"})))})),R=J.a.createElement("div",null,J.a.createElement(B.a,{placeholder:"\u9009\u62e9\u6559\u6750",onChange:this.bookChange,dropdownMatchSelectWidth:!0,value:L},u.map((function(e,t){return J.a.createElement(oe,{key:t,value:e.id},e.bookName)}))),J.a.createElement(Y.a,{selectedKeys:[M],autoExpandParent:!0,onSelect:this.classifyCheck},this.renderTreeNodes(m))),K=J.a.createElement("div",{className:"science"},J.a.createElement(f.a,{placeholder:"\u9009\u62e9\u5b66\u79d1",options:d,fieldNames:{label:"subjectName",value:"id",children:"subjectList"},onChange:this.myStageChange}),J.a.createElement(Y.a,{autoExpandParent:!0,onSelect:this.knowledgePointCheck},this.renderTreeNodes(g)));return J.a.createElement("div",{className:"question-bank teach-main"},J.a.createElement("div",{className:"teach-main-box"},J.a.createElement(ee.a,{navName:"question-bank"}),J.a.createElement("div",{className:"teach-main-cont"},J.a.createElement(k.a,{gutter:16},J.a.createElement(v.a,{span:6},J.a.createElement("div",{className:"question-tab"},J.a.createElement(U.a,{defaultActiveKey:"1",onChange:this.tabChange},J.a.createElement(ne,{tab:"\u6821\u5185\u8bfe\u7a0b",key:"1"}),J.a.createElement(ne,{tab:"\u5e73\u53f0\u8bfe\u7a0b",key:"2"}),J.a.createElement(ne,{tab:"\u6211\u7684\u6536\u85cf",key:"3"})),J.a.createElement(k.a,null,J.a.createElement(v.a,{span:24},J.a.createElement("div",{className:"version-detail question-teaching-list",style:{display:!0===C?"block":"none"}},R)),J.a.createElement(v.a,{span:24},J.a.createElement("div",{className:"version-detail question-teaching-list",style:{display:!0===y?"block":"none"}},K))))),J.a.createElement(v.a,{span:18,className:"paper-right-top"},J.a.createElement("div",{className:"paper-right-menu"},J.a.createElement(k.a,{span:24},J.a.createElement(v.a,{span:20,className:"res-btn"},J.a.createElement(k.a,{className:"paper-common",gutter:24},J.a.createElement(v.a,{span:2,className:"paper-year"},"\u6392\u5e8f"),J.a.createElement(v.a,{span:22,className:"paper-common-btn"},J.a.createElement(l.a,{type:"zh"===F.value?"primary":"",onClick:function(){return e.zhClick()}},"\u521b\u5efa\u65f6\u95f4","zh"===F.value?J.a.createElement(h.a,{type:F.zhOrder?"up":"down"}):""),J.a.createElement(l.a,{type:"sy"===F.value?"primary":"",onClick:function(){return e.syClick()}},"\u5f15\u7528\u91cf","sy"===F.value?J.a.createElement(h.a,{type:F.syOrder?"up":"down"}):""),J.a.createElement(l.a,{type:"sc"===F.value?"primary":"",onClick:function(){return e.scClick()}},"\u6536\u85cf\u91cf","sc"===F.value?J.a.createElement(h.a,{type:F.scOrder?"up":"down"}):"")))),J.a.createElement(v.a,{span:4},J.a.createElement("div",{className:"paper-all-exp"},J.a.createElement(l.a,{type:"primary",icon:"plus",style:{marginLeft:"15"},onClick:function(){return e.saveTestBasket(e.testFormFilter())}},"\u5bfc\u5165"))))),J.a.createElement(k.a,{span:24,className:"res-search-box"},J.a.createElement(v.a,{span:2,className:"checkbox"},J.a.createElement("div",{className:"site-checkbox-all-wrapper "},J.a.createElement("label",null,J.a.createElement("input",{type:"checkbox",onChange:t.checkThis.bind(t,this.state.checklist[0]),checked:this.state.checklist[0].checked}),"\u5168\u9009"))),J.a.createElement(v.a,{span:5,className:"res-btn "+V},J.a.createElement(ue,{placeholder:"\u8bf7\u8f93\u5165\u5b66\u6821\u540d\u79f0",value:D,onSearch:function(t){return e.resourceNameSearchSchool(t)},onChange:this.searchChangeSchool})),J.a.createElement(v.a,{span:5,className:"res-btn"},J.a.createElement(ue,{placeholder:"\u8bf7\u8f93\u5165\u8bfe\u7a0b\u540d\u79f0",value:z,onSearch:function(t){return e.resourceNameSearch(t)},onChange:this.searchChange})),J.a.createElement(v.a,{span:5,className:"res-btn"},J.a.createElement(ue,{placeholder:"\u8bf7\u8f93\u5165\u8bd5\u5377\u540d\u79f0",value:A,onSearch:function(t){return e.resourceNameSearchPaper(t)},onChange:this.searchChangePaper})),J.a.createElement(v.a,{span:"hide"==V?12:7},J.a.createElement("div",{className:"paper-all"},"\u5171\u8ba1",J.a.createElement("span",{className:"paper-number"},r),"\u5957\u8bd5\u5377"))),J.a.createElement("div",{className:"paper-right-bottom"},s&&s.length>0?J.a.createElement("div",null,_,J.a.createElement("div",{style:{textAlign:"right",marginTop:10}},J.a.createElement(i.a,{showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,onChange:this.onPageNumChange,defaultCurrent:1,current:n,pageSize:o,total:r,showTotal:function(e){return"\u5171 "+e+" \u6761"}}))):J.a.createElement(c.a,null)))),J.a.createElement(P.a,{className:"modal-btn",visible:I,title:"\u8bd5\u9898\u8be6\u60c5",onOk:this.handleAccredit,onCancel:this.analyzeCancel,keyboard:!1,maskClosable:!1,footer:[J.a.createElement(l.a,{key:"back",onClick:this.analyzeCancel},"\u8fd4\u56de"),J.a.createElement(l.a,{key:"submit",type:"primary",onClick:this.analyzeCancel},"\u786e\u8ba4")]},J.a.createElement(te.default,{testDetail:S,testRealMap:b,testBasketIdList:x,testBasketMax:w,saveTestBasket:this.saveTestBasket.bind(this),wrappedComponentRef:function(t){e.AnalysisTestFrom=t}})),J.a.createElement(P.a,{className:"modal-btn",visible:O,title:"\u8bd5\u9898\u7ea0\u9519",onOk:this.handleAccredit,onCancel:this.errorTestCancel,keyboard:!1,maskClosable:!1,footer:[J.a.createElement(l.a,{key:"back",onClick:this.errorTestCancel},"\u8fd4\u56de"),J.a.createElement(l.a,{key:"submit",type:"primary",onClick:this.errorTestSave},"\u786e\u8ba4")]},J.a.createElement(ae.default,{wrappedComponentRef:function(t){e.ErrorTestForm=t}})),J.a.createElement(P.a,{className:"modal-btn",width:"850px",visible:E,title:"\u76f8\u4f3c\u9898",onOk:this.handleAccredit,onCancel:this.similarTestCancel,keyboard:!1,maskClosable:!1,footer:[J.a.createElement(l.a,{key:"back",onClick:this.similarTestCancel},"\u8fd4\u56de"),J.a.createElement(l.a,{key:"submit",type:"primary",onClick:this.similarTestCancel},"\u786e\u8ba4")]},J.a.createElement(se.default,{testId:j,testRealMap:b,testDiffMap:T,testBasketIdList:x,testBasketMax:w,saveTestBasket:this.saveTestBasket.bind(this),wrappedComponentRef:function(t){e.SimilarTestFrom=t}})),J.a.createElement(P.a,{className:"modal-btn",visible:N,title:"\u6dfb\u52a0\u5230\u6211\u7684\u8bfe\u7a0b",onOk:this.handleAccredit,onCancel:this.addTestCancel,keyboard:!1,maskClosable:!1,footer:[J.a.createElement(l.a,{key:"back",onClick:this.addTestCancel},"\u8fd4\u56de"),J.a.createElement(l.a,{key:"submit",type:"primary",onClick:this.courseTestSave},"\u786e\u8ba4")]},J.a.createElement(re.default,{wrappedComponentRef:function(t){e.AddTestForm=t}})))))}}]),a}(q.Component),de=r.a.create()(le);t.default=de}}]);