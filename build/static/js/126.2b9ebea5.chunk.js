(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[126],{1956:function(e,a,t){},2712:function(e,a,t){"use strict";t.r(a);t(40);var s,r=t(5),n=t.n(r),c=(t(43),t(2)),o=t.n(c),i=(t(97),t(14)),l=t.n(i),d=(t(382),t(168)),u=t.n(d),m=(t(45),t(6)),p=t.n(m),h=(t(51),t(22)),y=t.n(h),I=t(144),g=(t(54),t(15)),v=t.n(g),E=t(9),w=t(12),N=t(52),f=t(11),k=t(10),b=(t(41),t(8)),S=t.n(b),T=t(0),O=t.n(T),C=(t(1956),t(27)),D=t(279),B=t(36),R=t.n(B),j=t(35),F=S.a.Item,Y=Object(j.g)(s=function(e){Object(f.a)(s,e);var a=Object(k.a)(s);function s(){var e;Object(E.a)(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).state={paperName:"\u8bf7\u5148\u9009\u62e9\u8bd5\u5377",paperId:"",publishAnswerType:"1",homeworkName:sessionStorage.addBusyBack?"\u4f5c\u4e1a":"",addBusyUrl:"",editId:"",stepId:"",startFlag:"",urlBack:"",selectType:!1,resourceId:"",headIsShow:!1,bigMajor:"",medMajor:"",stageType:"",major:"",catalogArr:[],backType:"",courseId:"",catalogId:"",classroomId:"",activeKey:"",titleType:"",isClick:!0,homeworkState:""},e.editGetOneHomework=function(a){Object(C.l)(a).then((function(a){1!=e.state.selectType&&e.setState({paperId:a.relateResourceId}),e.setState({publishAnswerType:a.publishAnswerType,homeworkName:a.homeworkName,studyFromTime:a.studyFromTime,studyEndTime:a.studyEndTime,startFlag:a.startFlag,editId:a.id})}))},e.GetOneHomework=function(a){Object(C.a)(a).then((function(a){var t=a;e.setState({catalogArr:t&&t.length>0?t.reverse().join(">"):"\u65e0"})}))},e.getHomeWork=function(a){var t=e.state,s=t.paperId;t.paperName;Object(D.f)({id:a}).then((function(a){if(a.homeworkName){var t=a.homeworkName,r=a.publishAnswerType,n=a.studyFromTime,c=a.studyEndTime,o=a.relateResourceName,i=a.relateResourceId;if(e.setState({homeworkName:t,studyFromTime:n,studyEndTime:c,publishAnswerType:r,paperId:s||i}),e.state.paperName)return;e.setState({paperName:o})}}))},e.addCourseClick=function(){var a=e.props.location.search.split("?")[1],t=a.includes("%")?decodeURI(a):a,s=JSON.parse(t);s.url;s.xzType="xz",s.url="/teaching/my-course/add-busy",s.isAdd=!0,e.state.editId&&(s.titleType="edit"),sessionStorage.addBusyBack?e.props.history.replace("/teching/complete-test?".concat(encodeURI(JSON.stringify(s)))):e.props.history.push("/teching/complete-test?".concat(encodeURI(JSON.stringify(s))))},e.onFinish=function(a){var t=e.state,s=t.courseId,r=t.catalogId,n=t.stepId,c=t.paperName,o=t.paperId,i=t.startFlag,l=t.urlBack,d=t.homeworkId,u=t.resourceId,m=t.headIsShow,p=(t.classroomId,t.activeKey);t.endValue;if(1==t.isClick){e.setState({isClick:!1});var h=(new Date).getTime();e.props.form.validateFields((function(a,t){if(!a){var y=R()(t.studyFromTime).format("YYYY-MM-DD HH:mm:ss"),I=R()(t.studyEndTime).format("YYYY-MM-DD HH:mm:ss");if(h>new Date(I).getTime())v.a.error("\u4f5c\u4e1a\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4");else{var g=window.top.location.href.split("?")[1],E=g.includes("%")?decodeURI(g):g,w=(JSON.parse(E),{courseId:s,classroomId:u,catalogId:r,url:"/teaching/my-course/course-directory",activeKey:p});d?Object(D.e)({id:d,catalogId:r,homeworkName:t.homeworkName,publishAnswerType:t.publishAnswerType,relateResourceName:c,relateResourceId:o,studyFromTime:y,studyEndTime:I,stepId:n,startFlag:i}).then((function(a){if(v.a.success("\u7f16\u8f91\u6210\u529f"),w.activityId=a.activityId,w.homeworkId=a.id,w.activityStatus=a.activityStatus,sessionStorage.addBusyBack)return delete w.url,window.top.location.replace("/#/teching/projection-screen/look-busy?".concat(encodeURI(JSON.stringify(w)))),sessionStorage.removeItem("addBusyBack"),!1;m?v.a.success("\u6dfb\u52a0\u6210\u529f"):l?e.props.history.push("".concat(l,"?").concat(encodeURI(JSON.stringify(w)))):e.props.history.push("/teaching/my-course/course-directory?".concat(encodeURI(JSON.stringify(w))))})):Object(D.b)({courseId:s,catalogId:r,homeworkName:t.homeworkName,publishAnswerType:t.publishAnswerType,relateResourceName:c,relateResourceId:o,studyFromTime:y,studyEndTime:I,stepId:n,startFlag:i,classroomId:u}).then((function(a){if(v.a.success("\u6dfb\u52a0\u6210\u529f"),w.homeworkId=a.id,w.activityId=a.activityId,w.activityStatus=a.activityStatus,sessionStorage.addBusyBack)return delete w.url,window.top.location.replace("/#/teching/projection-screen/look-busy?".concat(encodeURI(JSON.stringify(w)))),sessionStorage.removeItem("addBusyBack"),!1;m?v.a.success("\u6dfb\u52a0\u6210\u529f"):l?e.props.history.push("".concat(l,"?").concat(encodeURI(JSON.stringify(w)))):e.props.history.push("/teaching/my-course/course-directory?".concat(encodeURI(JSON.stringify(w))))}))}}}));var y=Object(N.a)(e);setTimeout((function(){y.setState({isClick:!0})}),1e3)}},e.showUserModal=function(){var a=e.state,t=a.courseId,s=a.urlBack,r=a.resourceId,n=(a.headIsShow,a.backType),c=a.catalogId,o=a.hierarchy,i={courseId:t,resourceId:r};s?("curDetailBusy"==n&&(i={courseId:t,resourceId:r,catalogId:c,hierarchy:o}),e.props.history.push("".concat(s,"?").concat(encodeURI(JSON.stringify(i))))):e.props.history.push("/teaching/my-course/course-directory?".concat(encodeURI(JSON.stringify(i))))},e.disabledStartDate=function(a){var t=new Date,s=t.getTime();t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);var r=s-(t=t.getTime()),n=(new Date).getTime()-r,c=e.state.endValue;return a.valueOf()<n?a.valueOf()<n:!(!a||!c)&&a.valueOf()>c.valueOf()},e.onStartChange=function(a){e.onChange("startValue",a)},e.onEndChange=function(a){e.onChange("endValue",a)},e.disabledEndDate=function(a){var t=(new Date).getTime()-864e5,s=e.state.startValue;return a.valueOf()<t?a.valueOf()<t:!(!a||!s)&&void 0},e.onChange=function(a,t){e.setState(Object(I.a)({},a,t))},e.onStartChange=function(a){e.onChange("startValue",a)},e.onEndChange=function(a){e.onChange("endValue",a)},e}return Object(w.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.location.search,a=e.split("?")[1],t=a.includes("%")?decodeURI(a):a,s=JSON.parse(t),r=s.homeworkState,n=s.courseId,c=s.catalogId,o=s.homeworkId||s.editId,i=s.hierarchy,l=s.paperId,d=s.paperName,u=s.editId,m=s.stepId,p=s.url,h=s.selectType,y=s.classroomId||s.resourceId,I=s.classroomId||s.resourceId,g=s.isShow,v=s.backType,E=s.titleType,w=s.activeKey;this.state.paperId=l,this.GetOneHomework(c),this.setState({courseId:n,catalogId:c,hierarchy:i,addBusyUrl:e,editId:u,paperName:d,urlBack:p,selectType:h,resourceId:y,stepId:m,headIsShow:g,backType:v,homeworkName:d,classroomId:I,homeworkId:o,activeKey:w,titleType:E,homeworkState:r}),o&&this.getHomeWork(o)}},{key:"goBack",value:function(){var e=this.state,a=e.courseId,t=(e.urlBack,e.resourceId),s=(e.headIsShow,e.backType,{courseId:a,resourceId:t});s={courseId:a,resourceId:t,catalogId:e.catalogId,hierarchy:e.hierarchy};var r=this.props.location.search.split("?")[1],n=r.includes("%")?decodeURI(r):r,c=JSON.parse(n);c.url?(s.url=c.url,s.activeKey=c.activeKey,this.props.history.push("".concat(c.url,"?").concat(encodeURI(JSON.stringify(s))))):this.props.history.push("/teaching/my-course/course-directory?".concat(encodeURI(JSON.stringify(s))))}},{key:"render",value:function(){var e=this,a={labelCol:{span:3},wrapperCol:{span:19}},s={wrapperCol:{span:24}},r=this.state,c=r.publishAnswerType,i=r.homeworkName,d=(r.paperId,r.paperName),m=r.studyFromTime,h=r.studyEndTime,I=(r.startFlag,r.headIsShow,r.catalogArr),g=r.titleType,v=r.homeworkState,E=this.props.form.getFieldDecorator,w=new Date(+new Date+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return O.a.createElement("div",{className:"stage-test teach-main"},O.a.createElement("div",{className:"text-library-boxs"},O.a.createElement("div",{className:"add-busy-head-l"},sessionStorage.addBusyBack?null:O.a.createElement("span",{onClick:function(){e.goBack()}},O.a.createElement("img",{src:t(521),alt:""}),O.a.createElement("span",{className:"text-back",style:{fontSize:"18px",color:"#2A283D"}},"\u8fd4\u56de")),O.a.createElement("div",null,"add"==g?"\u6dfb\u52a0\u4f5c\u4e1a":"\u7f16\u8f91\u4f5c\u4e1a")),O.a.createElement("div",{className:"library-main teach-main-cont"},O.a.createElement(n.a,{gutter:16},O.a.createElement(o.a,{span:24},O.a.createElement("div",{className:"form-tab"},O.a.createElement("div",{className:"title"},O.a.createElement("span",null,"|"),"\u4f5c\u4e1a\u4fe1\u606f"),O.a.createElement(S.a,Object.assign({layout:"horizontal",style:{paddingBottom:18}},a,{onFinish:this.onFinish}),O.a.createElement("div",{className:"input-wrap-l"},O.a.createElement("div",null,O.a.createElement("span",{className:"create-course-title "},O.a.createElement("span",{className:"red"},"\xa0\xa0"),"\u6240\u5c5e\u7ae0\u8282\uff1a")),O.a.createElement("div",null,O.a.createElement(F,a,E("bigMajorId",{initialValue:I})(O.a.createElement(y.a,{type:"text",placeholder:"",maxLength:50,disabled:!0}))))),O.a.createElement("div",{className:"input-wrap-l"},O.a.createElement("div",null,O.a.createElement("span",{className:"create-course-title "},O.a.createElement("span",{className:"red"},"*"),"\u9009\u62e9\u4f5c\u4e1a\uff1a")),O.a.createElement("div",{style:{flex:"none"}},O.a.createElement(F,s,E("patternValue",{initialValue:d,rules:[{required:!0,message:"\u4f5c\u4e1a\u4e0d\u80fd\u4e3a\u7a7a!"}]})(O.a.createElement(y.a,{disabled:!0})))),O.a.createElement("div",{style:{marginLeft:"10px"}},O.a.createElement(p.a,{className:"check-exam",onClick:function(){return e.addCourseClick()},disabled:2==v||3==v},"\u9009\u62e9"))),O.a.createElement("div",{className:"input-wrap-l"},O.a.createElement("div",null,O.a.createElement("span",{className:"create-course-title "},O.a.createElement("span",{className:"red"},"*"),"\u4f5c\u4e1a\u540d\u79f0\uff1a")),O.a.createElement("div",null,O.a.createElement(F,a,E("homeworkName",{initialValue:i,rules:[{required:!0,message:"\u4f5c\u4e1a\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a!"}]})(O.a.createElement(y.a,{type:"text",placeholder:"\u8bf7\u8f93\u5165\u4f5c\u4e1a\u540d\u79f0",maxLength:40}))))),O.a.createElement("div",{className:"input-wrap-l"},O.a.createElement("div",null,O.a.createElement("span",{className:"create-course-title "},O.a.createElement("span",{className:"red"},"*"),"\u5f00\u59cb\u65f6\u95f4\uff1a")),O.a.createElement("div",null,O.a.createElement(F,null,E("studyFromTime",{initialValue:m?R()(m||"YYYY-MM-DD HH:mm:ss"):R()(w,"YYYY/MM/DD HH:mm:ss"),rules:[{required:!0,message:"\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a!"}]})(O.a.createElement(u.a,{disabled:2==v||3==v,disabledDate:this.disabledStartDate,onChange:this.onStartChange,showTime:!0}))))),O.a.createElement("div",{className:"input-wrap-l"},O.a.createElement("div",null,O.a.createElement("span",{className:"create-course-title "},O.a.createElement("span",{className:"red"},"*"),"\u7ed3\u675f\u65f6\u95f4\uff1a")),O.a.createElement("div",null,O.a.createElement(F,null,E("studyEndTime",{initialValue:h?R()(h||"YYYY-MM-DD HH:mm:ss"):void 0,rules:[{required:!0,message:"\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a!"}]})(O.a.createElement(u.a,{disabledDate:this.disabledEndDate,onChange:this.onEndChange,showTime:!0}))))),O.a.createElement("div",{className:"input-wrap-l"},O.a.createElement("div",null,O.a.createElement("span",{className:"create-course-title "},O.a.createElement("span",{className:"red"},"*"),"\u7b54\u6848\u516c\u5e03\uff1a")),O.a.createElement("div",null,O.a.createElement(F,null,E("publishAnswerType",{initialValue:c})(O.a.createElement(l.a.Group,{className:"answer-publish",onChange:function(a){e.setState({publishAnswerType:a.target.value})}},O.a.createElement(l.a,{value:"1"},"\u4f5c\u4e1a\u622a\u6b62\u540e\u516c\u5e03"),O.a.createElement(l.a,{value:"2"},"\u5b66\u751f\u4ea4\u5377\u540e\u516c\u5e03")))))),O.a.createElement(n.a,null,O.a.createElement(o.a,{span:1}),O.a.createElement(o.a,{span:10,className:"sub-btn"},O.a.createElement(p.a,{htmlType:"submit",onClick:this.onFinish},"\u4fdd\u5b58"))))))))))}}]),s}(T.Component))||s,U=S.a.create()(Y);a.default=U}}]);