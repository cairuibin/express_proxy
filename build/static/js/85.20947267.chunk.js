(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[85],{1762:function(e,t,a){"use strict";a(41);var s,n=a(8),c=a.n(n),o=(a(317),a(206)),i=a.n(o),r=(a(45),a(6)),l=a.n(r),d=(a(276),a(83)),u=a.n(d),m=(a(67),a(28)),p=a.n(m),h=a(9),I=a(12),g=a(11),f=a(10),v=a(0),S=a.n(v),y=(a(1789),a(35)),E=a(1794),k=a(1791),b=a(239),w=a(520),C=(a.n(w)()(),Object(y.g)(s=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).getClassRoom=function(){var e=s.state,t=e.classroomId,a=e.stepId;Object(b.s)([t,a]).then((function(e){e&&s.setState({classStatus:e.classStatus})}))},s.state={switchStatus:!0,classBtnContent:0==sessionStorage.getItem("stepId")?"\u8bfe\u524d\u9884\u4e60":2==sessionStorage.getItem("stepId")?"\u8bfe\u540e\u590d\u4e60":"\u8bfe\u5802\u6559\u5b66",stepId:sessionStorage.getItem("stepId")?sessionStorage.getItem("stepId"):1,courseId:"",classroomId:"",catalogId:"",classStatus:""},s}return Object(I.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.search.split("?")[1];if(t){var a=t.includes("%")?decodeURI(t):t,s=JSON.parse(a);this.setState({courseId:s.courseId,classroomId:s.classroomId,catalogId:s.catalogId,pathname:s.pathname,id:s.id,homeworkId:s.homeworkId},(function(){e.getClassRoom()}))}}},{key:"rightSwitch",value:function(){this.props.open({isOpen:!0})}},{key:"goBack",value:function(){var e=this.state,t=e.catalogId,a=e.courseId,s=e.classroomId,n=e.pathname,c=e.id,o=e.homeworkId,i={courseId:a,classroomId:s,catalogId:t};if(sessionStorage.removeItem("coursewareBack"),n)return c&&(i.id=c),o&&(i.homeworkId=o),void this.props.history.replace("".concat(n,"?").concat(encodeURI(JSON.stringify(i))));this.props.history.replace("/teching/projection-screen?".concat(encodeURI(JSON.stringify(i))))}},{key:"finishClass",value:function(){var e=this,t=this.state.classStatus,a=3==t?"\u786e\u5b9a\u8981\u9000\u51fa\u5417\uff1f":"\u786e\u5b9a\u8981\u4e0b\u8bfe\u5417\uff1f";p.a.confirm({title:"\u63d0\u793a",content:a,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",className:"ModalConfirm border_none",onOk:function(){if(2==t){var a={id:e.state.classroomId,releaseStatus:2,over:9};Object(b.j)(a).then((function(t){0==t.code&&(localStorage.setItem("changeClass",e.state.classroomId),e.props.history.replace("/"))}))}else 3==t&&e.props.history.replace("/")},onCancel:function(){}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.courseId,s=t.classroomId,n=t.catalogId,c=t.classStatus,o=this.props.changeBtn;return S.a.createElement("div",null,this.props.goBackVis?"":S.a.createElement("p",{onClick:this.goBack.bind(this)},S.a.createElement("i",{className:"iconfont"},"\ue6ba"),"\u8fd4\u56de"),o?S.a.createElement("div",null," ",S.a.createElement(i.a,{overlay:S.a.createElement(u.a,null,S.a.createElement(u.a.Item,{key:"0",onClick:function(t){sessionStorage.setItem("stepId",0),e.goBack(),e.setState({classBtnContent:t.item.props.children,stepId:0},(function(){e.props.stepCut({stepId:0}),e.setState({stepId:0})}))}},"\u8bfe\u524d\u9884\u4e60"),S.a.createElement(u.a.Item,{key:"1",onClick:function(t){sessionStorage.setItem("stepId",1),e.goBack(),e.setState({classBtnContent:t.item.props.children,stepId:1},(function(){e.props.stepCut({stepId:1}),e.setState({stepId:1})}))}},"\u8bfe\u5802\u6559\u5b66"),S.a.createElement(u.a.Item,{key:"2",onClick:function(t){sessionStorage.setItem("stepId",2),e.goBack(),e.setState({classBtnContent:t.item.props.children,stepId:2},(function(){e.props.stepCut({stepId:2}),e.setState({stepId:2})}))}},"\u8bfe\u540e\u590d\u4e60")),trigger:["click"],placement:"topCenter",className:"class-dropdown"},S.a.createElement(l.a,null,0==sessionStorage.getItem("stepId")?"\u8bfe\u524d\u9884\u4e60":2==sessionStorage.getItem("stepId")?"\u8bfe\u540e\u590d\u4e60":"\u8bfe\u5802\u6559\u5b66",S.a.createElement(E.a,null))),S.a.createElement("p",{onClick:function(){e.finishClass()}},S.a.createElement("i",{className:"iconfont"},"\ue634"),3==c?"\u9000\u51fa":"\u4e0b\u8bfe"),S.a.createElement("p",{onClick:function(){var t={courseId:a,classroomId:s,catalogId:n};sessionStorage.setItem("coursewareBack","success"),sessionStorage.removeItem("prevIds"),e.props.history.replace("/teching/projection-screen/courseware?".concat(encodeURI(JSON.stringify(t))))}},S.a.createElement("i",{className:"iconfont"},"\ue75b"),"\u8bfe\u4ef6"),S.a.createElement("div",{className:"switch",title:"\u6253\u5f00/\u5173\u95ed\u4e92\u52a8\u5217\u8868",onClick:this.rightSwitch.bind(this)},S.a.createElement(k.a,null))):null,S.a.createElement("p",{style:{float:"right"},onClick:function(){window.location.reload(!0)}},S.a.createElement("i",{className:"iconfont"},"\ue6a7"),"\u5237\u65b0"))}}]),a}(v.Component))||s),N=c.a.create()(C);t.a=N},1785:function(e,t,a){"use strict";var s=a(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},c=a(238),o=function(e,t){return s.createElement(c.a,Object.assign({},e,{ref:t,icon:n}))};o.displayName="RightOutlined";t.a=s.forwardRef(o)},1791:function(e,t,a){"use strict";var s=a(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},c=a(238),o=function(e,t){return s.createElement(c.a,Object.assign({},e,{ref:t,icon:n}))};o.displayName="MenuUnfoldOutlined";t.a=s.forwardRef(o)},1794:function(e,t,a){"use strict";var s=a(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},c=a(238),o=function(e,t){return s.createElement(c.a,Object.assign({},e,{ref:t,icon:n}))};o.displayName="UpOutlined";t.a=s.forwardRef(o)},2196:function(e,t,a){},2716:function(e,t,a){"use strict";a.r(t);a(40);var s,n=a(5),c=a.n(n),o=(a(43),a(2)),i=a.n(o),r=(a(45),a(6)),l=a.n(r),d=(a(536),a(247)),u=a.n(d),m=(a(51),a(22)),p=a.n(m),h=(a(41),a(8)),I=a.n(h),g=(a(97),a(14)),f=a.n(g),v=(a(54),a(15)),S=a.n(v),y=a(9),E=a(12),k=a(11),b=a(10),w=a(0),C=a.n(w),N=(a(2196),a(35)),O=a(239),B=a(1776),j=a(1762),R=a(520),z=a.n(R)()(),T=Object(N.g)(s=function(e){Object(k.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(y.a)(this,a),(s=t.call(this,e)).state={concealRight:{width:"22.5%"},colW:18,switchStatus:!0,voteNum:3,voteType:"1",voteName:"\u6295\u7968",courseId:"",activityId:"",classroomId:"",leftStyle:{width:"82%"},rightStyle:{width:"18%"},stepId:sessionStorage.getItem("stepId")?sessionStorage.getItem("stepId"):1,catalogId:""},s}return Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.location.search.split("?")[1];if(e){var t=e.includes("%")?decodeURI(e):e,a=JSON.parse(t);this.setState({activityId:a.activityId,courseId:a.courseId,classroomId:a.classroomId,catalogId:a.catalogId})}}},{key:"rightSwitch",value:function(){this.state.switchStatus?this.setState({switchStatus:!1,leftStyle:{width:"100%"},rightStyle:{width:"0",minWidth:"0"}}):this.setState({switchStatus:!0,leftStyle:{width:"82%"},rightStyle:{width:"18%",minWidth:"300px"}})}},{key:"beganVote",value:function(){var e=this;this.props.form.validateFields((function(t,a){if(!t){var s=e.state,n=s.courseId,c=s.classroomId,o=s.catalogId,i={id:"",stepId:sessionStorage.stepId?sessionStorage.stepId:1,classroomId:c,courseId:n,activityType:4,activityName:a.activityName,activityDesc:"",ruleType:a.ruleType,ruleContent:a.ruleContent,catalogId:o,beginFlag:!0};Object(O.c)(i).then((function(t){if(t){S.a.success("\u6dfb\u52a0\u6210\u529f");var a={courseId:n,classroomId:c,catalogId:o,activityId:t};e.props.history.replace("/teching/projection-screen/vote-statistics?".concat(encodeURI(JSON.stringify(a))))}}))}}))}},{key:"goBack",value:function(){z.goBack(-1)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,s=a.voteName,n=a.voteType,o=a.voteNum,r=a.leftStyle,d=a.rightStyle;return C.a.createElement("div",{className:"interaction"},C.a.createElement(i.a,{className:"screen-left",style:r},C.a.createElement("div",{className:"screen-left-top"},"\u7b2c\u4e8c\u7ae0\u7b2c4\u8282\uff1a\u89c6\u9891\u8d28\u91cf\u63a7\u5236\u65b9\u6cd5"),C.a.createElement(c.a,{className:"class-vote"},C.a.createElement(i.a,null,C.a.createElement("p",null,"\u5c0f\u7ec4\u6295\u7968"),C.a.createElement(I.a,{labelCol:{span:3},wrapperCol:{span:21},labelAlign:"left"},C.a.createElement(I.a.Item,{name:"voteType",label:"\u6295\u7968\u7c7b\u578b"},t("ruleType",{initialValue:n,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6295\u7968\u7c7b\u578b"}]})(C.a.createElement(f.a.Group,{onChange:function(t){e.setState({voteType:t.target.value})}},C.a.createElement(f.a.Button,{value:"1"},"\u6b63\u786e/\u9519\u8bef"),C.a.createElement(f.a.Button,{value:"3"},"\u5355\u9009\u9898"),C.a.createElement(f.a.Button,{value:"4"},"\u591a\u9009\u9898"),C.a.createElement(f.a.Button,{value:"2"},"\u8d5e\u540c/\u53cd\u5bf9")))),C.a.createElement(I.a.Item,{name:"voteName",label:"\u6d3b\u52a8\u540d\u79f0"},t("activityName",{initialValue:s,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6d3b\u52a8\u540d\u79f0"}]})(C.a.createElement(p.a,{style:{width:350,background:"none",color:"rgba(255,255,255,0.8)"}}))),"4"==n||"3"==n?C.a.createElement(I.a.Item,{name:"voteNum",label:"\u9009\u62e9\u6570\u91cf"},t("ruleContent",{initialValue:o,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6570\u91cf\uff01"}]})(C.a.createElement(u.a,{min:0,style:{width:120,background:"none",color:"rgba(255,255,255,0.8)"},onChange:function(t){e.setState({voteNum:Number(t)})}}))):null),C.a.createElement("div",{className:"vote-main-bottom"},C.a.createElement(l.a,{onClick:this.goBack.bind(this)},"\u53d6\u6d88"),C.a.createElement(l.a,{onClick:this.beganVote.bind(this)},"\u5f00\u59cb")))),C.a.createElement("div",{className:"screen-left-bottom"},C.a.createElement(j.a,{refresh:function(){window.location.reload(!0)},open:this.rightSwitch.bind(this),stepCut:function(t){e.setState({stepId:t.stepId})}}))),C.a.createElement(i.a,{className:"interaction-right",style:d},C.a.createElement(B.a,{stepId:this.state.stepId})))}}]),a}(w.Component))||s,J=I.a.create()(T);t.default=J}}]);