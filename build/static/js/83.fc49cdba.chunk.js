(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[83],{1762:function(t,e,a){"use strict";a(41);var s,n=a(8),c=a.n(n),o=(a(317),a(206)),r=a.n(o),i=(a(45),a(6)),l=a.n(i),d=(a(276),a(83)),u=a.n(d),h=(a(67),a(28)),m=a.n(h),p=a(9),g=a(12),S=a(11),f=a(10),I=a(0),y=a.n(I),v=(a(1789),a(35)),k=a(1794),w=a(1791),E=a(239),N=a(520),C=(a.n(N)()(),Object(v.g)(s=function(t){Object(S.a)(a,t);var e=Object(f.a)(a);function a(t){var s;return Object(p.a)(this,a),(s=e.call(this,t)).getClassRoom=function(){var t=s.state,e=t.classroomId,a=t.stepId;Object(E.s)([e,a]).then((function(t){t&&s.setState({classStatus:t.classStatus})}))},s.state={switchStatus:!0,classBtnContent:0==sessionStorage.getItem("stepId")?"\u8bfe\u524d\u9884\u4e60":2==sessionStorage.getItem("stepId")?"\u8bfe\u540e\u590d\u4e60":"\u8bfe\u5802\u6559\u5b66",stepId:sessionStorage.getItem("stepId")?sessionStorage.getItem("stepId"):1,courseId:"",classroomId:"",catalogId:"",classStatus:""},s}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=this.props.location.search.split("?")[1];if(e){var a=e.includes("%")?decodeURI(e):e,s=JSON.parse(a);this.setState({courseId:s.courseId,classroomId:s.classroomId,catalogId:s.catalogId,pathname:s.pathname,id:s.id,homeworkId:s.homeworkId},(function(){t.getClassRoom()}))}}},{key:"rightSwitch",value:function(){this.props.open({isOpen:!0})}},{key:"goBack",value:function(){var t=this.state,e=t.catalogId,a=t.courseId,s=t.classroomId,n=t.pathname,c=t.id,o=t.homeworkId,r={courseId:a,classroomId:s,catalogId:e};if(sessionStorage.removeItem("coursewareBack"),n)return c&&(r.id=c),o&&(r.homeworkId=o),void this.props.history.replace("".concat(n,"?").concat(encodeURI(JSON.stringify(r))));this.props.history.replace("/teching/projection-screen?".concat(encodeURI(JSON.stringify(r))))}},{key:"finishClass",value:function(){var t=this,e=this.state.classStatus,a=3==e?"\u786e\u5b9a\u8981\u9000\u51fa\u5417\uff1f":"\u786e\u5b9a\u8981\u4e0b\u8bfe\u5417\uff1f";m.a.confirm({title:"\u63d0\u793a",content:a,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",className:"ModalConfirm border_none",onOk:function(){if(2==e){var a={id:t.state.classroomId,releaseStatus:2,over:9};Object(E.j)(a).then((function(e){0==e.code&&(localStorage.setItem("changeClass",t.state.classroomId),t.props.history.replace("/"))}))}else 3==e&&t.props.history.replace("/")},onCancel:function(){}})}},{key:"render",value:function(){var t=this,e=this.state,a=e.courseId,s=e.classroomId,n=e.catalogId,c=e.classStatus,o=this.props.changeBtn;return y.a.createElement("div",null,this.props.goBackVis?"":y.a.createElement("p",{onClick:this.goBack.bind(this)},y.a.createElement("i",{className:"iconfont"},"\ue6ba"),"\u8fd4\u56de"),o?y.a.createElement("div",null," ",y.a.createElement(r.a,{overlay:y.a.createElement(u.a,null,y.a.createElement(u.a.Item,{key:"0",onClick:function(e){sessionStorage.setItem("stepId",0),t.goBack(),t.setState({classBtnContent:e.item.props.children,stepId:0},(function(){t.props.stepCut({stepId:0}),t.setState({stepId:0})}))}},"\u8bfe\u524d\u9884\u4e60"),y.a.createElement(u.a.Item,{key:"1",onClick:function(e){sessionStorage.setItem("stepId",1),t.goBack(),t.setState({classBtnContent:e.item.props.children,stepId:1},(function(){t.props.stepCut({stepId:1}),t.setState({stepId:1})}))}},"\u8bfe\u5802\u6559\u5b66"),y.a.createElement(u.a.Item,{key:"2",onClick:function(e){sessionStorage.setItem("stepId",2),t.goBack(),t.setState({classBtnContent:e.item.props.children,stepId:2},(function(){t.props.stepCut({stepId:2}),t.setState({stepId:2})}))}},"\u8bfe\u540e\u590d\u4e60")),trigger:["click"],placement:"topCenter",className:"class-dropdown"},y.a.createElement(l.a,null,0==sessionStorage.getItem("stepId")?"\u8bfe\u524d\u9884\u4e60":2==sessionStorage.getItem("stepId")?"\u8bfe\u540e\u590d\u4e60":"\u8bfe\u5802\u6559\u5b66",y.a.createElement(k.a,null))),y.a.createElement("p",{onClick:function(){t.finishClass()}},y.a.createElement("i",{className:"iconfont"},"\ue634"),3==c?"\u9000\u51fa":"\u4e0b\u8bfe"),y.a.createElement("p",{onClick:function(){var e={courseId:a,classroomId:s,catalogId:n};sessionStorage.setItem("coursewareBack","success"),sessionStorage.removeItem("prevIds"),t.props.history.replace("/teching/projection-screen/courseware?".concat(encodeURI(JSON.stringify(e))))}},y.a.createElement("i",{className:"iconfont"},"\ue75b"),"\u8bfe\u4ef6"),y.a.createElement("div",{className:"switch",title:"\u6253\u5f00/\u5173\u95ed\u4e92\u52a8\u5217\u8868",onClick:this.rightSwitch.bind(this)},y.a.createElement(w.a,null))):null,y.a.createElement("p",{style:{float:"right"},onClick:function(){window.location.reload(!0)}},y.a.createElement("i",{className:"iconfont"},"\ue6a7"),"\u5237\u65b0"))}}]),a}(I.Component))||s),b=c.a.create()(C);e.a=b},1785:function(t,e,a){"use strict";var s=a(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},c=a(238),o=function(t,e){return s.createElement(c.a,Object.assign({},t,{ref:e,icon:n}))};o.displayName="RightOutlined";e.a=s.forwardRef(o)},1791:function(t,e,a){"use strict";var s=a(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},c=a(238),o=function(t,e){return s.createElement(c.a,Object.assign({},t,{ref:e,icon:n}))};o.displayName="MenuUnfoldOutlined";e.a=s.forwardRef(o)},1794:function(t,e,a){"use strict";var s=a(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},c=a(238),o=function(t,e){return s.createElement(c.a,Object.assign({},t,{ref:e,icon:n}))};o.displayName="UpOutlined";e.a=s.forwardRef(o)},2192:function(t,e,a){},2714:function(t,e,a){"use strict";a.r(e);a(41);var s,n=a(8),c=a.n(n),o=(a(43),a(2)),r=a.n(o),i=(a(177),a(110)),l=a.n(i),d=a(3),u=a.n(d),h=a(7),m=a(9),p=a(12),g=a(11),S=a(10),f=(a(204),a(101)),I=a.n(f),y=(a(380),a(205)),v=a.n(y),k=a(0),w=a.n(k),E=(a(93),a(2192),a(35)),N=a(520),C=a.n(N),b=(a(1776),a(1762)),O=a(239),j=C()(),R=v.a.Column,z=I.a.TabPane,B=Object(E.g)(s=function(t){Object(g.a)(a,t);var e=Object(S.a)(a);function a(t){var s;return Object(m.a)(this,a),(s=e.call(this,t)).onShowSizeChange=function(t,e){e>=20?s.setState({scrollHeight:640}):s.setState({scrollHeight:0}),s.setState({pageNum:1,pageSize:e},(function(){s.getAlreadyStudyRecord(),s.getNotStudyRecord()}))},s.onPageNumChange=function(t,e){s.setState({pageNum:t},(function(){s.getAlreadyStudyRecord(),s.getNotStudyRecord()}))},s.state={backIsShow:!0,switchStatus:!0,stepId:sessionStorage.getItem("stepId")?sessionStorage.getItem("stepId"):1,leftStyle:{width:"100%"},rightStyle:{width:"18%"},resourceId:"",courseId:"",studentData:[],total:0,studyStatus:"1",hasStudy:0,notStudy:0,pageSize:10,pageNum:1,netFlag:!1,scrollHeight:0,title:""},s}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=this.props.location.search.split("?")[1],a=e.includes("%")?decodeURI(e):e,s=JSON.parse(a);this.setState({resourceId:s.resourceId,courseId:s.courseId,classroomId:s.classroomId,title:s.title},(function(){t.getNotStudyRecord(),t.getAlreadyStudyRecord(),t.setState({netFlag:!0})}))}},{key:"rightSwitch",value:function(){this.state.switchStatus?this.setState({switchStatus:!1,leftStyle:{width:"100%"},rightStyle:{width:"0",minWidth:"0"}}):this.setState({switchStatus:!0,leftStyle:{width:"82%"},rightStyle:{width:"18%",minWidth:"300px"}})}},{key:"getAlreadyStudyRecord",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e,a,s,n,c,o,r,i,l,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state,a=e.courseId,s=e.resourceId,n=e.pageNum,c=e.pageSize,o=e.classroomId,r={courseId:a,resourceId:s,pageNum:n,pageSize:c,classroomId:o},t.next=4,Object(O.m)(r);case 4:if(i=t.sent,l=i.data,i.data.length)for(d=0;d<l.length;d++)l[d].key=d+1,l[d].plan=l[d].studyProgressSum+"%";this.setState({studentData:l,total:i.total,hasStudy:i.startRow});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getNotStudyRecord",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e,a,s,n,c,o,r,i,l,d,h;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state,a=e.courseId,s=e.resourceId,n=e.pageNum,c=e.pageSize,o=e.netFlag,r=e.classroomId,i={courseId:a,resourceId:s,pageNum:n,pageSize:c,classroomId:r},t.next=4,Object(O.t)(i);case 4:if(l=t.sent,d=l.data,l.data.length)for(h=0;h<d.length;h++)d[h].key=h+1,d[h].plan=d[h].studyProgressSecond/d[h].studyProgressSum+"%",d[h].studyProgressSecond="---",d[h].plan="---";o?this.setState({studentData:d,total:l.total,notStudy:l.endRow}):this.setState({notStudy:l.endRow});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"studyStatusChange",value:function(t){var e=this;this.setState({studentData:[]},(function(){1==t?e.getAlreadyStudyRecord():2==t&&e.getNotStudyRecord()}))}},{key:"goBack",value:function(){j.goBack(-1)}},{key:"render",value:function(){var t=this,e=this.state,a=e.pageNum,s=e.pageSize,n=e.total,c=e.studentData,o=e.leftStyle,i=(e.rightStyle,e.studyStatus),d=e.hasStudy,u=e.notStudy,h=e.scrollHeight,m=e.title;return w.a.createElement("div",{className:"interaction statistics"},w.a.createElement(r.a,{className:"screen-left",style:o},w.a.createElement("div",{className:"screen-left-top"},m),w.a.createElement("div",{className:"screen-left-content"},w.a.createElement("div",null,w.a.createElement(I.a,{className:"statistics_tab",defaultActiveKey:i,onChange:this.studyStatusChange.bind(this)},w.a.createElement(z,{tab:"\u5df2\u5b66\u4e60\uff08".concat(d,"\uff09"),key:"1"}),w.a.createElement(z,{tab:"\u672a\u5b66\u4e60\uff08".concat(u,"\uff09"),key:"2"})),w.a.createElement("div",{className:"staristics_border"},w.a.createElement(v.a,{scroll:{y:h},className:"statistics_table",dataSource:c,pagination:!1},w.a.createElement(R,{title:"\u5e8f\u53f7",dataIndex:"key"}),w.a.createElement(R,{title:"\u59d3\u540d",dataIndex:"studentName"}),w.a.createElement(R,{title:"\u624b\u673a\u53f7",dataIndex:"telNum"}),w.a.createElement(R,{title:"\u5b66\u4e60\u65f6\u957f\uff08\u79d2\uff09",dataIndex:"studyProgressSecond"}),w.a.createElement(R,{title:"\u5b66\u4e60\u8fdb\u5ea6",dataIndex:"plan"})),c&&c.length?w.a.createElement("div",{className:"statistics-pagination"},w.a.createElement(l.a,{showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,onChange:this.onPageNumChange,defaultCurrent:1,current:a,pageSize:s,total:n,showTotal:function(t){return"\u5171 "+t+" \u6761"}})):""))),w.a.createElement("div",{className:"screen-left-bottom"},w.a.createElement(b.a,{refresh:function(){window.location.reload(!0)},open:this.rightSwitch.bind(this),stepCut:function(e){t.setState({stepId:e.stepId})}}))))}}]),a}(k.Component))||s,x=c.a.create()(B);e.default=x}}]);