(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[145],{2164:function(e,t,a){},2700:function(e,t,a){"use strict";a.r(t);a(41);var n,r=a(8),s=a.n(r),c=(a(109),a(72)),i=a.n(c),o=(a(177),a(110)),u=a.n(o),l=(a(74),a(17)),m=a.n(l),d=(a(97),a(14)),p=a.n(d),h=(a(135),a(73)),f=a.n(h),g=(a(40),a(5)),y=a.n(g),v=(a(45),a(6)),C=a.n(v),b=(a(43),a(2)),k=a.n(b),E=a(3),S=a.n(E),N=a(7),O=a(20),x=(a(54),a(15)),L=a.n(x),T=a(9),D=a(12),j=a(52),w=a(11),z=a(10),I=(a(67),a(28)),M=a.n(I),V=(a(51),a(22)),P=a.n(V),A=(a(178),a(82)),Y=a.n(A),_=a(0),B=a.n(_),F=(a(2164),a(27)),R=a(182),q=a(39),G=a(93),J=a(136),K=a(245),$=a(35),H=a(243),Q=Y.a.TreeNode,U=P.a.Search,W=M.a.confirm,X=Object($.g)(n=function(e){Object(w.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(T.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={userId:"",typeList:[],examList:[],bookId:"",activeKey:"1",total:0,pageNum:1,pageSize:10,orderAscfield:"",orderDescfield:"a.create_time",resourceId:"",regionCheck:"",typeId:"",size:"small",stageId:"",addTestModal:!1,isObligation:!0,isOrdinary:!1,examYearCheck:"",selectType:"",examYearList:[],stageData:[],btnListData:["1","2"],testListData:["1","2"],gapListListData:["1"],classifyListData:["1"],testDiff:[],region:[],sortSet:{value:"zh",zhOrder:!0,syOrder:!0,scOrder:!0},skipCourseModal:!1,courseDetail:{},resourceProvince:"",resourceCity:"",resourceCounty:"",provinceData:[],cityData:[],countyData:[],addressVisible:!1,resourceProvinceName:"",resourceCityName:"",resourceCountyName:"",searchValue:void 0},e.onProvinceChange=function(t,a){var n=t.target.value,r=""===n?"":n.value,s=""===n?"":n.title;e.setState({resourceProvince:r,resourceCity:"",resourceCounty:"",resourceProvinceName:s,resourceCityName:"",resourceCountyName:"",cityData:[],countyData:[]},(function(){e.getExamList(),Object(F.w)({parentCode:r}).then((function(t){r?e.setState({cityData:t}):e.setState({addressVisible:!1})}))}))},e.onCityChange=function(t,a){var n=t.target.value,r=""===n?"":n.value,s=""===n?"":n.title;e.setState({resourceCity:r,resourceCounty:"",resourceCityName:s,resourceCountyName:"",countyData:[]},(function(){e.getExamList(),Object(F.w)({parentCode:r}).then((function(t){r?e.setState({countyData:t}):e.setState({addressVisible:!1})}))}))},e.onCountyChange=function(t,a){var n=t.target.value,r=""===n?"":n.value,s=""===n?"":n.title;e.setState({resourceCounty:r,resourceCountyName:s,addressVisible:!1},(function(){return e.getExamList()}))},e.deleteOne=function(t){var a=Object(j.a)(e);M.a.confirm({title:"\u63d0\u793a",content:"\u5220\u9664\u540e\uff0c\u6240\u6709\u7528\u6237\u5c06\u4e0d\u80fd\u7ee7\u7eed\u4f7f\u7528\u8be5\u8bd5\u5377\uff0c\u7ee7\u7eed\u5220\u9664\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){Object(R.d)({id:t}).then((function(e){0===e.code&&(L.a.success("\u5220\u9664\u6210\u529f!"),a.getExamList())}))},onCancel:function(){}})},e.regionChange=function(t){e.setState({regionCheck:t.target.value},(function(){e.getExamList()}))},e.testFormChange=function(t){var a=t.target.value;a&&"\u66f4\u65e9"===a.key?e.setState({examYearCheck:a.value,selectType:1},(function(){e.getExamList()})):e.setState({examYearCheck:a.value,selectType:0},(function(){e.getExamList()}))},e.addTestModal=function(t){e.setState({resourceId:t,addTestModal:!0})},e.addTestCancel=function(){e.setState({addTestModal:!1})},e.courseTestSave=function(){e.AddTestForm.props.form.validateFields((function(t,a){if(!t){var n=e.state.resourceId,r=e.AddTestForm.getItemsValue();e.setState({courseDetail:r.course}),Object(q.h)({resourceId:n,stepId:r.stepId,courseId:r.courseId}).then((function(t){e.setState({addTestModal:!1,skipCourseModal:!0},(function(){setTimeout((function(){e.skipCourseRef.init()}),100)}))}))}}))},e.zhClick=function(){var t=e.state.sortSet;"zh"===t.value?(t.zhOrder=!t.zhOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.zhOrder,"a.id")}))):e.setState({sortSet:Object(O.a)(Object(O.a)({},t),{},{zhOrder:!0,value:"zh"})},(function(){e.testOrderChange(t.zhOrder,"a.id")}))},e.syClick=function(){var t=e.state.sortSet;"sy"===t.value?(t.syOrder=!t.syOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.syOrder,"d.used_num")}))):e.setState({sortSet:Object(O.a)(Object(O.a)({},t),{},{syOrder:!0,value:"sy"})},(function(){e.testOrderChange(t.syOrder,"d.used_num")}))},e.scClick=function(){var t=e.state.sortSet;"sc"===t.value?(t.scOrder=!t.scOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.scOrder,"d.collect_num")}))):e.setState({sortSet:Object(O.a)(Object(O.a)({},t),{},{scOrder:!0,value:"sc"})},(function(){e.testOrderChange(t.scOrder,"d.collect_num")}))},e.testOrderChange=function(t,a){t?e.setState({orderAscfield:a,orderDescfield:""},(function(){e.getExamList()})):e.setState({orderAscfield:"",orderDescfield:a},(function(){e.getExamList()}))},e.renderTreeNodes=function(t){return t.map((function(t){return t.examTypeList?B.a.createElement(Q,{title:t.typeName,key:t.id,value:t.id,dataRef:t},e.renderTreeNodes(t.examTypeList)):B.a.createElement(Q,Object.assign({title:t.typeName,key:t.id,value:t.id},t))}))},e.onPageNumChange=function(t,a){e.setState({pageNum:t},(function(){e.getExamList()}))},e.resourceNameSearch=function(t){e.setState({pageNum:1,resourceName:t.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getExamList()}))},e.searchChange=function(t){e.setState({searchValue:t.target.value},(function(){e.setState({pageNum:1,resourceName:e.state.searchValue.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getExamList()}))}))},e.onShowSizeChange=function(t,a){e.setState({pageNum:1,pageSize:a},(function(){e.getExamList()}))},e.bookChange=function(t){e.setState({stageId:t},(function(){e.getTypeList()}))},e.onSelect=function(t,a){"1"===t[0]?e.setState({typeId:""},(function(){e.getExamList()})):e.setState({typeId:t[0]},(function(){e.getExamList()}))},e.addressVisibleChange=function(t){e.setState({addressVisible:t})},e.linkToGroup=function(t){var a=Object(j.a)(e),n=e.props.match.params.id;Object(F.n)({id:"b42a9e0b82a8e5f3075395d8105bb7e5"}).then((function(e){e.usedNum>0?W({title:"\u8b66\u544a",content:"\u8be5\u8bd5\u5377\u5df2\u7ecf\u88ab\u4f7f\u7528\u8fc7\u4e0d\u80fd\u8fdb\u884c\u4fee\u6539,\u53ef\u4ee5\u590d\u5236\u5230\u8bd5\u9898\u7bee\u8fdb\u884c\u7f16\u8f91\u5e76\u91cd\u65b0\u751f\u6210\u4e00\u5957\u65b0\u8bd5\u5377\uff0c\u662f\u5426\u7ee7\u7eed\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){Object(R.c)("").then((function(e){L.a.success("\u590d\u5236\u8bd5\u5377\u6210\u529f\u6b63\u5728\u8df3\u8f6c...");var t={subjectId:a.state.examDetail.subjectId,stageId:a.state.examDetail.stageId};a.props.history.push({pathname:"/teching/group-centers/1/0",search:JSON.stringify(t)})}))},onCancel:function(){}}):(n="6b31d003b94a9a3b3943b3523d14057d",a.props.history.push("/teching/group-centers/"+n+"/1"))}))},e}return Object(D.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getExamYearList(5),this.setState({userId:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).user.id:""},(function(){e.getDicList()})),this.getExamList(),this.getTypeList(),this.getProvince()}},{key:"getProvince",value:function(){var e=Object(N.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.w)();case 2:(t=e.sent)&&t.length>0&&this.setState({provinceData:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getExamList",value:function(){var e=Object(N.a)(S.a.mark((function e(){var t,a,n,r,s,c,i,o,u,l,m,d,p,h,f;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.pageNum,n=t.pageSize,t.regionCheck,r=t.examYearCheck,s=t.selectType,c=t.typeId,i=t.orderAscfield,o=t.orderDescfield,u=t.resourceProvince,l=t.resourceCity,m=t.resourceCounty,d=t.searchValue,p=t.resourceName,h={pageNum:a,pageSize:n,examYear:r,examTypeId:c,selectType:s,orderAscfield:i,orderDescfield:o,resourceProvince:u,resourceCity:l,resourceCounty:m,searchValue:d,resourceName:p},e.next=4,Object(R.h)(h);case 4:f=e.sent,this.setState({examList:f.data,total:f.total});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSubCanton",value:function(){var e=Object(N.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.w)(t);case 2:a=e.sent,this.setState({region:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDicList",value:function(){var e=Object(N.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.u)({});case 2:t=e.sent,this.setState({stageData:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getExamYearList",value:function(e){for(var t=(new Date).getFullYear(),a=[],n=0;n<e;n++){var r={value:t-n};r.key=n===e-1?"\u66f4\u65e9":t-n,a.push(r)}this.setState({examYearList:a})}},{key:"getTypeList",value:function(){var e=Object(N.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.k)({});case 2:t=e.sent,this.setState({typeList:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"linkToDetails",value:function(){var e=Object(N.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.id,this.props.history.push("/teching/test-detail/"+a);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"closeSkipCourseModel",value:function(){this.setState({skipCourseModal:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.typeList,r=(t.activeKey,t.total),s=(t.stageData,t.pageNum),c=t.pageSize,o=t.examList,l=(t.examYearList,t.addTestModal),d=t.sortSet,h=(t.region,t.skipCourseModal),g=t.courseDetail,v=(t.addressVisible,t.provinceData),b=t.cityData,E=t.countyData,S=(t.resourceProvinceName,t.resourceCityName,t.resourceCountyName,t.searchValue),N=this.state.examList.map((function(t,n){return B.a.createElement(f.a,{key:n,title:B.a.createElement("div",{onClick:function(){return e.linkToDetails(t)}},t.title),bordered:!1},B.a.createElement(y.a,{type:"flex",justify:"space-around",className:"question-container"},B.a.createElement(k.a,{span:12,className:"question-bottom"},B.a.createElement("img",{className:"user-img",src:a(947),alt:""}),B.a.createElement("div",{className:"question-bottom-left"},B.a.createElement("p",{className:"user-name"},B.a.createElement("span",null,t.humanName),t.unitName),B.a.createElement("div",{className:"question-bottom-doc"},B.a.createElement("span",null,"\u6536\u5f55\u4e8e\uff1a",t.createTime),B.a.createElement("span",null,"\u4f7f\u7528\uff1a",t.usedNum),B.a.createElement("span",null,"\u6536\u85cf\uff1a",t.collectNum),B.a.createElement("span",null,"\u9898\u91cf\uff1a",t.testNum)))),B.a.createElement(k.a,{span:12,className:"question-bottom-right"},B.a.createElement(C.a,{style:{marginRight:"10"},onClick:function(){return e.linkToGroup(t.resourceId)}},"\u7f16\u8f91"),B.a.createElement(C.a,{style:{marginLeft:"15"},onClick:function(){return e.deleteOne(t.resourceId)}},"\u5220\u9664"))))})),O=this.state.classifyListData.map((function(t,a){return B.a.createElement("div",{key:a},n&&n.length>0?B.a.createElement(Y.a,{onSelect:e.onSelect,onCheck:e.onCheck},B.a.createElement(Q,{className:"tree-all-btn",title:"\u5168\u90e8",key:"1"}),e.renderTreeNodes(n)):"")}));p.a.Group,this.onProvinceChange.bind(this),p.a.Button,v.map((function(e,t){return B.a.createElement(p.a.Button,{key:e.value,value:e},e.title)})),b&&b.length>0&&(p.a.Group,this.onCityChange.bind(this),p.a.Button,b.map((function(e,t){return B.a.createElement(p.a.Button,{key:e.value,value:e},e.title)}))),E&&E.length>0&&(p.a.Group,this.onCountyChange.bind(this),p.a.Button,E.map((function(e,t){return B.a.createElement(p.a.Button,{key:e.value,value:e},e.title)})));return B.a.createElement("div",{className:"stage-test teach-main"},B.a.createElement("div",{className:"text-library-boxs teach-main-box"},B.a.createElement(G.a,{navName:"test-library"}),B.a.createElement("div",{className:"library-main teach-main-cont"},B.a.createElement(y.a,{className:"retrieval-wrap"},B.a.createElement(K.a,{navName:"stage-test"})),B.a.createElement(y.a,{gutter:16},B.a.createElement(k.a,{span:6},B.a.createElement("div",{className:"tree-left"},O)),B.a.createElement(k.a,{span:18,className:"paper-right-top"},B.a.createElement("div",{className:"paper-right-menu"},B.a.createElement(y.a,{className:"paper-common",gutter:16},B.a.createElement(k.a,{span:2,className:"paper-year"},"\u6392\u5e8f"),B.a.createElement(k.a,{span:22,className:"paper-common-btn"},B.a.createElement(C.a,{type:"zh"===d.value?"primary":"",onClick:function(){return e.zhClick()}},"\u521b\u5efa\u65f6\u95f4","zh"===d.value?B.a.createElement(m.a,{type:d.zhOrder?"up":"down"}):""),B.a.createElement(C.a,{type:"sy"===d.value?"primary":"",onClick:function(){return e.syClick()}},"\u5f15\u7528\u91cf","sy"===d.value?B.a.createElement(m.a,{type:d.syOrder?"up":"down"}):""),B.a.createElement(C.a,{type:"sc"===d.value?"primary":"",onClick:function(){return e.scClick()}},"\u6536\u85cf\u91cf","sc"===d.value?B.a.createElement(m.a,{type:d.scOrder?"up":"down"}):"")))),B.a.createElement(y.a,{span:24,className:"res-search-box"},B.a.createElement(k.a,{span:10,className:"res-btn"},B.a.createElement(U,{placeholder:"\u8bf7\u8f93\u5165\u8bd5\u5377\u540d\u79f0",value:S,onSearch:function(t){return e.resourceNameSearch(t)},onChange:this.searchChange})),B.a.createElement(k.a,{span:14},B.a.createElement("div",{className:"paper-all"},"\u5171\u8ba1",B.a.createElement("span",{className:"paper-number"},r),"\u9053\u76f8\u5173\u8bd5\u9898"))),B.a.createElement("div",{className:"paper-right-bottom"},o&&o.length>0?B.a.createElement("div",null,N,B.a.createElement("div",{style:{textAlign:"right",marginTop:10}},B.a.createElement(u.a,{showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,onChange:this.onPageNumChange,defaultCurrent:1,current:s,pageSize:c,total:r,showTotal:function(e){return"\u5171 "+e+" \u6761"}}))):B.a.createElement(i.a,null))))),B.a.createElement(M.a,{className:"modal-btn",visible:l,title:"\u6dfb\u52a0\u5230\u6211\u7684\u8bfe\u7a0b",onOk:this.handleAccredit,onCancel:this.addTestCancel,keyboard:!1,maskClosable:!1,footer:[B.a.createElement(C.a,{key:"back",onClick:this.addTestCancel},"\u8fd4\u56de"),B.a.createElement(C.a,{key:"submit",type:"primary",onClick:this.courseTestSave},"\u786e\u8ba4")]},B.a.createElement(J.default,{wrappedComponentRef:function(t){e.AddTestForm=t}})),B.a.createElement(M.a,{className:"modal-btn skip-coures-modal",visible:h,onCancel:function(){return e.setState({skipCourseModal:!1})},footer:null,keyboard:!1,maskClosable:!1},B.a.createElement(H.a,{courseDetail:g,closeModel:this.closeSkipCourseModel.bind(this),onRef:function(t){return e.skipCourseRef=t}}))))}}]),n}(_.Component))||n,Z=s.a.create()(X);t.default=Z}}]);