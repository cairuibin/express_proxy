(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[143],{2144:function(e,t,a){},2694:function(e,t,a){"use strict";a.r(t);a(41);var r,n=a(8),s=a.n(n),c=(a(67),a(28)),i=a.n(c),o=(a(109),a(72)),u=a.n(o),l=(a(177),a(110)),d=a.n(l),m=(a(135),a(73)),p=a.n(m),h=(a(40),a(5)),f=a.n(h),y=(a(74),a(17)),g=a.n(y),v=(a(45),a(6)),S=a.n(v),C=(a(43),a(2)),b=a.n(C),E=a(20),k=a(3),N=a.n(k),O=a(7),x=a(9),I=a(12),T=a(52),L=a(11),w=a(10),D=(a(51),a(22)),j=a.n(D),z=(a(178),a(82)),M=a.n(z),V=a(0),J=a.n(V),R=(a(2144),a(181)),A=a(27),P=a(182),_=a(39),Y=a(240),q=a(93),F=a(136),B=a(245),U=a(35),K=a(243),$=M.a.TreeNode,G=j.a.Search,H=Object(U.g)(r=function(e){Object(L.a)(r,e);var t=Object(w.a)(r);function r(){var e;Object(x.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={userId:"",typeList:[],examList:[],bookId:"",activeKey:"1",total:0,pageNum:1,pageSize:10,orderAscfield:"",orderDescfield:"a.create_time",resourceId:"",regionCheck:"",typeId:"",size:"small",stageId:"",addTestModal:!1,isObligation:!0,isOrdinary:!1,examYearCheck:"",selectType:"",examYearList:[],stageData:[],btnListData:["1","2"],testListData:["1","2"],gapListListData:["1"],classifyListData:["1"],testDiff:[],region:[],sortSet:{value:"zh",zhOrder:!0,syOrder:!0,scOrder:!0},skipCourseModal:!1,courseDetail:{},resourceProvince:"",resourceCity:"",resourceCounty:"",provinceData:[],cityData:[],countyData:[],addressVisible:!1,resourceProvinceName:"",resourceCityName:"",resourceCountyName:"",searchValue:void 0,selectTab:4,typeValue:"",historyType:"",whetherClick:!0},e.onProvinceChange=function(t,a){var r=t.target.value,n=""===r?"":r.value,s=""===r?"":r.title;e.setState({resourceProvince:n,resourceCity:"",resourceCounty:"",resourceProvinceName:s,resourceCityName:"",resourceCountyName:"",cityData:[],countyData:[]},(function(){e.getExamList(),Object(A.w)({parentCode:n}).then((function(t){n?e.setState({cityData:t}):e.setState({addressVisible:!1})}))}))},e.onCityChange=function(t,a){var r=t.target.value,n=""===r?"":r.value,s=""===r?"":r.title;e.setState({resourceCity:n,resourceCounty:"",resourceCityName:s,resourceCountyName:"",countyData:[]},(function(){e.getExamList(),Object(A.w)({parentCode:n}).then((function(t){n?e.setState({countyData:t}):e.setState({addressVisible:!1})}))}))},e.onCountyChange=function(t,a){var r=t.target.value,n=""===r?"":r.value,s=""===r?"":r.title;e.setState({resourceCounty:n,resourceCountyName:s,addressVisible:!1},(function(){return e.getExamList()}))},e.resourceNameSearch=function(t){e.setState({pageNum:1,resourceName:t.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getExamList()}))},e.searchChange=function(t){e.setState({searchValue:t.target.value},(function(){e.setState({pageNum:1,resourceName:e.state.searchValue.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getExamList()}))}))},e.collectChange=function(){var t=Object(O.a)(N.a.mark((function t(a){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.whetherClick){t.next=7;break}return e.setState({whetherClick:!1}),t.next=4,Object(R.a)({userId:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).user.id:"",resourceId:a});case 4:r=Object(T.a)(e),setTimeout((function(){r.setState({whetherClick:!0})}),100),e.getExamList();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.regionChange=function(t){e.setState({regionCheck:t.target.value},(function(){e.getExamList()}))},e.testFormChange=function(t){var a=t.target.value;a&&"\u66f4\u65e9"===a.key?e.setState({examYearCheck:a.value,selectType:1},(function(){e.getExamList()})):e.setState({examYearCheck:a.value,selectType:0},(function(){e.getExamList()}))},e.addTestModal=function(t){e.setState({resourceId:t,addTestModal:!0})},e.addTestCancel=function(){e.setState({addTestModal:!1})},e.courseTestSave=function(){e.AddTestForm.props.form.validateFields((function(t,a){if(!t){var r=e.state.resourceId,n=e.AddTestForm.getItemsValue();e.setState({courseDetail:n.course}),Object(_.h)({resourceId:r,stepId:n.stepId,courseId:n.courseId}).then((function(t){e.setState({addTestModal:!1,skipCourseModal:!0},(function(){setTimeout((function(){e.skipCourseRef.init()}),100)}))}))}}))},e.zhClick=function(){var t=e.state.sortSet;"zh"===t.value?(t.zhOrder=!t.zhOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.zhOrder,"a.create_time")}))):e.setState({sortSet:Object(E.a)(Object(E.a)({},t),{},{zhOrder:!0,value:"zh"})},(function(){e.testOrderChange(t.zhOrder,"a.create_time")}))},e.syClick=function(){var t=e.state.sortSet;"sy"===t.value?(t.syOrder=!t.syOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.syOrder,"d.used_num")}))):e.setState({sortSet:Object(E.a)(Object(E.a)({},t),{},{syOrder:!0,value:"sy"})},(function(){e.testOrderChange(t.syOrder,"d.used_num")}))},e.scClick=function(){var t=e.state.sortSet;"sc"===t.value?(t.scOrder=!t.scOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.scOrder,"d.collect_num")}))):e.setState({sortSet:Object(E.a)(Object(E.a)({},t),{},{scOrder:!0,value:"sc"})},(function(){e.testOrderChange(t.scOrder,"d.collect_num")}))},e.testOrderChange=function(t,a){t?e.setState({orderAscfield:"",orderDescfield:a},(function(){e.getExamList()})):e.setState({orderAscfield:a,orderDescfield:""},(function(){e.getExamList()}))},e.renderTreeNodes=function(t){return t.map((function(t){return t.examTypeList?J.a.createElement($,{title:t.typeName,key:t.id,value:JSON.stringify(t),dataRef:t},e.renderTreeNodes(t.examTypeList)):J.a.createElement($,Object.assign({title:t.typeName,key:t.id,value:JSON.stringify(t)},t))}))},e.onPageNumChange=function(t,a){e.setState({pageNum:t},(function(){e.getExamList()}))},e.onShowSizeChange=function(t,a){e.setState({pageNum:1,pageSize:a},(function(){e.getExamList()}))},e.bookChange=function(t){e.setState({stageId:t,bookId:t},(function(){e.getTypeList()}))},e.onSelect=function(t,a){"1"===t[0]?e.setState({typeId:""},(function(){e.getExamList()})):e.setState({typeId:t[0],typeValue:a.node.props.value},(function(){e.getExamList()}))},e.addressVisibleChange=function(t){e.setState({addressVisible:t})},e.changeSelect=function(t){var a=e.props.location.search.split("?")[1],r=a.includes("%")?decodeURI(a):a,n=JSON.parse(r);n.paperId=t.id,n.paperName=t.subjectName+">"+t.title,n.selectType=!0,"curDetailBusy"==n.backType||"questionBank"==n.backType?n.url="/teaching/my-course/my-curriculum-detail":n.url="/teaching/my-course/course-directory";var s=sessionStorage.addBusyBack?"replace":"push";e.props.history[s]("/teaching/my-course/add-busy?".concat(encodeURI(JSON.stringify(n))))},e}return Object(I.a)(r,[{key:"componentDidMount",value:function(){this.getExamYearList(5);var e,t,a=this.props.location.search,r="";a&&(t=(e=a.split("?")[1]).includes("%")?decodeURI(e):e,r=JSON.parse(t).xzType),this.setState({userId:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).user.id:"",historyType:r},(function(){})),this.getExamList()}},{key:"getProvince",value:function(){var e=Object(O.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.w)();case 2:(t=e.sent)&&t.length>0&&this.setState({provinceData:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getExamList",value:function(){var e=Object(O.a)(N.a.mark((function e(){var t,a,r,n,s,c,i,o,u,l,d,m,p,h;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.pageNum,r=t.pageSize,n=t.keys,s=t.selectTab,c=t.typeValue,i=t.orderAscfield,o=t.orderDescfield,u=t.searchValue,t.resourceName,t.stageId,l=c?JSON.parse(c):"",d=l.level,m=l.id,p={pageNum:a,pageSize:r,orderAscfield:i,orderDescfield:o,courseExamName:u,level:d,examTypeId:m||n,selectTab:s},e.next=5,Object(P.h)(p);case 5:h=e.sent,this.setState({examList:h.data,total:h.total});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSubCanton",value:function(){var e=Object(O.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.w)(t);case 2:a=e.sent,this.setState({region:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDicList",value:function(){var e=Object(O.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.u)({});case 2:t=e.sent,this.setState({stageData:t,stageId:t&&t.length?t[0].stageId:""},(function(){}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getExamYearList",value:function(e){for(var t=(new Date).getFullYear(),a=[],r=0;r<e;r++){var n={value:t-r};n.key=r===e-1?"\u66f4\u65e9":t-r,a.push(n)}this.setState({examYearList:a})}},{key:"getTypeList",value:function(){var e=Object(O.a)(N.a.mark((function e(){var t,a=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.i)({stageId:this.state.stageId});case 2:t=e.sent,this.setState({typeList:t},(function(){a.getExamList()}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"linkToDetails",value:function(){var e=Object(O.a)(N.a.mark((function e(t,a){var r,n,s,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.id,a.stopPropagation(),0===window.getSelection().toString().length&&("xz"==this.state.historyType?(n=this.props.location.search,s=n.split("?")[1],c=s.includes("%")?decodeURI(s):s,JSON.parse(c),this.props.history.push("/teching/test-detail/complete-test:".concat(r,"?").concat(s))):this.props.history.push("/teching/test-detail/complete-test:"+r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"closeSkipCourseModel",value:function(){this.setState({skipCourseModal:!1})}},{key:"render",value:function(){var e=this,t=this.state,r=(t.typeList,t.total),n=(t.stageData,t.pageNum),s=t.pageSize,c=t.examList,o=t.addTestModal,l=t.sortSet,m=t.skipCourseModal,h=t.courseDetail,y=(t.provinceData,t.cityData,t.countyData,t.searchValue),v=(t.stageId,t.historyType),C=this.state.examList.map((function(t,r){return J.a.createElement(p.a,{key:r,title:J.a.createElement("div",{onClick:function(a){return e.linkToDetails(t,a)}},"  ",J.a.createElement("img",{style:{marginRight:12},src:a(939),alt:""}),t.title),bordered:!1},J.a.createElement(f.a,{type:"flex",justify:"space-around",className:"question-container"},J.a.createElement(b.a,{span:18,className:"question-bottom"},J.a.createElement("div",{className:"question-bottom-left"},J.a.createElement("div",{className:"question-bottom-doc"},J.a.createElement("span",null,"\u521b\u5efa\u65f6\u95f4\uff1a",t.createTime),J.a.createElement("span",null,"\u5f15\u7528\uff1a",t.usedNum),J.a.createElement("span",null,"\u9898\u91cf\uff1a",t.testNum),J.a.createElement("span",null,"\u6536\u85cf\uff1a",t.collectNum),J.a.createElement("span",null,"\u6240\u5c5e\u8bfe\u7a0b\uff1a",t.subjectName),J.a.createElement("span",null,"|"),J.a.createElement("span",null,"\u6765\u6e90\uff1a",t.humanName,"\xa0\xa0\xa0",t.unitName)))),J.a.createElement(b.a,{span:6,className:"question-bottom-right"},"xz"==v?J.a.createElement(S.a,{style:{marginRight:"10"},onClick:function(){return e.changeSelect(t)}},"\u9009\u62e9"):0===t.isCollect?J.a.createElement(S.a,{style:{marginLeft:"15"},onClick:function(){return e.collectChange(t.resourceId)}},J.a.createElement(g.a,{type:"heart",theme:"filled"}),"\u6536\u85cf"):J.a.createElement(S.a,{className:"cancel-collection",style:{marginLeft:"15"},onClick:function(){return e.collectChange(t.resourceId)}},J.a.createElement(g.a,{type:"heart",theme:"filled"}),"\u53d6\u6d88\u6536\u85cf"))))}));return J.a.createElement("div",{className:"text-library-content teach-main"},J.a.createElement("div",{className:"text-library-boxs teach-main-box"},"xz"==v?J.a.createElement(Y.a,null):J.a.createElement(q.a,{navName:"test-library"}),J.a.createElement("div",{className:"library-main teach-main-cont"},J.a.createElement(f.a,{className:"complete-title"},J.a.createElement(b.a,{span:24},J.a.createElement("span",null,"\u8bd5\u5377\u5e93"),J.a.createElement(B.a,{defaultKeys:"4"}))),J.a.createElement(f.a,{gutter:16},J.a.createElement(b.a,{className:"paper-right-top paper-right-top-lh"},J.a.createElement("div",{className:"paper-right-bottom"},J.a.createElement("div",{className:"top-wrap"},J.a.createElement("div",{className:"paper-common-btn"},J.a.createElement(S.a,{type:"zh"===l.value?"primary":"",onClick:function(){return e.zhClick()}},"\u521b\u5efa\u65f6\u95f4","zh"===l.value?J.a.createElement(g.a,{type:l.zhOrder?"down":"up"}):""),J.a.createElement(S.a,{type:"sy"===l.value?"primary":"",onClick:function(){return e.syClick()}},"\u5f15\u7528\u91cf","sy"===l.value?J.a.createElement(g.a,{type:l.syOrder?"down":"up"}):""),J.a.createElement(S.a,{type:"sc"===l.value?"primary":"",onClick:function(){return e.scClick()}},"\u6536\u85cf\u91cf","sc"===l.value?J.a.createElement(g.a,{type:l.scOrder?"down":"up"}):"")),J.a.createElement("div",{className:"res-search-box"},J.a.createElement("div",{className:"res-btn"},J.a.createElement(G,{placeholder:"\u8bf7\u8f93\u5165\u8bd5\u5377\u540d\u79f0",value:y,onSearch:function(t){return e.resourceNameSearch(t)},onChange:this.searchChange})),J.a.createElement("div",null,J.a.createElement("div",{className:"paper-all"},"\u5171\u8ba1",J.a.createElement("span",{className:"paper-number"},r),"\u5957\u8bd5\u5377")))),c&&c.length>0?J.a.createElement("div",null,C,r?J.a.createElement("div",{className:"pagination-style-l"},J.a.createElement(d.a,{showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,onChange:this.onPageNumChange,defaultCurrent:1,current:n,pageSize:s,total:r,showTotal:function(e){return"\u5171 "+e+" \u6761"}})):""):J.a.createElement(u.a,{className:"empty-l"}))))),J.a.createElement(i.a,{className:"modal-btn skip-coures-modal",visible:m,onCancel:function(){return e.setState({skipCourseModal:!1})},footer:null,keyboard:!1,maskClosable:!1},J.a.createElement(K.a,{courseDetail:h,closeModel:this.closeSkipCourseModel.bind(this),onRef:function(t){return e.skipCourseRef=t}})),J.a.createElement(i.a,{className:"modal-btn",visible:o,title:"\u52a0\u5165\u6211\u7684\u5377\u5e93",onOk:this.handleAccredit,onCancel:this.addTestCancel,keyboard:!1,maskClosable:!1,footer:[J.a.createElement(S.a,{key:"submit",type:"primary",onClick:this.courseTestSave},"\u786e\u8ba4"),J.a.createElement(S.a,{key:"back",onClick:this.addTestCancel},"\u8fd4\u56de")]},J.a.createElement(F.default,{wrappedComponentRef:function(t){e.AddTestForm=t}}))))}}]),r}(V.Component))||r,Q=s.a.create()(H);t.default=Q}}]);