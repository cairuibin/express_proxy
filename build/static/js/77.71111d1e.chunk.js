(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[77],{1865:function(e,t,a){"use strict";var n=a(9),r=a(12),i=a(11),o=a(10),s=a(0),c=a.n(s),l=a(197),u=a.n(l),d=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={sales:[5,20,36,10,10,20],stores:[15,120,6,40,110,20]},e.getOption=function(e,t){return{dataset:{source:[["score","amount","product"],[50.1,12755,"\u77e5\u8bc6\u70b91"],[89.7,20145,"\u77e5\u8bc6\u70b92"],[68.1,79146,"\u77e5\u8bc6\u70b93"],[19.6,91852,"\u77e5\u8bc6\u70b94"],[10.6,101852,"\u77e5\u8bc6\u70b95"]]},title:{text:"\u77e5\u8bc6\u70b9\u5206\u5e03",x:"center"},grid:{containLabel:!0},xAxis:{name:"amount"},yAxis:{type:"category"},visualMap:{orient:"horizontal",left:"center",min:10,max:100,text:["\u9ad8\u5ea6","\u4f4e\u5ea6"],dimension:0,inRange:{color:["#D7DA8B","#E15457"]}},series:[{type:"bar",encode:{x:"amount",y:"product"}}]}},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return c.a.createElement(u.a,{option:this.getOption()})}}]),a}(s.Component);t.a=d},1887:function(e,t,a){"use strict";a(950)("createHashHistory"),e.exports=a(951).createHashHistory},2165:function(e,t,a){},2166:function(e,t,a){},2776:function(e,t,a){"use strict";a.r(t);a(45);var n,r=a(6),i=a.n(r),o=(a(380),a(205)),s=a.n(o),c=(a(40),a(5)),l=a.n(c),u=(a(43),a(2)),d=a.n(u),m=(a(74),a(17)),p=a.n(m),f=a(3),h=a.n(f),g=(a(54),a(15)),k=a.n(g),v=a(7),b=a(20),y=a(9),w=a(12),E=a(52),F=a(11),x=a(10),C=(a(67),a(28)),O=a.n(C),j=(a(1884),a(1886)),I=a.n(j),L=(a(180),a(92)),N=a.n(L),T=(a(79),a(30)),S=a.n(T),D=(a(41),a(8)),A=a.n(D),V=a(0),P=a.n(V),M=a(948),B=a.n(M),z=a(544),q=a(1865),K=a(388),R=a(35),_=(a(2165),a(93)),H=(a(2166),a(44)),J=N.a.TreeNode,W=S.a.Option,G=A.a.Item,U=function(e){Object(F.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={bookList:[],bookId:void 0,catalogTree:[],catalogIdList:[]},e.bookChange=function(t){e.setState({bookId:t},(function(){e.getCatalogTree()}))},e.renderTreeNodes=function(t){return t.map((function(t){return t.children?P.a.createElement(J,{disabled:!e.state.catalogIdList.includes(t.id)&&3===e.state.catalogIdList.length,title:t.name,key:t.id,value:t.id,dataRef:t},e.renderTreeNodes(t.children)):P.a.createElement(J,{disabled:!e.state.catalogIdList.includes(t.id)&&3===e.state.catalogIdList.length,title:t.name,key:t.id,value:t.id,dataRef:t})}))},e.catalogChange=function(t,a,n){e.setState({catalogIdList:t})},e.getItemsValue=function(){return e.props.form.getFieldsValue()},e}return Object(w.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getBookList(),this.setState({bookId:this.props.bookId,catalogIdList:this.props.catalogIdList},(function(){return e.getCatalogTree()}))}},{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.setState({bookId:this.props.bookId},(function(){return e.getCatalogTree()}))}},{key:"getBookList",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.c)({userId:this.state.userId});case 2:t=e.sent,this.setState({bookList:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCatalogTree",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.state.bookId)){e.next=5;break}e.t0=[],e.next=8;break;case 5:return e.next=7,Object(H.d)({bookId:t});case 7:e.t0=e.sent;case 8:a=e.t0,this.setState({catalogTree:a});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={labelCol:{span:5},wrapperCol:{span:19}},t=this.state,a=t.bookId,n=t.bookList,r=t.catalogTree,i=this.props.form,o=i.getFieldDecorator,s=i.catalogIdList;return P.a.createElement("div",null,P.a.createElement("div",{className:"science"},P.a.createElement(A.a,{layout:"horizontal",style:{paddingBottom:18}},P.a.createElement(G,e,o("bookId",{initialValue:a,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7ae0\u8282"}]})(P.a.createElement(S.a,{placeholder:"\u9009\u62e9\u6559\u6750",disabled:!0,onChange:this.bookChange,dropdownMatchSelectWidth:!0},n.map((function(e,t){return P.a.createElement(W,{key:t,value:e.id},e.bookName)}))))),P.a.createElement(G,e,o("catalogIdList",{initialValue:s,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7ae0\u8282"}]})(P.a.createElement(N.a,{showSearch:!0,style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u7ae0\u8282",allowClear:!0,multiple:!0,treeDefaultExpandAll:!0,onChange:this.catalogChange},this.renderTreeNodes(r)))))))}}]),a}(V.Component),Q=A.a.create()(U),X=(a(552),a(27)),Y=S.a.Option,Z=A.a.Item,$=function(e){Object(F.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={testFormList:[],testFormMap:{}},e.getItemsValue=function(){var t=e.state.testFormMap,a=e.props.form.getFieldsValue();return a.testFormName=t[a.testFormId],a},e}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.getTestFormList({groupName:"testForm"})}},{key:"getTestFormList",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.o)(t);case 2:a=e.sent,n={},a.forEach((function(e){n[e.value]=e.text})),this.setState({testFormList:a,testFormMap:n});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={labelCol:{span:5},wrapperCol:{span:19}},t=this.state.testFormList,a=this.props.form.getFieldDecorator;return P.a.createElement(A.a,{layout:"horizontal",style:{paddingBottom:18}},P.a.createElement(l.a,null,P.a.createElement(d.a,{span:5},P.a.createElement("span",{className:"create-course-title "},"\u5927\u9898\u540d\u79f0:")),P.a.createElement(d.a,{span:19},P.a.createElement(Z,e,a("testFormId",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5927\u9898\u540d\u79f0"}]})(P.a.createElement(S.a,{placeholder:"\u9898\u578b",onChange:this.testFormChange,style:{width:"100px"}},t.map((function(e,t){return P.a.createElement(Y,{key:e.text,value:e.value},e.text)}))))))))}}]),a}(V.Component),ee=A.a.create()($),te=a(1887),ae=a.n(te),ne=a(311),re=A.a.Item,ie=ae()(),oe=S.a.Option,se=N.a.TreeNode,ce=I.a.Paragraph,le=O.a.confirm,ue=Object(R.g)(n=function(e){Object(F.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={testDiffList:[],testFormList:[],knowledgePointTree:[],specification:{selectWay:"2"},formVisible:!1,knowledgeFormKey:1,knowledgeForm:{}},e.addForm=function(){e.testFormAddForm.props.form.validateFields((function(t,a){if(!t){var n=e.testFormAddForm.getItemsValue(),r=e.state,i=r.knowledgeFormKey,o=r.knowledgeForm;o["knowledgeForm_"+i]=Object(b.a)(Object(b.a)({},n),{},{specificationDetailList:[]}),e.setState({knowledgeFormKey:i+1,knowledgeForm:o,formVisible:!1}),e.testFormAddForm.props.form.resetFields()}}))},e.deleteForm=function(t){var a=Object(E.a)(e);le({title:"\u5220\u9664",content:"\u786e\u5b9a\u8981\u5220\u9664\u5f53\u524d\u5927\u9898\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){var e=a.state.knowledgeForm,n={};Object.keys(e).forEach((function(a){a!==t&&(n[a]=e[a])})),a.setState({knowledgeForm:n})}})},e.titleChange=function(t){if(""!==t&&null!==t){var a=e.state.specification;a.title=t,e.setState({specification:a})}},e.testFormNameChange=function(t,a){if(""!==t&&null!==t){var n=e.state.knowledgeForm;n[a].testFormName=t,e.setState({knowledgeForm:n})}},e.addTest=function(t){var a=e.state.knowledgeForm,n={displayOrder:a[t].specificationDetailList.length+1,knowledgePointIdList:[]};a[t].specificationDetailList.push(n),e.setState({knowledgeForm:a})},e.deleteTest=function(t,a){var n=Object(E.a)(e);le({title:"\u5220\u9664",content:"\u786e\u5b9a\u8981\u5220\u9664\u5f53\u524d\u5c0f\u9898\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){var e=n.state.knowledgeForm;e[a].specificationDetailList.splice(t,1),e[a].specificationDetailList.forEach((function(e,t){e.displayOrder=t+1})),n.setState({knowledgeForm:e})}})},e.testFormChange=function(t,a,n){var r=e.state.knowledgeForm;r[n].specificationDetailList[a].testForm=t,e.setState({knowledgeForm:r})},e.testDiffChange=function(t,a,n){var r=e.state.knowledgeForm;r[n].specificationDetailList[a].difficulty=t,e.setState({knowledgeForm:r})},e.catalogChange=function(t,a,n){var r=e.state.knowledgeForm;r[n].specificationDetailList[a].knowledgePointIdList=t,e.setState({knowledgeForm:r})},e.addModal=function(){e.setState({addModal:!0})},e.addCancel=function(){e.setState({addModal:!1})},e.addCatalog=function(){e.AddCatalogForm.props.form.validateFields((function(t,a){if(!t)e.AddCatalogForm.getItemsValue()}))},e.getColumns=function(t){var a=e.state,n=a.testFormList,r=a.testDiffList,i=a.knowledgePointTree,o=e.props.form.getFieldDecorator;return[{title:"\u9898\u53f7",dataIndex:"displayOrder",render:function(e){return P.a.createElement("a",null,e)}},{title:"\u9898\u578b",dataIndex:"testForm",render:function(a,r,i){return P.a.createElement("span",{className:"edit-select"},P.a.createElement(re,null,o("knowledgeForm[".concat(t,"][").concat(i,"].testForm"),{initialValue:a,rules:[{required:!0,message:"\u4e0d\u80fd\u4e3a\u7a7a"}]})(P.a.createElement(S.a,{placeholder:"\u9898\u578b",onChange:function(a){return e.testFormChange(a,i,t)},style:{width:"100px"}},n.map((function(e,t){return P.a.createElement(oe,{key:e.text,value:e.value},e.text)}))))))}},{title:"\u5173\u8054\u77e5\u8bc6\u70b9(\u6700\u591a\u90093\u4e2a\uff0c\u591a\u9009\u5bb9\u6613\u51fa\u7efc\u5408\u9898)",dataIndex:"knowledgePointIdList",render:function(a,n,r){return P.a.createElement("span",null,P.a.createElement(re,null,o("knowledgeForm[".concat(t,"][").concat(r,"].knowledgePointIdList"),{initialValue:a,rules:[{required:!0,message:"\u4e0d\u80fd\u4e3a\u7a7a"}]})(P.a.createElement(N.a,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u77e5\u8bc6\u70b9",allowClear:!0,multiple:!0,treeDefaultExpandAll:!0,onChange:function(a){return e.catalogChange(a,r,t)}},e.renderTreeNodes(i,a,t)))))}},{title:"\u96be\u5ea6",dataIndex:"difficulty",render:function(a,n,i){return P.a.createElement("span",{className:"edit-select"},P.a.createElement(re,null,o("knowledgeForm[".concat(t,"][").concat(i,"].difficulty"),{initialValue:a,rules:[{required:!0,message:"\u4e0d\u80fd\u4e3a\u7a7a"}]})(P.a.createElement(S.a,{placeholder:"\u96be\u5ea6",onChange:function(a){return e.testDiffChange(a,i,t)},style:{width:"100px"}},r.map((function(e,t){return P.a.createElement(oe,{key:e.text,value:e.value},e.text)}))))))}},{title:"\u64cd\u4f5c",dataIndex:"handle",render:function(a,n,r){return P.a.createElement("a",{className:"edit-del",onClick:function(){return e.deleteTest(r,t)}},"\u5220\u9664")}}]},e.renderTreeNodes=function(t,a,n){return t.map((function(t){return t.children?P.a.createElement(se,{disabled:!a.includes(t.id)&&3===a.length,title:t.name,key:n+t.id,value:t.id,dataRef:t},e.renderTreeNodes(t.children,a,n)):P.a.createElement(se,{disabled:!a.includes(t.id)&&3===a.length,title:t.name,key:n+t.id,value:t.id,dataRef:t})}))},e.goBack=function(){ie.goBack()},e.linkToGroup=function(){e.props.form.validateFields(function(){var t=Object(v.a)(h.a.mark((function t(a,n){var r,i,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=15;break}if(!(r=e.getParams()).id){t.next=8;break}return t.next=5,Object(ne.h)(r);case 5:i=t.sent,t.next=11;break;case 8:return t.next=10,Object(ne.a)(r);case 10:i=t.sent;case 11:return t.next=13,Object(ne.c)(i.id);case 13:"0"!==(o=t.sent).basketSize?e.props.history.push("/teching/group-centers/1/0?".concat(JSON.stringify(o))):k.a.error("\u6ca1\u6709\u5bf9\u5e94\u8bd5\u9898\uff0c\u7ec4\u5377\u5931\u8d25\uff01");case 15:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},e.linkToPreview=function(){e.props.form.validateFields(function(){var t=Object(v.a)(h.a.mark((function t(a,n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=11;break}if(!(r=e.getParams()).id){t.next=8;break}return t.next=5,Object(ne.h)(r);case 5:e.props.history.push("/teching/diphasic-preview/".concat(r.id)),t.next=11;break;case 8:return t.next=10,Object(ne.a)(r);case 10:e.props.history.push("/teching/diphasic-test");case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},e.linkToKnowledge=function(){e.props.history.push("/teching/knowledge-edit")},e}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.getSpecification(),this.getTestFormList({groupName:"testForm"}),this.getTestDiffList({groupName:"testDiff"})}},{key:"getTestFormList",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.o)(t);case 2:a=e.sent,this.setState({testFormList:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTestDiffList",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.o)(t);case 2:a=e.sent,this.setState({testDiffList:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getKnowledgeTree",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.specification.subjectId,e.next=3,Object(H.g)({subjectId:t});case 3:a=e.sent,this.setState({knowledgePointTree:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSpecification",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t,a,n,r,i,o,s,c,l,u=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.location.search,!(a=B.a.parse(t,!0).query.id)){e.next=11;break}return e.next=5,Object(ne.e)({id:a});case 5:n=e.sent,r=this.state,i=r.knowledgeFormKey,o=r.knowledgeForm,n.specificationFormList.forEach((function(e){o["knowledgeForm_"+i]=e,i+=1})),this.setState({knowledgeForm:o,knowledgeFormKey:i,specification:n},(function(){return u.getKnowledgeTree()})),e.next=15;break;case 11:s=B.a.parse(t,!0).query.title,c=B.a.parse(t,!0).query.stageId,l=B.a.parse(t,!0).query.subjectId,this.setState({specification:Object(b.a)(Object(b.a)({},this.state.specification),{},{title:s,stageId:c,subjectId:l})},(function(){return u.getKnowledgeTree()}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getParams",value:function(){var e=this.state,t=e.specification,a=e.knowledgeForm,n=[],r=[];return Object.values(a).forEach((function(e,t){e.displayOrder=t+1,n.push(e),r=r.concat(e.specificationDetailList)})),t.specificationFormList=n,t.testNum=r.length,t}},{key:"render",value:function(){var e=this,t=this.state,a=t.specification,n=t.addModal,r=t.knowledgeForm,o=t.formVisible;return P.a.createElement("div",{className:"diphasic-edit teach-main"},P.a.createElement(l.a,{className:"detail-head-row teach-main-box",style:{paddingTop:50}},P.a.createElement(_.a,{navName:"test-library"}),P.a.createElement("div",{className:"teach-main-cont"},P.a.createElement(A.a,{layout:"horizontal",style:{paddingBottom:18}},P.a.createElement(l.a,{className:"detail-head-row"},P.a.createElement(d.a,{span:8},P.a.createElement("div",{className:"detail-head-tit"},P.a.createElement("a",{className:"detail-history",onClick:this.goBack.bind(this)},P.a.createElement(p.a,{type:"left"}),"\u8fd4\u56de"))),P.a.createElement(d.a,{span:8,className:"preview-tit"},P.a.createElement(ce,{editable:{onChange:this.titleChange}},a.title)),P.a.createElement(d.a,{span:8},P.a.createElement("div",{className:"detail-head-edit"},P.a.createElement("div",{onClick:this.linkToPreview},"\u4fdd\u5b58",P.a.createElement(p.a,{type:"vertical-align-bottom"})),P.a.createElement("div",{onClick:this.linkToGroup},"\u7acb\u5373\u51fa\u9898",P.a.createElement(p.a,{type:"file-text"}))))),P.a.createElement(l.a,{className:"m20"}),P.a.createElement(l.a,{className:"text-detail-conts",gutter:16},P.a.createElement(d.a,{span:16},Object.keys(r).map((function(t){return P.a.createElement("div",{className:"DetailBg",key:t},P.a.createElement(ce,{editable:{onChange:function(a){return e.testFormNameChange(a,t)}}},r[t].testFormName),P.a.createElement("a",{className:"par-del",onClick:function(){return e.deleteForm(t)}},"\u5220\u9664"),P.a.createElement(s.a,{className:"diplhasic-table",columns:e.getColumns(t),dataSource:r[t].specificationDetailList,pagination:!1,rowKey:"displayOrder"}),P.a.createElement("span",{className:"tianjia-title",onClick:function(){return e.addTest(t)}},"\u6dfb\u52a0\u5c0f\u9898"))})),P.a.createElement("div",{className:"tianjia-dati",onClick:function(){return e.setState({formVisible:!0})}},P.a.createElement(p.a,{type:"plus"}),"\u6dfb\u52a0\u5927\u9898")),P.a.createElement(d.a,{span:8},P.a.createElement("div",{className:"DetailBg"},P.a.createElement("p",{className:"text-analyze"},"\u53cc\u5411\u7ec6\u76ee\u8868\u6982\u51b5"),P.a.createElement(z.a,null),P.a.createElement("div",{className:"chats-item"},P.a.createElement("p",{className:"text-analyze"},"\u9898\u578b\u5206\u5e03"),P.a.createElement(K.a,null)),P.a.createElement("div",{className:"chats-item"},P.a.createElement(q.a,null)))))))),P.a.createElement(O.a,{className:"modal-btn",visible:n,title:"\u6dfb\u52a0",onOk:this.handleAccredit,onCancel:this.addCancel,keyboard:!1,maskClosable:!1,footer:[P.a.createElement(i.a,{key:"back",onClick:this.addCancel},"\u8fd4\u56de"),P.a.createElement(i.a,{key:"submit",type:"primary",onClick:this.addCatalog},"\u786e\u8ba4")]},P.a.createElement(Q,{bookId:a.eBookId,knowledgePointIdList:a.knowledgePointIdList,wrappedComponentRef:function(t){e.AddCatalogForm=t}})),P.a.createElement(O.a,{className:"modal-btn",title:"\u6dfb\u52a0\u5927\u9898",visible:o,onOk:this.addForm,onCancel:function(){return e.setState({formVisible:!1})},keyboard:!1,maskClosable:!1,footer:[P.a.createElement(i.a,{key:"back",onClick:function(){return e.setState({formVisible:!1})}},"\u8fd4\u56de"),P.a.createElement(i.a,{key:"submit",type:"primary",onClick:this.addForm},"\u786e\u8ba4")]},P.a.createElement(ee,{wrappedComponentRef:function(t){e.testFormAddForm=t}})))}}]),a}(V.Component))||n,de=A.a.create()(ue);t.default=de}}]);