(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[92],{1763:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIDSURBVHgB5ZZNbtNAGIbfGRvjHT6Cl1VFg7NmQeYG4QQQiQ1KJZQTkJzARVWarW+Q9ARTfvY1RUJdhht42STN9zFua2rS4mby0w2PZOWzR8pjj795xwI37Oo4cqU3NGWIzTG+JLz+qdppcUEWxRZkOaErMSxfuBJGehBuQfZHekf4mDy60K0Yy5g5hSVCiAZWEUqS9VS9H8OSFyf9IQs0YSskcHNHD0awhAVFVeP/nlLJsQeOsWH+5y4lfGLMrbpUQAaQ4qMpA9gKHe9pfPry3S9Ysvel/0pwqUsJvaWE88vJqKYPj2EBO84zwVyScedM7R8sJTREkLKyxRcxsls5ofVD7Sd5vaPjMP89V52xiy1wLWsneR3pOCD55NTcTlD7OuhWRhvYHLYyRq+Q1b4dvbmYTT57+XuUiEHUrYg2qLS0cdqSyzDnxJOeORNvmbglTAdXRJtomGhb+gnPS7lbyG5H+WCGad2nYLSZaLtu/e79shyR+fCRqla2ftIY2ZlqdytkY0lCFTvPekJL2XrCkmxPHzXvypAtylYWmugaFbJd3Y9mmKSm5Xt/y6Du28BXWvjM9L2oHUfELnvhlKbKI/N3Un6oWlI3wgvT/h7WIDTrTUua1kF+UvVpcjWlqepkC1OyNGJOxyZdEnOcAH7w0HeQKJ8814cNAQ7xAA6cdNUU+g3vDey8IQNI6AAAAABJRU5ErkJggg=="},1784:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADRSURBVHgB3VK7DcIwEL2X0EOLaLIBbJCwAYxAA3SwAcoIdAghITbICEZiD9wBFSxgH+cIF4lIIoWOV/ikex9b8iP6AXDHfRFfZURgeskms8ac+oeL8qLbMhHOrkQ+cTq3Y4OxN/OXYM3WpggwFNO6TAo361A1IgTBsYanoI40jKl7QSvzYK8yZj63MjfhX80AulVc3T/TYx4/pT29BjNv5Q5pUi4ceZJRNLr6yk7L1ByGCuU012MZCZg39OmxQDGQ9ndKFcKoAnmIoYRC0mWTxxvRakPLz0XtsQAAAABJRU5ErkJggg=="},1801:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAARCAYAAAACCvahAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFUSURBVHgBpZI9S8NAGMf/dyapSUq7qDiUIji7COLky+as4Gx3Bb+Djn4EQfwA4qaCm0KXLg6li1AUtWCbIiptbZJLHi/xNbZpK/3BvTzH87vn7jhgCFjQ7eRrOc7ZlgyNbkmu8OxiubJ9nJu97JB389Y9Y8jEVXBcgdJNpckYrR9tzJ19rfNwhx7iTwmYROx09aCwFJH7oSkKUob+IXB+snZYWAzmCgZkOjOBtuMCBNMnf08uzQ8sB4xqaiSOlZezJrIpFbWWQLUpYAtC+dmB7dF3Du8uGhjTR3Bx1wzHpMqhqwypRDQ9EukyaSFjyIpaGM+MJ0Jh0lTw8OrCannxclrjaLg+6vKoaSmNcIb6m4fz2waqf8SOOz/KuwXt6rPqVFpFyXLwYvvoRuyDFS07bL0Y6JN0QL9lwjX+A6OnYAiPLbhYUUjZlNNkP48I1Tbj+xiWd3zIb66gtz8RAAAAAElFTkSuQmCC"},2447:function(e,t,a){},2765:function(e,t,a){"use strict";a.r(t);a(67);var i=a(28),r=a.n(i),s=a(3),n=a.n(s),c=a(7),o=a(9),m=a(12),l=a(11),d=a(10),u=(a(178),a(82)),p=a.n(u),g=a(0),A=a.n(g),y=(a(2447),a(522)),h=a(75),f=(a(943),p.a.TreeNode),N=p.a.DirectoryTree,E=function(e){Object(l.a)(i,e);var t=Object(d.a)(i);function i(){var e;Object(o.a)(this,i);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={userId:"",courseTree:[],resourceId:"",resourceDetail:{}},e.goBack=function(){e.props.history.goBack()},e}return Object(m.a)(i,[{key:"componentDidMount",value:function(){var e=this.props.location.search.split("?")[1],t=e.includes("%")?decodeURI(e):e,a=JSON.parse(t),i=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).user.id:"";this.getOne(a.resourceId),this.myStudyCourseCatalog(a.courseId,i),this.setState({userId:i,courseId:a.courseId,resourceId:a.resourceId})}},{key:"getOne",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var a,i=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.g)({id:t});case 2:a=e.sent,this.setState({resourceDetail:a,resourceId:a.id},(function(){i.getFileUrl()}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"myStudyCourseCatalog",value:function(){var e=Object(c.a)(n.a.mark((function e(t,a){var i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.m)({subjectId:t,userId:a});case 2:i=e.sent,this.setState({courseTree:i.bookCatalogVoList});case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getCutOne",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var a,i,s,c,o,m=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.belongType){e.next=9;break}return Object(y.s)({duration:1,mediaType:t.mediaType,resourceFrom:2,studentId:this.state.userId,resourceId:this.state.resourceId,studyProgressSecond:1}).then((function(e){m.myStudyCourseCatalog(m.state.courseId,m.state.userId)})),e.next=4,Object(y.g)({id:t.id});case 4:a=e.sent,h.a.isEmpty(document.getElementById("previewIframe"))||(document.getElementById("previewIframe").innerHTML=""),this.setState({resourceDetail:a,resourceId:a.id},(function(){m.getFileUrl()})),e.next=10;break;case 9:2===t.belongType?(console.log(t),i=new Date,s=new Date(t.studyFromTime),c=new Date(t.studyEndTime),"1"===(o=t.publishAnswerType)?i<s?r.a.info({getContainer:document.getElementById("Catalogue-pic"),className:"Catalogue-pic-modal",title:"\u63d0\u793a",content:"\u4f5c\u4e1a\u672a\u5f00\u59cb"}):i>c&&3!==t.homeworkStatus?r.a.info({getContainer:document.getElementById("Catalogue-pic"),className:"Catalogue-pic-modal",title:"\u63d0\u793a",content:"\u4f5c\u4e1a\u5df2\u7ed3\u675f"}):i>c&&3===t.homeworkStatus&&1===t.dealStatus?this.props.history.push("/my-operation/operation-finished/".concat(o,"/").concat(t.id)):i>c&&3===t.homeworkStatus&&2===t.dealStatus?this.props.history.push("/my-operation/operation-message/".concat(o,"/").concat(t.id)):i<c&&3!==t.homeworkStatus?this.props.history.push("/operation-begin/".concat(t.id)):i<c&&3===t.homeworkStatus?this.props.history.push("/my-operation/operation-reviewed/".concat(o,"/").concat(t.id)):r.a.info({getContainer:document.getElementById("Catalogue-pic"),className:"Catalogue-pic-modal",title:"\u63d0\u793a",content:"\u4f5c\u4e1a\u5df2\u7ed3\u675f"}):i<s?r.a.info({getContainer:document.getElementById("Catalogue-pic"),className:"Catalogue-pic-modal",title:"\u63d0\u793a",content:"\u4f5c\u4e1a\u672a\u5f00\u59cb"}):i>c&&3!==t.homeworkStatus?r.a.info({getContainer:document.getElementById("Catalogue-pic"),className:"Catalogue-pic-modal",title:"\u63d0\u793a",content:"\u4f5c\u4e1a\u5df2\u7ed3\u675f"}):i<c&&3!==t.homeworkStatus?this.props.history.push("/operation-begin/".concat(t.id)):3===t.homeworkStatus&&1===t.dealStatus?this.props.history.push("/my-operation/operation-finished/".concat(o,"/").concat(t.id)):3===t.homeworkStatus&&2===t.dealStatus?this.props.history.push("/my-operation/operation-message/".concat(o,"/").concat(t.id)):r.a.info({getContainer:document.getElementById("Catalogue-pic"),className:"Catalogue-pic-modal",title:"\u63d0\u793a",content:"\u4f5c\u4e1a\u5df2\u7ed3\u675f"})):r.a.info({getContainer:document.getElementById("my-learn-details-show"),className:"my-learn-details-show-modal",title:"\u63d0\u793a",content:"\u8bf7\u524d\u5f80\u624b\u673a\u7aef\u8fdb\u5165\u8bfe\u5802"});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFileUrl",value:function(){var e=this.state.resourceDetail,t=document.documentElement.clientHeight-220;if(5===e.mediaType||4===e.mediaType){var a=document.getElementById("previewVideo");a.src="/api/media/api/v1/media/getMedia/".concat(e.fileId),a.play()}else if(9===e.mediaType){var i=document.createElement("iframe"),r={content:e.content,resourceName:e.resourceName};i.src="/#/student/safety-check?".concat(encodeURI(JSON.stringify(r))),i.width="100%",i.height=t+"px",i.parmas=r,document.getElementById("previewIframe").appendChild(i)}else if(1===e.mediaType||8===e.mediaType){var s=window.location.host,n="http://".concat(s,"/api/media/api/v1/media/getMedia/").concat(e.fileId,"/").concat(e.resourceName),c="http://39.96.51.62:8012/onlinePreview?url="+encodeURIComponent(n),o=document.createElement("iframe");if(o.src=c,o.width="100%",o.id="iframeId",o.height=t+"px",!h.a.isEmpty(o)&&!h.a.isEmpty(document.getElementById("previewIframe"))){document.getElementById("previewIframe").appendChild(o);document.getElementById("iframeId").contentWindow.document.body;if(e&&e.resourceName){var m=e.resourceName.split("."),l=m.length-1;"txt"===(m&&m.length>0?m[l]:"")&&(document.getElementById("previewIframe").style.background="#ffffff")}}}else if(99===e.mediaType){var d=document.createElement("iframe"),u={resourceName:e.resourceName,content:e.content,fileId:e.fileId};d.src="/#/student/safety-down?".concat(encodeURI(JSON.stringify(u))),d.width="100%",d.height=t+"px",d.parmas=u,d.id="iframeId",document.getElementById("previewIframe").appendChild(d),document.getElementById("iframeId").style.background="#ffffff"}}},{key:"componentWillUnmount",value:function(){Object(y.s)({duration:1,mediaType:this.state.resourceDetail.mediaType,resourceFrom:2,studentId:this.state.userId,resourceId:this.state.resourceId,studyProgressSecond:1})}},{key:"render",value:function(){var e=this,t=this.state,i=t.courseTree,r=t.resourceDetail,s=t.resourceId,n=document.documentElement.clientHeight-220,c=function(e){if(!h.a.isEmpty(e))return A.a.createElement("div",null,2===e.belongType?A.a.createElement("img",{className:"user-img",src:a(1801),alt:""}):3===e.belongType?A.a.createElement("img",{className:"user-img",src:a(1784),alt:""}):1===e.mediaType?A.a.createElement("img",{className:"user-img",src:a(525),alt:""}):2===e.mediaType?A.a.createElement("img",{className:"user-img",src:a(533),alt:""}):3===e.mediaType?A.a.createElement("img",{className:"user-img",src:a(526),alt:""}):4===e.mediaType?A.a.createElement("img",{className:"user-img",src:a(534),alt:""}):5===e.mediaType?A.a.createElement("img",{className:"user-img",src:a(527),alt:""}):6===e.mediaType?A.a.createElement("img",{className:"user-img",src:a(528),alt:""}):7===e.mediaType?A.a.createElement("img",{className:"user-img",src:a(529),alt:""}):8===e.mediaType?A.a.createElement("img",{className:"user-img",src:a(530),alt:""}):9===e.mediaType?A.a.createElement("img",{className:"user-img",src:a(531),alt:""}):99===e.mediaType?A.a.createElement("img",{className:"user-img",src:a(524),alt:""}):0===e.mediaType?A.a.createElement("img",{className:"user-img",src:a(1763),alt:""}):"")};return A.a.createElement("div",{className:"my-training-details-show clearfix",id:"my-learn-details-show"},A.a.createElement("div",{className:"details-show-pic clearfix"},A.a.createElement("div",{className:"top"},A.a.createElement("span",{className:"img"},A.a.createElement("a",{className:"preview-f",onClick:this.goBack.bind(this)},A.a.createElement("img",{src:a(521),style:{float:"left"},alt:""}),A.a.createElement("span",{className:"text-back",style:{float:"left",fontSize:"16px",color:"#2A283D"}},"\u8fd4\u56de"))),r.title),A.a.createElement("div",{className:"preview-box clearfix"},A.a.createElement("div",{className:"left clearfix"},5===r.mediaType?A.a.createElement("video",{width:"100%",height:n,id:"previewVideo",src:"",controls:"controls",controlsList:"nodownload"}):4===r.mediaType?A.a.createElement("div",{className:"pic_img",style:{height:n}},A.a.createElement("audio",{id:"previewVideo",src:"",controls:"controls",controlsList:"nodownload",className:"preview_audio"})):6===r.mediaType?A.a.createElement("div",{className:"pic_img",style:{height:n}},A.a.createElement("embed",{src:"/api/media/api/v1/media/getMedia/".concat(r.fileId,"/").concat(r.title)})):3===r.mediaType?A.a.createElement("div",{className:"pic_img",style:{height:n}},A.a.createElement("img",{src:"/api/media/api/v1/media/getMedia/".concat(r.fileId),alt:"",className:"preview_img"})):A.a.createElement("div",{id:"previewIframe",style:{height:n}})),A.a.createElement("div",{className:"right clearfix"},A.a.createElement("span",{className:"span"},"\u8bfe\u7a0b\u76ee\u5f55:"),A.a.createElement("div",{className:"Catalogue-pic"},A.a.createElement("div",{className:"Catalogue-pic-tree",style:{height:n-40}},i&&i.length>0?A.a.createElement(N,{defaultExpandAll:!0,multiples:!0},function t(a){return a.map((function(a){return!h.a.isEmpty(a)&&a.hasOwnProperty("children")&&a.children?0===a.seniorId?A.a.createElement(f,{className:"TreeNode",key:a.id,title:A.a.createElement("div",{className:"TreeIcon"},A.a.createElement("span",{className:"title",style:{marginRight:10},title:a.catalogName},a.catalogName))},a.myStudyResourceVos.map((function(t,a){return A.a.createElement(f,{className:"ResourceTreeNode",key:a,title:A.a.createElement("div",{className:"TreeIcon"},".",c(t),A.a.createElement("span",{className:"title1",style:{marginRight:10},onClick:function(){return e.getCutOne(t)},title:t.resourceName},t.resourceName,t.id===s?A.a.createElement("i",{className:"i i-active"},"\u6b63\u5728\u5b66"):A.a.createElement("i",{className:"i"},t.studyProgressSum?(100*t.studyProgressSum).toFixed(0)+"%":"0%")))})})),t(a.children)):A.a.createElement(f,{className:"TreeNode",key:a.id,title:A.a.createElement("div",{className:"TreeIcon"},A.a.createElement("span",{className:"title",style:{marginRight:10},title:a.catalogName},a.catalogName))},a.myStudyResourceVos.map((function(t,a){return A.a.createElement(f,{className:"ResourceTreeNode",key:a,title:A.a.createElement("div",{className:"TreeIcon"},c(t),A.a.createElement("span",{className:"title1",style:{marginRight:10},onClick:function(){return e.getCutOne(t)},title:t.resourceName},t.resourceName,t.id===s?A.a.createElement("i",{className:"i i-active"},"\u6b63\u5728\u5b66"):A.a.createElement("i",{className:"i"},t.studyProgressSum?(100*t.studyProgressSum).toFixed(0)+"%":"0%")))})})),t(a.children)):(a.seniorId,A.a.createElement(f,{className:"TreeNode",key:a.id,title:A.a.createElement("div",{className:"TreeIcon"},A.a.createElement("span",{className:"title",style:{marginRight:10},title:a.catalogName},a.catalogName))},a.myStudyResourceVos.map((function(t,a){return A.a.createElement(f,{className:"ResourceTreeNode",key:a,title:A.a.createElement("div",{className:"TreeIcon"},c(t),A.a.createElement("span",{className:"title1",style:{marginRight:10},onClick:function(){return e.getCutOne(t)},title:t.resourceName},t.resourceName,t.id===s?A.a.createElement("i",{className:"i i-active"},"\u6b63\u5728\u5b66"):A.a.createElement("i",{className:"i"},t.studyProgressSum?(100*t.studyProgressSum).toFixed(0)+"%":"0%")))})}))))}))}(i)):null))))))}}]),i}(g.Component);t.default=E}}]);