(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[99],{2388:function(e,t,a){},2391:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACESURBVHgBhZAtDoAwDIXLT8CAAYVDgUKB4Q6cFcVRuAAGFGoKFK9JlzRbFl7yLe361m0l8jWDxd1MnbwAg8QNuGwhdoyTintdiMAIWumWk68bnHx1B0oKqwZZguWQjnnAaMDGxlfMQ8C4stl+5qEfxeodpA4ZlVe82DlmYtgFjnkanXV/mVsSE2F8q8YAAAAASUVORK5CYII="},2392:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAYAAACALL/6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC4SURBVHgBdZA/C8JADMXjVTwQC4KDOIjdRNHJqZuT4OYX18VNd5EDQbhBKhR8gRd6Yn3wI/cvuZdk0ihnXIA9WII3iCADtXCh2oAdCGALusCDAjzBgcnBJQmqgfwqT99YQsUYWxKqNJqlPhiDFxny/AKmvD+ZpQKsWb3DvUnXN1YvwcRJ41+rrb7dSA/MwZH70rHRyMs26bnnL14t6BRGrDT7k3Smtbs2rfPVWQdWsiEIf76y4QeoP92+JHfseHwuAAAAAElFTkSuQmCC"},2752:function(e,t,a){"use strict";a.r(t);a(177);var n=a(110),r=a.n(n),s=(a(109),a(72)),c=a.n(s),o=(a(1770),a(1771)),l=a.n(o),u=(a(45),a(6)),i=a.n(u),m=(a(74),a(17)),g=a.n(m),d=(a(135),a(73)),h=a.n(d),p=(a(40),a(5)),f=a.n(p),y=(a(97),a(14)),A=a.n(y),C=(a(43),a(2)),S=a.n(C),E=a(3),v=a.n(E),I=a(7),N=(a(67),a(28)),b=a.n(N),j=a(20),O=a(9),k=a(12),w=a(52),K=a(11),T=a(10),z=(a(79),a(30)),L=a.n(z),M=(a(178),a(82)),R=a.n(M),x=(a(204),a(101)),D=a.n(x),B=(a(51),a(22)),Q=a.n(B),F=a(0),V=a.n(F),Y=a(523),U=a(1800),X=a(522),J=(a(2388),a(2389)),W=a(75),G=a(111),H=Q.a.Search,Z=D.a.TabPane,q=R.a.TreeNode,P=L.a.Option,_=function(e){Object(K.a)(n,e);var t=Object(T.a)(n);function n(){var e;Object(O.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={courseTotal:0,bigMajorId:"",collectFlag:"",majorId:"",medMajorId:"",opneRange:2,orderAscfield:"",orderDescfield:"",subjectName:"",studentId:"",unitId:"",userId:"",total:0,pageNum:1,pageSize:15,stageId:"",subjectList:null,courseTree:[],getCourseCenter:[],courseCenterCatalog:[],resourceFormatList:G.e,activeKey:"1",courseKey:localStorage.getItem("subjectKey")?localStorage.getItem("subjectKey"):"",category:"",sortSet:{value:"zh",zhOrder:!1,fbOrder:!1,syOrder:!1,scOrder:!1},resourceName:"",searchValue:void 0,isShow:!1,resourceTypeCheck:""},e.bookChange=function(t){var a=e.state.subjectList,n="",r="";a.forEach((function(e){e.id===t&&(n=e.stageId,r=e.subjectId)})),e.setState({pageNum:1,catalogArray:[],catalogArrayChecked:[],selectCatalogId:"",stageId:n,catalogStageId:n,subjectId:r,catalogSubjectId:r},(function(){e.getCourseListTreeNew(),e.getCourseCenter()}))},e.renderTreeNodes=function(t){return t.map((function(t){return t.children?V.a.createElement(q,{title:V.a.createElement("div",{className:"TreeIcon",onClick:e.DeptonSelect.bind(Object(w.a)(e),t)},t.name),key:t.id,dataRef:t},e.renderTreeNodes(t.children)):V.a.createElement(q,{switcherIcon:V.a.createElement("span",{className:"TreeCircleIcon"}),title:t.name,key:t.id,value:t.id,dataRef:t})}))},e.resourceTypeChange=function(t){e.setState({pageNum:1,resourceTypeCheck:t.target.value},(function(){e.getResourceList()}))},e.resourceFormatChange=function(t){e.setState({pageNum:1,resourceFormatCheck:t.target.value},(function(){e.getResourceList()}))},e.zhClick=function(){var t=e.state.sortSet;"zh"===t.value?(t.zhOrder=!t.zhOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.zhOrder,"create_time")}))):e.setState({sortSet:Object(j.a)(Object(j.a)({},t),{},{zhOrder:!1,value:"zh"})},(function(){e.testOrderChange(t.zhOrder,"create_time")}))},e.syClick=function(){var t=e.state.sortSet;"sy"===t.value?(t.syOrder=!t.syOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.syOrder,"studentsNumber")}))):e.setState({sortSet:Object(j.a)(Object(j.a)({},t),{},{syOrder:!1,value:"sy"})},(function(){e.testOrderChange(t.syOrder,"studentsNumber")}))},e.scClick=function(){var t=e.state.sortSet;"sc"===t.value?(t.scOrder=!t.scOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.scOrder,"collection")}))):e.setState({sortSet:Object(j.a)(Object(j.a)({},t),{},{scOrder:!1,value:"sc"})},(function(){e.testOrderChange(t.scOrder,"collection")}))},e.testOrderChange=function(t,a){t?e.setState({pageNum:1,orderAscfield:a,orderDescfield:""},(function(){e.getCourseCenter()})):e.setState({pageNum:1,orderAscfield:"",orderDescfield:a},(function(){e.getCourseCenter()}))},e.resourceNameSearch=function(t){e.setState({pageNum:1,resourceName:t.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getResourceList()}))},e.searchChange=function(t){e.setState({searchValue:t.target.value},(function(){e.setState({pageNum:1,resourceName:e.state.searchValue.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getResourceList()}))}))},e.onShowSizeChange=function(t,a){e.setState({pageNum:1,pageSize:a},(function(){e.getCourseCenter()}))},e.onPageNumChange=function(t,a){e.setState({pageNum:t},(function(){e.getCourseCenter()}))},e.toCourseType=function(t){var a=t.target.value;localStorage.setItem("subjectKey",""),"1"===t.target.value?(localStorage.setItem("subjectKey",1),e.setState({category:"",courseKey:a},(function(){e.getCourseCenter()}))):"2"===t.target.value?(localStorage.setItem("subjectKey",2),e.setState({category:1,courseKey:a},(function(){e.getCourseCenter()}))):"3"===t.target.value?(localStorage.setItem("subjectKey",3),e.setState({category:2,courseKey:a},(function(){e.getCourseCenter()}))):"4"===t.target.value?(localStorage.setItem("subjectKey",4),e.setState({category:3,courseKey:a},(function(){e.getCourseCenter()}))):e.getCourseCenter()},e}return Object(k.a)(n,[{key:"courseClick",value:function(e){var t=this,a=this,n={subjectId:e.id,userId:this.state.userId};Object(X.c)(n).then((function(e){1===e.isDelete?b.a.confirm({title:"\u63d0\u793a",content:"\u8be5\u8bfe\u7a0b\u5df2\u7ecf\u88ab\u5220\u9664",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){a.getCourseCenter(this)}}):(localStorage.setItem("stuCenterKey",t.state.activeKey),t.props.history.push({pathname:"/course-center/course-center-details",search:JSON.stringify(n)}))}))}},{key:"callback",value:function(e){var t=this,a=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):"";localStorage.setItem("stuCenterKey",""),"1"===e?this.setState({unitId:a.user.schoolId,opneRange:2,bigMajorId:"",medMajorId:"",majorId:"",pageNum:1,activeKey:e},(function(){t.getCourseCenter()})):"2"===e?this.setState({unitId:"",opneRange:3,bigMajorId:"",medMajorId:"",majorId:"",pageNum:1,activeKey:e},(function(){t.getCourseCenter()})):this.setState({unitId:"",opneRange:4,activeKey:e})}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):"",a=localStorage.getItem("stuCenterKey"),n=localStorage.getItem("subjectKey");if(""!==a&&null!==a){var r=0,s="";"1"===a?(r=2,s=t.user.schoolId):"2"===a?r=3:"3"===a&&(r=4),this.setState({activeKey:a,opneRange:r,unitId:s,userId:t.user.id,orderDescfield:"create_time"},(function(){e.getMyStageList()}))}else this.setState({activeKey:"1",unitId:t.user.schoolId,userId:t.user.id,orderDescfield:"create_time"},(function(){e.getMyStageList()}));""!==n&&null!==n?"1"===n?this.setState({courseKey:n,category:""},(function(){e.getMyStageList()})):"2"===n?this.setState({courseKey:n,category:"1"},(function(){e.getMyStageList()})):"3"===n?this.setState({courseKey:n,category:"2"},(function(){e.getMyStageList()})):"4"===n&&this.setState({courseKey:n,category:"3"},(function(){e.getMyStageList()})):this.setState({courseKey:"1",category:""},(function(){e.getMyStageList()}))}},{key:"getCourseCenter",value:function(){var e=Object(I.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.d)({pageNum:this.state.pageNum,pageSize:this.state.pageSize,userId:this.state.userId,subjectName:t,opneRange:this.state.opneRange,orderAscfield:this.state.orderAscfield,orderDescfield:this.state.orderDescfield,bigMajorId:this.state.bigMajorId,majorId:this.state.majorId,medMajorId:this.state.medMajorId,collectFlag:this.state.collectFlag,unitId:this.state.unitId,schoolType:this.state.stageId,category:this.state.category});case 2:a=e.sent,this.setState({getCourseCenter:a.data,pageNum:a.pageNum,pageSize:a.pageSize,courseTotal:a.total});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMyStageList",value:function(){var e=Object(I.a)(v.a.mark((function e(){var t,a,n=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.d)();case 2:0!==(t=e.sent).length?(a=t?t.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{subjectName:e.stageName,id:e.stageId})})):"",this.setState({stageId:a[0].stageId,subjectList:a},(function(){n.getCourseListTreeNew(),n.getCourseCenter()}))):(this.getCourseListTreeNew(),this.getCourseCenter());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCourseListTreeNew",value:function(){var e=Object(I.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.stageId)){e.next=7;break}return e.next=4,Object(U.c)({bookId:t});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=[];case 8:a=e.t0,this.setState({courseTree:a});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"DeptonSelect",value:function(e,t){W.a.isEmpty(e.id)||("1"===e.level?this.state.bigMajorId=e.id:"2"===e.level?this.state.medMajorId=e.id:"3"===e.level&&(this.state.majorId=e.id),this.setState({hierarchy:e.hierarchy})),this.getCourseCenter()}},{key:"getResourceFormatList",value:function(){var e=Object(I.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.b)(t);case 2:a=e.sent,this.setState({resourceFormatList:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.courseKey,s=t.stageId,o=t.sortSet,u=t.subjectList,m=t.courseTree,d=t.pageNum,p=t.pageSize,y=t.activeKey,C=t.getCourseCenter,E=t.courseTotal,v=t.opneRange,I=document.documentElement.clientHeight-280,N=C.map((function(t,n){return V.a.createElement(S.a,{span:3,className:"paper-center-div",key:n,onClick:function(){return e.courseClick(t)}},V.a.createElement("div",{className:"pic-img"},V.a.createElement("img",{src:"/api/media/api/v1/media/showThumbnail/".concat(t.fileId),alt:""}),1===t.category?V.a.createElement("span",null,V.a.createElement("img",{src:a(925),alt:"",className:"course-logo-l"}),"\u5728\u7ebf\u8bfe\u7a0b"):2===t.category?V.a.createElement("span",null,V.a.createElement("img",{src:a(926),alt:"",className:"course-logo-l"}),"\u4e92\u52a8\u8bfe\u7a0b"):3===t.category?V.a.createElement("span",null,V.a.createElement("img",{src:a(927),alt:"",className:"course-logo-l"}),"\u5b9e\u8bad\u8bfe\u7a0b"):null),V.a.createElement("h4",null,t.subjectName),V.a.createElement("p",null,V.a.createElement("span",{className:"span-a"},V.a.createElement("span",{className:"span-b"}," ",t.unitName),t.unitName&&t.humanName?V.a.createElement("i",{className:"i"},"|"):""),V.a.createElement("span",null,t.humanName)),V.a.createElement("p",null,V.a.createElement("span",null,V.a.createElement("img",{src:a(2391)}),t.collection),V.a.createElement("span",{className:"span"},V.a.createElement("img",{src:a(2392)}),t.studentsNumber)))})),b=V.a.createElement("div",{className:"select-bagr"},V.a.createElement(L.a,{style:{width:"100%",marginBottom:"20px"},placeholder:"",onChange:this.bookChange,dropdownMatchSelectWidth:!0,value:s},u?u.map((function(e,t){return V.a.createElement(P,{key:t,value:e.stageId},e.stageName)})):V.a.createElement(P,{key:"",value:""},"\u6682\u65e0\u6570\u636e")),V.a.createElement(R.a,{className:"my-collect-tree",style:{height:I},autoExpandParent:!0,showLine:!0,blockNode:!0,showIcon:!0},this.renderTreeNodes(m))),j=V.a.createElement(h.a,{className:"center-content-paper"},V.a.createElement(f.a,{className:"paper-common",id:"paperCommon"},V.a.createElement(S.a,{span:2,className:"paper-year"},"\u8bfe\u7a0b\u7c7b\u578b"),V.a.createElement(S.a,{span:22},V.a.createElement(A.a.Group,{value:n,onChange:this.toCourseType.bind(this)},V.a.createElement(A.a.Button,{value:"1"},"\u5168\u90e8"),V.a.createElement(A.a.Button,{value:"2"},"\u5728\u7ebf\u8bfe\u7a0b"),V.a.createElement(A.a.Button,{value:"3"},"\u4e92\u52a8\u8bfe\u7a0b"),V.a.createElement(A.a.Button,{value:"4"},"\u5b9e\u8bad\u8bfe\u7a0b"))))),O=V.a.createElement(h.a,null,V.a.createElement(f.a,{className:"paper-common paper-common-students"},V.a.createElement(S.a,{span:12,className:"paper-common-btn"},V.a.createElement(i.a,{type:"zh"===o.value?"primary":"",onClick:function(){return e.zhClick()}},"\u521b\u5efa\u65f6\u95f4","zh"===o.value?V.a.createElement(g.a,{type:o.zhOrder?"up":"down"}):""),V.a.createElement(i.a,{type:"sy"===o.value?"primary":"",onClick:function(){return e.syClick()}},"\u5b66\u4e60\u4eba\u6570","sy"===o.value?V.a.createElement(g.a,{type:o.syOrder?"up":"down"}):""),V.a.createElement(i.a,{type:"sc"===o.value?"primary":"",onClick:function(){return e.scClick()}},"\u6536\u85cf\u91cf","sc"===o.value?V.a.createElement(g.a,{type:o.scOrder?"up":"down"}):"")),V.a.createElement(S.a,{span:12},V.a.createElement("div",{className:"paper-common-search"},V.a.createElement(H,{style:{width:220},placeholder:"\u8bf7\u8f93\u5165\u8bfe\u7a0b\u540d\u79f0",onSearch:function(t){return e.getCourseCenter(t)}}),V.a.createElement("span",{className:"paper-common-totale"},"\u5171 ",E," \u4e2a\u8bfe\u7a0b")))),V.a.createElement(l.a,null),N&&0===N.length?V.a.createElement("div",{className:"no-content"},V.a.createElement(c.a,null)):V.a.createElement("div",null,V.a.createElement(f.a,null,N),V.a.createElement(f.a,null,V.a.createElement(S.a,{span:24,style:{textAlign:"right",marginTop:10,justifyContent:"flex-end"}},V.a.createElement(r.a,{showSizeChanger:!0,pageSizeOptions:["15","30","45","60"],onShowSizeChange:this.onShowSizeChange,onChange:this.onPageNumChange,defaultCurrent:1,current:d,pageSize:p,total:E,showTotal:function(e){return"\u5171 "+e+" \u6761"}}))))),k=V.a.createElement(f.a,{className:"center-content"},V.a.createElement(S.a,{span:5,className:"center-content-left"},V.a.createElement(h.a,null,b)),V.a.createElement(S.a,{span:19,className:"center-content-center"},V.a.createElement(f.a,{className:"center-content-search"},V.a.createElement(S.a,{span:24},j)),V.a.createElement(f.a,null,V.a.createElement(S.a,{span:24},O)))),w=V.a.createElement(f.a,{className:"center-content"},V.a.createElement(S.a,{span:5,className:"center-content-left"},V.a.createElement(h.a,null,b)),V.a.createElement(S.a,{span:19,className:"center-content-center"},V.a.createElement(f.a,{className:"center-content-search"},V.a.createElement(S.a,{span:24},j)),V.a.createElement(f.a,null,V.a.createElement(S.a,{span:24},O))));return V.a.createElement("div",{className:"course-center"},V.a.createElement(Y.default,{navName:"course-center"}),V.a.createElement("div",{className:"resources-pic"},V.a.createElement(f.a,{className:"center-title"},V.a.createElement(S.a,{span:24},V.a.createElement("span",{className:"center-title"},"\u8bfe\u7a0b\u4e2d\u5fc3"),V.a.createElement(D.a,{activeKey:y,onChange:this.callback.bind(this)},V.a.createElement(Z,{tab:"\u6821\u5185\u8bfe\u7a0b",key:"1"}),V.a.createElement(Z,{tab:"\u5e73\u53f0\u8bfe\u7a0b",key:"2"}),V.a.createElement(Z,{tab:"\u6211\u7684\u6536\u85cf ",key:"3"})))),2===v?k:3===v?w:V.a.createElement(J.default,{activeKey:y})))}}]),n}(F.Component);t.default=_}}]);