(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[111],{1780:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return c}));var s=a(4);function n(e){return Object(s.d)("/api/course/api/v1/courseExamType/editTeacherAndMajorAll",e)}function r(e){return Object(s.c)("/api/course/api/v1/courseExamType/getMajorTreeBystageId",e)}function c(e){return Object(s.c)("/api/course/api/v1/courseExamType/getMajorListByUserId",e)}},1837:function(e,t,a){},1849:function(e,t,a){"use strict";a.r(t);a(41);var s=a(8),n=a.n(s),r=(a(40),a(5)),c=a.n(r),d=(a(43),a(2)),i=a.n(d),o=(a(178),a(82)),l=a.n(o),h=a(20),u=a(3),p=a.n(u),f=a(7),y=a(9),k=a(12),I=a(52),C=a(11),g=a(10),v=(a(180),a(92)),m=a.n(v),j=a(0),b=a.n(j),T=a(75),K=a(1780),O=(a(1837),m.a.TreeNode),E=function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(y.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={stageList:[],courseTree:[],resourceParentKeys:[0],treeCheck:[],keys:1,stageId:"",actionType:"",schoolCode:"",seniorId:"",level:"",defaultCheckedKeys:[],unCheckedKeys:[],deleteType:0},e.renderTreeNodes=function(t){return t.map((function(t){!0===t.set&&(-1===e.state.unCheckedKeys.indexOf(t.id)&&e.state.defaultCheckedKeys.push(t.id));return t.children&&Object.keys(t.children).length>0?b.a.createElement(O,{defaultCheckedKeys:!0,title:b.a.createElement("div",{className:"TreeIcon",onClick:e.DeptonSelect.bind(Object(I.a)(e),t)},t.name),key:t.id,dataRef:t},t.children&&Object.keys(t.children).length>0?e.renderTreeNodes(t.children):""):b.a.createElement(O,{switcherIcon:b.a.createElement("span",{className:"TreeCircleIcon"}),title:t.name,key:t.id,value:t.id,dataRef:t})}))},e.renderTreeNodesleft=function(t){return t.map((function(t){return t?(1==t.set&&e.state.defaultCheckedKeys.push(t.id),t.children&&Object.keys(t.children).length>0?b.a.createElement(O,{title:b.a.createElement("div",{className:"TreeIcon",onClick:e.DeptonSelect.bind(Object(I.a)(e),t)},t.name),key:t.id,dataRef:t},t.children&&Object.keys(t.children).length>0?e.renderTreeNodesleft(t.children):""):b.a.createElement(O,{switcherIcon:b.a.createElement("span",{className:"TreeCircleIcon"}),title:t.name,key:t.id,value:t.id,dataRef:t})):void 0}))},e.classifyCheck=function(t,a){if(!1!==a.selected){sessionStorage.setItem("resourceLibraryKeys",[t,a.selectedNodes[0].props.dataRef.level?a.selectedNodes[0].props.dataRef.level:""]);var s=a.selectedNodes[0].props.dataRef,n=[0];if(3==s.level&&e.state.courseTree.length>0){!function e(t){return t.map((function(t){t.id!=s.parentId?e(t.children):n.push(t.parentId)}))}(e.state.courseTree)}n.push(a.selectedNodes[0].props.dataRef.parentId),n.push(t),sessionStorage.setItem("resourceParentKeys",n),e.setState({pageNum:1,catalogArray:t,catalogArrayChecked:t,selectCatalogId:t[0]},(function(){}))}},e.setUnCheck=function(t){t.forEach((function(t){e.state.unCheckedKeys.push(t.id),t.children&&Object.keys(t.children).length>0&&e.setUnCheck(t.children)}))},e.onCheck=function(t,a){!0===a.checked?"0"===t[0]?e.setState({defaultCheckedKeys:t}):e.state.defaultCheckedKeys.push(a.node.props.dataRef.id):!1===a.checked&&(0===t.length?(e.setUnCheck(e.state.treeCheck),e.setState({defaultCheckedKeys:t})):(e.setUnCheck(a.node.props.dataRef.children),e.state.unCheckedKeys.push(a.node.props.dataRef.id),e.setState({defaultCheckedKeys:t}))),e.state.level=a.node.props.dataRef?a.node.props.dataRef.level:0,e.state.seniorId=a.node.props.dataRef?a.node.props.dataRef.id:0;var s=[];a.halfCheckedKeys&&a.halfCheckedKeys.length>0&&t&&t.length>0?s=a.halfCheckedKeys.concat(t):a.halfCheckedKeys&&a.halfCheckedKeys.length>0?s=a.halfCheckedKeys:t&&t.length>0&&(s=t),"0"===t[0]?e.props.getStockInfo({stageId:e.state.stageId,seniorIdList:["0"]}):e.props.getStockInfo({stageId:e.state.stageId,seniorIdList:s})},e}return Object(k.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.stageId,t=this.props.schoolCode,a=this.props.roleId,s=this.props.departId;this.state.schoolCode=t,this.state.stageId=e,this.state.roleId=a,this.state.departId=s,this.getMajorTreeBystageId()}},{key:"componentWillReceiveProps",value:function(e){var t=this;"0"===e.stageId?this.setState({defaultCheckedKeys:[],unCheckedKeys:[]}):this.props.stageId!=e.stageId&&this.setState({stageId:e.stageId,defaultCheckedKeys:[],unCheckedKeys:[],deleteType:1,departId:e.departId},(function(){t.getMajorTreeBystageId()}))}},{key:"getMajorTreeBystageId",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,s,n,r,c,d,i=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.stageId,s=t.schoolCode,n=t.roleId,r=t.departId,c={stageId:a,schoolCode:s,roleId:n},r&&(c.departId=r),e.next=5,Object(K.c)(c);case 5:d=e.sent,this.setState({treeCheck:d},(function(){i.setState({defaultCheckedKeys:[],unCheckedKeys:[]})}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMajorListByUserId",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,s,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.stageId,t.actionType,s=t.schoolCode,t.seniorId,n={stageId:a,schoolCode:s},e.next=4,Object(K.b)(n);case 4:r=e.sent,this.setState({courseTree:r});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"callback",value:function(e){}},{key:"DeptonSelect",value:function(e,t){T.a.isEmpty(e.id)||(this.state.professionId=e.id,this.state.level=e.level,this.setState({hierarchy:e.hierarchy}))}},{key:"editTeacherAndMajor",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,s,n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.stageId,s=t.actionType,n=t.level,r=t.seniorId,c={stageId:a,actionType:s,level:n,seniorId:r},e.next=4,Object(K.a)(c);case 4:0==e.sent.code&&this.getMajorListByUserId();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteTreeData",value:function(e,t,a){var s=this;return e.map((function(e){return e&&e.id===t?{type:"delete",parentId:e.parentId}:e&&e.children&&e.children.length>0?Object(h.a)(Object(h.a)({},e),{},{children:s.deleteTreeData(e.children,t,a)}):e}))}},{key:"updateTreeData",value:function(e,t,a){var s=this;return e.map((function(e){return e&&e.id===t?(e.children.push(a),Object(h.a)({},e)):e&&e.children&&e.children.length>0?Object(h.a)(Object(h.a)({},e),{},{children:s.updateTreeData(e.children,t,a)}):e}))}},{key:"render",value:function(){var e=this.state,t=e.keys,a=e.treeCheck,s=e.defaultCheckedKeys;return 1===e.deleteType&&(this.state.defaultCheckedKeys=[],this.state.deleteType=0,this.state.treeCheck={}),b.a.createElement("div",{className:"set-specialty"},b.a.createElement(c.a,null,b.a.createElement(i.a,{span:24,className:"set-major"},b.a.createElement("p",null,"\u8bbe\u7f6e\u60a8\u7684\u4e13\u4e1a"),a&&a.length?b.a.createElement(l.a,{className:"my-collect-tree-lh tree-color-l",checkable:!0,onSelect:this.classifyCheck,onCheck:this.onCheck.bind(this),showIcon:!0,blockNode:!0,defaultSelectedKeys:[t,"0"],defaultExpandedKeys:[0],checkedKeys:s},b.a.createElement(O,{title:"\u5168\u90e8",key:"0"},this.renderTreeNodes(a))):"")))}}]),a}(j.Component),N=n.a.create()(E);t.default=N}}]);