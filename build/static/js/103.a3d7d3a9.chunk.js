(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[103],{2021:function(e,t,a){},2161:function(e,t,a){},2795:function(e,t,a){"use strict";a.r(t);a(41);var n,r=a(8),s=a.n(r),c=(a(109),a(72)),o=a.n(c),i=(a(177),a(110)),u=a.n(i),l=(a(74),a(17)),m=a.n(l),p=(a(135),a(73)),d=a.n(p),h=(a(40),a(5)),f=a.n(h),g=(a(45),a(6)),y=a.n(g),v=(a(43),a(2)),S=a.n(v),b=(a(67),a(28)),C=a.n(b),k=a(3),E=a.n(k),O=(a(54),a(15)),x=a.n(O),T=a(7),I=a(20),j=a(9),N=a(12),w=a(52),L=a(11),P=a(10),z=(a(51),a(22)),M=a.n(z),D=a(0),F=a.n(D),R=(a(2021),a(27)),V=a(182),A=a(39),_=a(240),U=a(93),Y=a(136),q=a(245),J=a(854),B=a(38),K=(a(2161),s.a.Item),$=function(e){Object(L.a)(a,e);var t=Object(P.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={fromValue:1,provinceData:[],cityData:[],countyData:[],typeList:[],examYearList:[],changePropertyStatus:"",examYear:"",examInfo:{},myUnit:{},courseList:[],examName:"\u554a\u554a\u554a\u963f\u4f69"},e.onProvinceChange=function(t,a){e.props.form.setFieldsValue({resourceCounty:"",resourceCity:""}),e.setState({provinceValue:t,cityData:[],countyData:[]},(function(){Object(J.b)({parentCode:t}).then((function(a){var n=a;t&&e.setState({cityData:n})}))}))},e.onCityChange=function(t,a){e.props.form.setFieldsValue({resourceCounty:""}),e.setState({cityValue:t,countyData:[]},(function(){Object(J.b)({parentCode:t}).then((function(a){var n=a;t&&e.setState({countyData:n})}))}))},e.handleResetForm=function(t){e.setState({provinceData:[],cityData:[],countyData:[],typeList:[],province:"",city:"",county:"",examInfo:{}}),e.props.form.resetFields()},e.getItemsValue=function(){return e.props.form.getFieldsValue()},e}return Object(N.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.examInfo!=e.examInfo;this.setState({examInfo:e.examInfo,changePropertyStatus:e.changePropertyStatus},(function(){if(a){var n=e.examInfo;""!==n.resourceProvince&&null!==n.resourceProvince&&t.getCity(n.resourceProvince),""!==n.resourceCity&&null!==n.resourceProvince&&t.getCounty(n.resourceCity)}}))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.examInfo,a=e.changePropertyStatus;this.setState({examInfo:t,examYear:t.createTime.substring(0,4),changePropertyStatus:a},(function(){})),this.getMyUnit(),this.getExamYearList(15),""!==t.resourceProvince&&null!==t.resourceProvince&&this.getCity(t.resourceProvince),""!==t.resourceCity&&null!==t.resourceProvince&&this.getCounty(t.resourceCity),this.getCourseMyCourse()}},{key:"getCourseMyCourse",value:function(){var e=Object(T.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(V.e)();case 2:t=e.sent,this.setState({courseList:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getExamYearList",value:function(e){for(var t=(new Date).getFullYear(),a=[],n=0;n<e;n++){var r={value:t-n};r.key=t-n,a.push(r)}this.setState({examYearList:a})}},{key:"getTypeList",value:function(){var e=Object(T.a)(E.a.mark((function e(){var t,a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.examInfo,a={stageId:t.stageId},e.next=4,Object(V.m)(a);case 4:(n=e.sent)&&n.length>0&&this.setState({typeList:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMyUnit",value:function(){var e=Object(T.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.f)();case 2:t=e.sent,this.setState({myUnit:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.examInfo;return F.a.createElement(s.a,Object.assign({layout:"horizontal",style:{paddingBottom:18}},{wrapperCol:{span:24}},{className:"change-modal"}),F.a.createElement(f.a,null,F.a.createElement(S.a,{span:4,className:"FormItem-lable",style:{paddingTop:7}},F.a.createElement("span",{className:"red"},"* "),"\u4f5c\u4e1a\u540d\u79f0\uff1a"),F.a.createElement(S.a,{span:19},F.a.createElement(K,null,e("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f5c\u4e1a\u540d\u79f0!"}],initialValue:t.title})(F.a.createElement(M.a,{maxLength:40}))))))}}]),a}(D.Component),G=s.a.create()($),W=a(35),H=a(243),Q=M.a.Search,X=Object(W.g)(n=function(e){Object(L.a)(n,e);var t=Object(P.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={userId:"",examList:[],bookId:"",subjectId:"",stageId:"",resourceId:"",changePropertyStatus:1,total:0,pageNum:1,pageSize:10,catalogId:"",selectType:"",myStageTo:"",shareModel:"",size:"small",orderDescfield:"a.create_time",orderAscfield:"",addTestModal:!1,isObligation:!0,isOrdinary:!1,examYearCheck:"",examInfo:{},nowSemester:{},btnListData:["1","2"],testListData:["1","2"],gapListListData:["1"],classifyListData:["1"],shareMode:[],myStageList:[],skipCourseModal:!1,courseDetail:{},searchValue:void 0,selectTab:1,historyType:"",sortSet:{value:"zh",zhOrder:!0,syOrder:!0,scOrder:!0},whetherClick:!0},e.zhClick=function(){var t=e.state.sortSet;"zh"===t.value?(t.zhOrder=!t.zhOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.zhOrder,"a.create_time")}))):e.setState({sortSet:Object(I.a)(Object(I.a)({},t),{},{zhOrder:!0,value:"zh"})},(function(){e.testOrderChange(t.zhOrder,"a.create_time")}))},e.syClick=function(){var t=e.state.sortSet;"sy"===t.value?(t.syOrder=!t.syOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.syOrder,"d.used_num")}))):e.setState({sortSet:Object(I.a)(Object(I.a)({},t),{},{syOrder:!0,value:"sy"})},(function(){e.testOrderChange(t.syOrder,"d.used_num")}))},e.scClick=function(){var t=e.state.sortSet;"sc"===t.value?(t.scOrder=!t.scOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.scOrder,"d.collect_num")}))):e.setState({sortSet:Object(I.a)(Object(I.a)({},t),{},{scOrder:!0,value:"sc"})},(function(){e.testOrderChange(t.scOrder,"d.collect_num")}))},e.testOrderChange=function(t,a){t?e.setState({orderAscfield:"",orderDescfield:a},(function(){e.getExamList()})):e.setState({orderAscfield:a,orderDescfield:""},(function(){e.getExamList()}))},e.addTestModal=function(t){e.setState({resourceId:t,addTestModal:!0})},e.courseTestSave=function(){e.AddTestForm.props.form.validateFields((function(t,a){if(!t){var n=e.state.resourceId,r=e.AddTestForm.getItemsValue();e.setState({courseDetail:r.course}),Object(A.h)({resourceId:n,stepId:r.stepId,courseId:r.courseId}).then((function(t){e.setState({addTestModal:!1,skipCourseModal:!0},(function(){setTimeout((function(){e.skipCourseRef.init()}),100)}))}))}}))},e.addTestCancel=function(){e.setState({addTestModal:!1})},e.changeSelect=function(t){var a=e.props.location.search.split("?")[1],n=a.includes("%")?decodeURI(a):a,r=JSON.parse(n);r.paperId=t.id,r.paperName=t.title,r.selectType=!0,r.activeKey=e.state.activeKey,"curDetailBusy"==r.backType||"questionBank"==r.backType?r.url="/teaching/my-course/my-curriculum-detail":r.url="/teaching/my-course/course-directory";var s=sessionStorage.addBusyBack?"replace":"push";e.props.history[s]("/teaching/my-course/add-busy?".concat(encodeURI(JSON.stringify(r))))},e.changePropertyModal=function(t){e.setState({examInfo:t,changePropertyStatus:1,changePropertyModal:!0})},e.resourceNameSearch=function(t){e.setState({pageNum:1,resourceName:t.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getExamList()}))},e.searchChange=function(t){e.setState({searchValue:t.target.value},(function(){e.setState({pageNum:1,resourceName:e.state.searchValue.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getExamList()}))}))},e.changePropertyCancel=function(){e.setState({changePropertyModal:!1},(function(){e.getExamList()}))},e.createCouse=function(t){t.preventDefault(),e.state.whetherClick&&e.setState({whetherClick:!1},(function(){e.ChangePropertyForm.props.form.validateFields(function(){var t=Object(T.a)(E.a.mark((function t(a,n){var r,s,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a||(r=e.ChangePropertyForm.getItemsValue(),s=Object(I.a)({examId:e.state.examInfo.id},r),Object(V.r)(s).then((function(t){x.a.success("\u4fee\u6539\u6210\u529f"),e.setState({changePropertyModal:!1},(function(){e.getExamList()}))})),c=Object(w.a)(e),setTimeout((function(){c.setState({whetherClick:!0})}),100));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())}))},e.regionChange=function(t){sessionStorage.setItem("completeTest",t.target.value),e.setState({myStageTo:t.target.value},(function(){e.getExamList()}))},e.handleSizeChange=function(t){e.setState({shareModel:t.target.value},(function(){e.getExamList()}))},e.deleteOne=function(t){var a=Object(w.a)(e);C.a.confirm({title:"\u63d0\u793a",content:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f\u5220\u9664\u540e\u5c06\u65e0\u6cd5\u6062\u590d!",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",okType:"danger",onOk:function(){a.state.whetherClick&&a.setState({whetherClick:!0},(function(){Object(V.d)({id:t}).then((function(e){0===e.code&&(x.a.success("\u5220\u9664\u6210\u529f!"),a.getExamList())})),setTimeout((function(){a.setState({whetherClick:!0})}),100)}))},onCancel:function(){}})},e.selectChange=function(t){var a=e.state.nowSemester;"a"===t.target.value?e.setState({selectType:2,startTime:"",endTime:""},(function(){e.getExamList()})):"b"===t.target.value?e.setState({selectType:3,startTime:a.startTime,endTime:a.endTime},(function(){e.getExamList()})):"b"===t.target.value?e.setState({selectType:4,startTime:"",endTime:""},(function(){e.getExamList()})):e.setState({selectType:"",startTime:"",endTime:""},(function(){e.getExamList()}))},e.onShowSizeChange=function(t,a){e.setState({pageNum:1,pageSize:a},(function(){e.getExamList()}))},e.onPageNumChange=function(t,a){e.setState({pageNum:t},(function(){e.getExamList()}))},e.linkToGroup=function(t){e.props.history.push("/teching/group-centers/"+t)},e}return Object(N.a)(n,[{key:"componentDidMount",value:function(){var e,t,a,n,r=this,s=this.props.location.search,c="";s&&(a=(e=s.split("?")[1]).includes("%")?decodeURI(e):e,n=(t=JSON.parse(a)).xzType,c=t.activeKey),this.setState({userId:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).user.id:"",historyType:n,activeKey:c},(function(){r.getExamList()}))}},{key:"getExamList",value:function(){var e=Object(T.a)(E.a.mark((function e(){var t,a,n,r,s,c,o,i,u,l,m;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.pageNum,n=t.orderDescfield,r=t.orderAscfield,s=t.myStageTo,c=t.pageSize,o=t.selectTab,i=t.searchValue,u=t.resourceName,l={pageNum:a,pageSize:c,orderDescfield:n,orderAscfield:r,courseExamName:i,resourceName:u,confSubjectId:sessionStorage.getItem("completeTest")?sessionStorage.getItem("completeTest"):s,selectTab:o},e.next=4,Object(V.h)(l);case 4:m=e.sent,this.setState({examList:m?m.data:"",total:m?m.total:0});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getNowSemester",value:function(){var e=Object(T.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(V.j)(t);case 2:a=e.sent,this.setState({nowSemester:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"shareMode",value:function(){var e=Object(T.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.o)(t);case 2:a=e.sent,this.setState({shareMode:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectone",value:function(){var e=Object(T.a)(E.a.mark((function e(t,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.shareModel=t,this.setState({examInfo:a,changePropertyStatus:2,changePropertyModal:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getSubjectByLogin",value:function(){var e=Object(T.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.x)({});case 2:a=e.sent,n=[{subjectName:"\u5168\u90e8",id:""}].concat(a),this.setState({myStageTo:t||(sessionStorage.getItem("completeTest")?sessionStorage.getItem("completeTest"):n[0].id),myStageList:n}),this.getExamList();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMyStageList",value:function(){var e=Object(T.a)(E.a.mark((function e(){var t,a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.u)({});case 2:t=e.sent,a=[{subjectName:"\u5168\u90e8",subjectId:""}],t.forEach((function(e){e.subjectList.forEach((function(t){var n={subjectName:e.stageName+t.subjectName,subjectId:e.stageId+"-"+t.id};a.push(n)}))})),n=a[0].subjectId.split("-"),this.setState({stageId:n[0],subjectId:n[1],myStageTo:sessionStorage.getItem("completeTest")?sessionStorage.getItem("completeTest"):a[0].subjectId,myStageList:a}),this.getExamList();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"linkToDetails",value:function(){var e=Object(T.a)(E.a.mark((function e(t,a){var n,r,s,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.id,a.stopPropagation(),0===window.getSelection().toString().length&&("xz"==this.state.historyType?(r=this.props.location.search,s=r.split("?")[1],c=s.includes("%")?decodeURI(s):s,JSON.parse(c),this.props.history.push("/teching/test-detail/complete-test:".concat(n,"?").concat(s))):this.props.history.push("/teching/test-detail/complete-test:"+n));case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"closeSkipCourseModel",value:function(){this.setState({skipCourseModal:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.total,r=t.pageNum,s=t.pageSize,c=t.examList,i=t.addTestModal,l=t.changePropertyModal,p=t.skipCourseModal,h=t.courseDetail,g=t.searchValue,v=t.sortSet,b=t.historyType,k=c&&c.length?c.map((function(t,n){return F.a.createElement(d.a,{key:n,title:F.a.createElement("div",{onClick:function(a){return e.linkToDetails(t,a)}},F.a.createElement("img",{style:{marginRight:12},src:a(939),alt:""}),t.title),bordered:!1},F.a.createElement(f.a,{type:"flex",justify:"space-around",className:"question-container"},F.a.createElement(S.a,{span:18,className:"question-bottom"},F.a.createElement("div",{className:"question-bottom-left"},F.a.createElement("div",{className:"question-bottom-doc"},F.a.createElement("span",null,"\u521b\u5efa\u65f6\u95f4\uff1a",t.createTime),F.a.createElement("span",null,"\u5f15\u7528\uff1a",t.usedNum),F.a.createElement("span",null,"\u9898\u91cf\uff1a",t.testNum),F.a.createElement("span",null,"\u6536\u85cf\uff1a",t.collectNum),F.a.createElement("span",null,"\u6765\u6e90\uff1a",t.humanName)))),F.a.createElement(S.a,{span:6,className:"question-bottom-right"},"xz"==b?F.a.createElement(y.a,{style:{marginRight:"10"},onClick:function(){return e.changeSelect(t)}},"\u9009\u62e9"):F.a.createElement(F.a.Fragment,null,F.a.createElement(y.a,{style:{marginRight:"10"},onClick:function(){return e.changePropertyModal(t)}},"\u7f16\u8f91"),F.a.createElement(y.a,{style:{marginRight:"10"},onClick:function(){return e.deleteOne(t.id)}},"\u5220\u9664")))))})):"";return F.a.createElement("div",{className:"complete-test teach-main"},F.a.createElement("div",{className:"text-library-boxs teach-main-box"},"xz"==b?F.a.createElement(_.a,null):F.a.createElement(U.a,{navName:"complete-test"}),F.a.createElement("div",{className:"library-main teach-main-cont"},F.a.createElement(f.a,{className:"complete-title"},F.a.createElement(S.a,{span:24},F.a.createElement("span",null,"\u6211\u7684\u4f5c\u4e1a\u5e93"),F.a.createElement(q.a,{defaultKeys:"1"}))),F.a.createElement(f.a,null,F.a.createElement("div",{className:"paper-right-top"},F.a.createElement("div",{className:"paper-right-bottom"},F.a.createElement("div",{className:"select_top_test"},F.a.createElement("div",{className:"left"},F.a.createElement(S.a,{span:22,className:"paper-common-btn"},F.a.createElement(y.a,{type:"zh"===v.value?"primary":"",onClick:function(){return e.zhClick()}},"\u521b\u5efa\u65f6\u95f4","zh"===v.value?F.a.createElement(m.a,{type:v.zhOrder?"down":"up"}):""),F.a.createElement(y.a,{type:"sy"===v.value?"primary":"",onClick:function(){return e.syClick()}},"\u5f15\u7528\u91cf","sy"===v.value?F.a.createElement(m.a,{type:v.syOrder?"down":"up"}):""),F.a.createElement(y.a,{type:"sc"===v.value?"primary":"",onClick:function(){return e.scClick()}},"\u6536\u85cf\u91cf","sc"===v.value?F.a.createElement(m.a,{type:v.scOrder?"down":"up"}):""))),F.a.createElement("div",{className:"right"},F.a.createElement(Q,{placeholder:"\u8bf7\u8f93\u5165\u4f5c\u4e1a\u540d\u79f0",value:g,onSearch:function(t){return e.resourceNameSearch(t)},onChange:this.searchChange}),F.a.createElement("span",{className:"count"},"\u5171",n,"\u4efd\u4f5c\u4e1a"))),c&&c.length>0?F.a.createElement("div",null,k,n?F.a.createElement("div",{className:"pagination-style-l"},F.a.createElement(u.a,{showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,onChange:this.onPageNumChange,defaultCurrent:1,current:r,pageSize:s,total:n,showTotal:function(e){return"\u5171 "+e+" \u6761"}})):""):F.a.createElement(o.a,{className:"empty-l"}))))),F.a.createElement(C.a,{className:"modal-btn-test",visible:i,title:"\u6dfb\u52a0\u5230\u6211\u7684\u8bfe\u7a0b",onOk:this.handleAccredit,onCancel:this.addTestCancel,keyboard:!1,maskClosable:!1,footer:[F.a.createElement(y.a,{key:"back",onClick:this.addTestCancel},"\u53d6\u6d88"),F.a.createElement(y.a,{key:"submit",type:"primary",onClick:this.courseTestSave},"\u4fdd\u5b58")]},F.a.createElement(Y.default,{wrappedComponentRef:function(t){e.AddTestForm=t}})),F.a.createElement(C.a,{className:"modal-btn skip-coures-modal",visible:p,onCancel:function(){return e.setState({skipCourseModal:!1})},footer:null,keyboard:!1,maskClosable:!1},F.a.createElement(H.a,{courseDetail:h,closeModel:this.closeSkipCourseModel.bind(this),onRef:function(t){return e.skipCourseRef=t}})),l?F.a.createElement(C.a,{className:"modal-btn-test modal-style-lll",visible:l,title:"\u4fee\u6539\u4f5c\u4e1a\u540d\u79f0",onOk:this.handleAccredit,onCancel:this.changePropertyCancel,width:"650px",keyboard:!1,maskClosable:!1,footer:[F.a.createElement(y.a,{key:"back",onClick:this.changePropertyCancel},"\u53d6\u6d88"),F.a.createElement(y.a,{key:"submit",type:"primary",onClick:this.createCouse},"\u4fdd\u5b58")]},F.a.createElement(G,{examInfo:this.state.examInfo,changePropertyStatus:this.state.changePropertyStatus,wrappedComponentRef:function(t){e.ChangePropertyForm=t}})):""))}}]),n}(D.Component))||n,Z=s.a.create()(X);t.default=Z}}]);