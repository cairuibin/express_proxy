(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[101],{1875:function(e,a,t){},1911:function(e,a,t){"use strict";var n=t(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},l=t(238),i=function(e,a){return n.createElement(l.a,Object.assign({},e,{ref:a,icon:s}))};i.displayName="PlusOutlined";a.a=n.forwardRef(i)},2009:function(e,a,t){"use strict";var n=t(0),s={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},l=t(238),i=function(e,a){return n.createElement(l.a,Object.assign({},e,{ref:a,icon:s}))};i.displayName="LoadingOutlined";a.a=n.forwardRef(i)},2076:function(e,a,t){"use strict";t.r(a);t(109);var n=t(72),s=t.n(n),l=(t(155),t(53)),i=t.n(l),r=(t(278),t(156)),c=t.n(r),m=(t(382),t(168)),o=t.n(m),u=(t(40),t(5)),d=t.n(u),p=(t(43),t(2)),f=t.n(p),h=t(3),g=t.n(h),v=t(7),E=t(98),b=(t(54),t(15)),k=t.n(b),N=t(144),S=t(9),y=t(12),j=t(11),C=t(10),w=(t(51),t(22)),O=t.n(w),x=(t(41),t(8)),T=t.n(x),L=t(0),D=t.n(L),I=t(2009),M=t(1911),q=(t(1875),t(27)),V=t(36),Y=t.n(V),z=["Apple","Orange"],A=T.a.Item,H=O.a.TextArea;function R(e,a){var t=new FileReader;t.addEventListener("load",(function(){return a(t.result)})),t.readAsDataURL(e)}var F=function(e){Object(j.a)(t,e);var a=Object(C.a)(t);function t(){var e;Object(S.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={open:!1,checkedList:z,indeterminate:!0,checkAll:!1,taskName:"",taskStartTime:"",applicationType:"",taskEndTime:void 0,taskExplain:"",myStageList:[],myStageTo:"",id:"",loading:!1,fileList:[],acceptType:".jpeg,.png,.gif,.jpg",liveDetail:{},fileId:"",ids:[],disableId:[],playbackSupported:1,imageUrl:e.props.liveDetail.livePic?"/api/media/api/v1/media/showThumbnail/"+e.props.liveDetail.livePic:null,inval:"",invalNum:""},e.onSubjectChange=function(a){var t=e.state.myStageList;e.setState({ids:a,indeterminate:!!a.length&&a.length<t.length,checkAll:a.length===t.length})},e.onCheckAllChange=function(a){var t=e.state.myStageList.map((function(e){return e.id}));e.setState({ids:a.target.checked?t:[],indeterminate:!1,checkAll:a.target.checked})},e.getItemsValue=function(){var a=e.props.form.getFieldsValue();return a.ids=e.state.ids.join(","),a.taskStatus=e.state.taskStatus,a.liveId=e.state.id,a},e.disabledStartDate=function(a){var t=(new Date).getTime()-864e5,n=e.state.taskEndTime;return a.valueOf()<t?a.valueOf()<t:!(!a||!n)&&a.valueOf()>n.valueOf()},e.disabledEndDate=function(a){var t=(new Date).getTime()-864e5,n=e.state.startValue;return a.valueOf()<t?a.valueOf()<t:!(!a||!n)&&a.valueOf()<=n.valueOf()},e.onStartChange=function(a){e.onChange("startValue",a)},e.onEndChange=function(a){e.onChange("endValue",a)},e.onChange=function(a,t){e.setState(Object(N.a)({},a,t))},e.beforefn=function(a){var t=e.state.acceptType.split(","),n=a.file.name,s=n.substring(n.lastIndexOf("."),n.length);if(t.includes(s)){if(!(a.file.size/1024/1024<5))return k.a.error("\u6587\u4ef6\u4e0d\u80fd\u5927\u4e8e5M"),!1;e.setState({loading:!0}),e.fileChange(a)}else k.a.error("\u4e0d\u652f\u6301\u7684\u6587\u4ef6\u683c\u5f0f")},e.uploadRemove=function(a){e.state.fileTitle="",e.setState({result:{},fileId:void 0})},e.fileChange=function(a){if(a){var t=Object(E.a)(a.fileList);if(t=(t=t.slice(-1)).map((function(e){return e.response&&(e.url=e.response.url),e})),e.setState({fileList:t}),"done"===a.file.status)if(R(a.file.originFileObj,(function(a){return e.setState({imageUrl:a,loading:!1})})),0===a.file.response.code){var n=a.file.response.result;e.setState({result:n,fileId:n.id,fileTitle:""}),k.a.success("".concat(a.file.name," \u4e0a\u4f20\u6210\u529f"))}else e.setState({result:{},fileList:[],fileId:void 0,fileTitle:""}),k.a.error(a.file.response.message);else"error"===a.file.status&&(e.setState({result:{},fileList:[],fileId:void 0}),e.props.form.setFieldsValue({fileObj:void 0}),k.a.error("".concat(a.file.name," \u4e0a\u4f20\u5931\u8d25")))}},e.changeChat=function(a){e.setState({inval:a.target.value})},e.changeChat2=function(a){e.setState({invalNum:a.target.value})},e}return Object(y.a)(t,[{key:"componentWillMount",value:function(){var e=this,a=this.props.liveDetail;this.setState({taskName:a.taskName,taskStartTime:a.taskStartTime,taskEndTime:a.taskEndTime,id:a.id,fileId:a.livePic,taskExplain:a.taskExplain,disableId:a.subjectList,taskStatus:a.taskStatus,playbackSupported:a.playbackSupported,inval:a.taskName,invalNum:a.taskExplain}),a.subjectList.map((function(a,t){e.state.ids.push(a.subjectId)}))}},{key:"componentDidMount",value:function(){this.getSubjectByLogin()}},{key:"getSubjectByLogin",value:function(){var e=Object(v.a)(g.a.mark((function e(a){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.x)({});case 2:t=e.sent,this.setState({myStageTo:t[0].id,myStageList:t});case 4:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"disabledDate",value:function(e){return e<Y()().subtract(1,"day")}},{key:"render",value:function(){var e,a=this,t={labelCol:{span:5},wrapperCol:{span:19}},n=D.a.createElement("div",null,this.state.loading?D.a.createElement(I.a,null):D.a.createElement(M.a,null),D.a.createElement("div",{className:"ant-upload-text"},"\u56fe\u7247")),l=this.state,r=l.myStageList,m=l.taskName,u=l.taskExplain,p=l.taskEndTime,h=l.taskStartTime,g=(l.id,l.imageUrl),v=l.fileId,E=l.fileList,b=l.ids,k={action:"/api/media/api/v1/media/addMedia",onChange:this.beforefn,onRemove:this.uploadRemove},S=this.props.form.getFieldDecorator;return D.a.createElement(T.a,{className:"live-form",layout:"horizontal",style:{paddingBottom:18}},D.a.createElement(d.a,{className:"live-row"},D.a.createElement(f.a,{span:5},D.a.createElement("span",{className:"create-course-title "},D.a.createElement("span",{className:"red"},"*"),"\u76f4\u64ad\u4efb\u52a1\u540d\u79f0\uff1a")),D.a.createElement(f.a,{span:19,className:"formItem-sty"},D.a.createElement(A,t,S("taskName",{initialValue:m,rules:[{required:!0,message:"\u76f4\u64ad\u4efb\u52a1\u540d\u79f0\u4e3a\u7a7a"}]})(D.a.createElement(O.a,(e={className:"input-text",maxLength:15},Object(N.a)(e,"maxLength",15),Object(N.a)(e,"value",this.state.inval),Object(N.a)(e,"onChange",(function(e){return a.changeChat(e)})),e))),D.a.createElement("span",{style:{position:"absolute",bottom:"-13px",right:"10px",userSelect:"none"}},this.state.inval.length,"/15")))),D.a.createElement(d.a,{className:"live-row"},D.a.createElement(f.a,{span:5},D.a.createElement("span",{className:"create-course-title "},D.a.createElement("span",{className:"red"},"*"),"\u76f4\u64ad\u5f00\u59cb\u65f6\u95f4\uff1a")),D.a.createElement(f.a,{span:19,className:"time-wap"},D.a.createElement(A,null,S("taskStartTime",{initialValue:h?Y()(h||"YYYY-MM-DD HH:mm:ss"):void 0,rules:[{required:!0,message:"\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a!"}]})(D.a.createElement(o.a,{disabledDate:this.disabledStartDate,onChange:this.onStartChange,showTime:!0}))))),D.a.createElement(d.a,{className:"live-row"},D.a.createElement(f.a,{span:5},D.a.createElement("span",{className:"create-course-title "},D.a.createElement("span",{className:"red"},"*"),"\u76f4\u64ad\u7ed3\u675f\u65f6\u95f4\uff1a")),D.a.createElement(f.a,{span:19,className:"time-wap"},D.a.createElement(A,null,S("taskEndTime",{initialValue:p?Y()(p||"YYYY-MM-DD HH:mm:ss"):void 0,rules:[{required:!0,message:"\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a!"}]})(D.a.createElement(o.a,{format:"YYYY-MM-DD HH:mm:ss",disabledDate:this.disabledEndDate,onChange:this.onEndChange,showTime:!0}))))),D.a.createElement(d.a,{className:"live-row"},D.a.createElement(f.a,{span:5},D.a.createElement("span",{className:"create-course-title "},D.a.createElement("span",{className:"red"},"*"),"\u4efb\u52a1\u5c01\u9762\uff1a")),D.a.createElement(f.a,{span:5},D.a.createElement(A,{className:"upload-lu"},S("fileId",{initialValue:v,rules:[{required:!0,message:"\u4efb\u52a1\u5c01\u9762\u4e0d\u80fd\u4e3a\u7a7a!"}]})(D.a.createElement(c.a,Object.assign({showUploadList:!1,name:"file",listType:"picture-card",className:"avatar-uploader"},k,{fileList:E}),g?D.a.createElement("img",{src:g,alt:"avatar",style:{width:"100%"}}):n)))),D.a.createElement(f.a,{span:11,className:"suggest-l"},D.a.createElement("p",null,"\u652f\u6301jpg/gif/png/jpeg\u683c\u5f0f\uff0c"),D.a.createElement("p",null,"\u5efa\u8bae\u6700\u4f73\u5c3a\u5bf8750X422px\uff0c\u4e0d\u8d85\u8fc75M"))),D.a.createElement(d.a,{className:"live-row"},D.a.createElement(f.a,{span:5},D.a.createElement("span",{className:"create-course-title "},"\u76f4\u64ad\u8bf4\u660e\uff1a ")),D.a.createElement(f.a,{span:19,className:"text-wap"},D.a.createElement(A,Object.assign({},t,{className:"FormItem-textarea"}),S("taskExplain",{initialValue:u})(D.a.createElement(H,{className:"textarea-text",style:{resize:"none"},rows:4,maxLength:100,value:this.state.invalNum,onChange:function(e){return a.changeChat2(e)}})),D.a.createElement("span",{style:{position:"absolute",bottom:"-3px",right:"10px",userSelect:"none"}},this.state.invalNum?this.state.invalNum.length:0,"/100")))),D.a.createElement(d.a,{className:"live-row live-active"},D.a.createElement(f.a,{span:5},D.a.createElement("span",{className:"create-course-title "},D.a.createElement("span",{className:"red"},"*"),"\u76f4\u64ad\u8303\u56f4\uff1a ")),D.a.createElement(f.a,{span:24},D.a.createElement("div",{className:"conet"},D.a.createElement(A,t,D.a.createElement("div",{className:"site-checkbox-all-wrapper"},D.a.createElement(i.a,{indeterminate:this.state.indeterminate,onChange:this.onCheckAllChange,checked:this.state.checkAll},"\u5168\u9009\uff08\u9009\u62e9\u540e\u53ea\u6709\u8be5\u8bfe\u7a0b\u4e0b\u7684\u5b66\u5458\u624d\u80fd\u8fdb\u5165\u76f4\u64ad\uff09")),D.a.createElement("div",{className:"site-wap"},D.a.createElement(i.a.Group,{onChange:this.onSubjectChange,value:b},r&&r.length>0?r.map((function(e,a){return D.a.createElement(i.a,{value:e.id,title:e.subjectName,key:e.id,checked:"true"},e.subjectName)})):D.a.createElement(s.a,null))))))))}}]),t}(L.Component),B=T.a.create()(F);a.default=B}}]);