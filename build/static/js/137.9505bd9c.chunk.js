(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[137],{2320:function(e,t,a){},2730:function(e,t,a){"use strict";a.r(t);a(41);var r,s=a(8),o=a.n(s),n=(a(67),a(28)),c=a.n(n),i=(a(109),a(72)),u=a.n(i),l=(a(177),a(110)),d=a.n(l),m=(a(74),a(17)),p=a.n(m),h=(a(97),a(14)),g=a.n(h),y=(a(40),a(5)),f=a.n(y),v=(a(45),a(6)),S=a.n(v),b=(a(43),a(2)),C=a.n(b),I=a(98),k=a(3),N=a.n(k),E=a(7),O=(a(54),a(15)),T=a.n(O),w=a(20),j=a(9),L=a(12),R=a(52),P=a(11),x=a(10),D=(a(79),a(30)),V=a.n(D),K=(a(178),a(82)),M=a.n(K),_=(a(204),a(101)),z=a.n(_),A=(a(51),a(22)),U=a.n(A),F=a(0),Y=a.n(F),B=a(75),J=(a(2320),a(44)),$=a(27),q=a(209),H=a(240),W=a(541),G=a(318),Q=(a(99),a(35)),X=a(93),Z=a(322),ee=a(542),te=a(320),ae=a(323),re=a(111),se=U.a.Search,oe=(z.a.TabPane,M.a.TreeNode),ne=V.a.Option,ce=Object(Q.g)(r=function(e){Object(P.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(j.a)(this,r);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={userId:"",subjectList:[],mySubjectList:[],courseTree:[],selectCatalogId:void 0,subjectKnowledgePointTree:[],bookId:void 0,stageId:void 0,subjectId:void 0,catalogStageId:void 0,catalogSubjectId:void 0,knowledgeStageId:void 0,knowledgeSubjectId:void 0,catalogArray:[],catalogArrayChecked:[],pointsArray:[],pointsArrayChecked:[],size:"small",isObligation:!0,isOrdinary:!1,money:!1,resourceList:[],sortSet:{value:"zh",zhOrder:!0,fbOrder:!0,syOrder:!0,scOrder:!0},total:0,pageNum:1,pageSize:16,activeKey:"3",createUserId:void 0,myUnitId:"",courseCloudFlag:"1",resourceName:"",resourceFormatList:re.e,examYearList:[],testSourceList:[{label:"\u6570\u5b57\u6559\u6750",value:"4"},{label:"\u6821\u5185\u5171\u4eab",value:"2"},{label:"\u4e91\u5171\u4eab",value:"1"}],unitList:[],unitListAll:[],testSourceValue:"",resourceYearCheck:"",selectType:"",shareModel:"",unitId:"",resourceProvince:"",resourceCity:"",resourceCounty:"",orderAscfield:"",orderDescfield:"a.create_time",recommendCourseModal:!1,courseTemplateModal:!1,provinceData:[],cityData:[],countyData:[],addressVisible:!1,examYearVisible:!1,testSourceVisible:!1,resourceProvinceName:"",resourceCityName:"",resourceCountyName:"",examYearName:"",searchValue:void 0,searchValueSchool:void 0,searchValueCourse:void 0,resourceDetailModal:!1,resourceId:"",schoolDisplay:"hide",CourseDisplay:"hide",addResource:"",checkedSubject:"",url:"",hierarchy:"",courseId:"",catalogId:"",classroomId:"",level:"",professionId:"",stepId:"",keys:"",defaultKeys:"",levels:"",resourceParentKeys:[],backTypeCourse:"",randomkey:e.randomkey(),resourcesPlatform_1:sessionStorage.getItem("resourcesPlatform_1")?sessionStorage.getItem("resourcesPlatform_1"):"",resourcesPlatform_2:sessionStorage.getItem("resourcesPlatform_2")?sessionStorage.getItem("resourcesPlatform_2"):"",isClick:!0,handIsShow:!1},e.onProvinceChange=function(t,a){var r=t.target.value,s=""===r?"":r.value,o=""===r?"":r.title;e.setState({resourceProvince:s,resourceCity:"",resourceCounty:"",resourceProvinceName:o,resourceCityName:"",resourceCountyName:"",cityData:[],countyData:[]},(function(){e.getResourceList(),Object($.w)({parentCode:s}).then((function(t){s?e.setState({cityData:t}):e.setState({addressVisible:!1})}))}))},e.onCityChange=function(t,a){var r=t.target.value,s=""===r?"":r.value,o=""===r?"":r.title;e.setState({resourceCity:s,resourceCounty:"",resourceCityName:o,resourceCountyName:"",countyData:[]},(function(){e.getResourceList(),Object($.w)({parentCode:s}).then((function(t){s?e.setState({countyData:t}):e.setState({addressVisible:!1})}))}))},e.onCountyChange=function(t,a){var r=t.target.value,s=""===r?"":r.value,o=""===r?"":r.title;e.setState({resourceCounty:s,resourceCountyName:o,addressVisible:!1},(function(){return e.getResourceList()}))},e.resourceTypeChange=function(t){sessionStorage.setItem("resourcesPlatform_1",t.target.value),e.setState({pageNum:1,resourcesPlatform_1:t.target.value},(function(){e.getResourceList()}))},e.resourceFormatChange=function(t){sessionStorage.setItem("resourcesPlatform_2",t.target.value),e.setState({pageNum:1,resourcesPlatform_2:t.target.value},(function(){e.getResourceList()}))},e.shareModelChange=function(t){e.setState({pageNum:1,shareModel:t.target.value},(function(){e.getResourceList()}))},e.testSourceChange=function(t){var a=t.target.value;""===a||"1"===a||"2"===a||"4"===a?e.setState({pageNum:1,shareModel:a,testSourceValue:a,unitId:"",testSourceVisible:!1},(function(){e.getResourceList()})):e.setState({pageNum:1,shareModel:"5",unitId:a,testSourceValue:a,testSourceVisible:!1},(function(){e.getResourceList()}))},e.examYearChange=function(t){var a=t.target.value;e.setState({examYearName:""===a?"":a.key}),a&&"\u66f4\u65e9"===a.key?e.setState({pageNum:1,resourceYearCheck:a.value,selectType:1,examYearVisible:!1},(function(){e.getResourceList()})):e.setState({pageNum:1,resourceYearCheck:a.value,selectType:0,examYearVisible:!1},(function(){e.getResourceList()}))},e.zhClick=function(){var t=e.state.sortSet;"zh"===t.value?(t.zhOrder=!t.zhOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.zhOrder,"a.create_time")}))):e.setState({sortSet:Object(w.a)(Object(w.a)({},t),{},{zhOrder:!0,value:"zh"})},(function(){e.testOrderChange(t.zhOrder,"a.create_time")}))},e.fbClick=function(){var t=e.state.sortSet;"fb"===t.value?(t.fbOrder=!t.fbOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.fbOrder,"a.create_time")}))):e.setState({sortSet:Object(w.a)(Object(w.a)({},t),{},{fbOrder:!0,value:"fb"})},(function(){e.testOrderChange(t.fbOrder,"a.create_time")}))},e.syClick=function(){var t=e.state.sortSet;"sy"===t.value?(t.syOrder=!t.syOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.syOrder,"a.used_num")}))):e.setState({sortSet:Object(w.a)(Object(w.a)({},t),{},{syOrder:!0,value:"sy"})},(function(){e.testOrderChange(t.syOrder,"a.used_num")}))},e.scClick=function(){var t=e.state.sortSet;"sc"===t.value?(t.scOrder=!t.scOrder,e.setState({sortSet:t},(function(){e.testOrderChange(t.scOrder,"a.collect_num")}))):e.setState({sortSet:Object(w.a)(Object(w.a)({},t),{},{scOrder:!0,value:"sc"})},(function(){e.testOrderChange(t.scOrder,"a.collect_num")}))},e.testOrderChange=function(t,a){t?e.setState({pageNum:1,orderAscfield:"",orderDescfield:a},(function(){e.getResourceList()})):e.setState({pageNum:1,orderAscfield:a,orderDescfield:""},(function(){e.getResourceList()}))},e.searchChange=function(t){e.setState({searchValue:t.target.value},(function(){e.setState({pageNum:1,resourceName:e.state.searchValue.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getResourceList()}))}))},e.resourceNameSearch=function(t){e.setState({pageNum:1,resourceName:t.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getResourceList()}))},e.searchChangeSchool=function(t){e.setState({searchValueSchool:t.target.value},(function(){e.setState({pageNum:1,resourceName:e.state.searchValueSchool.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getResourceList()}))}))},e.resourceNameSearchSchool=function(t){e.setState({pageNum:1,resourceName:t.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getResourceList()}))},e.searchChangeCourse=function(t){e.setState({searchValueCourse:t.target.value},(function(){e.setState({pageNum:1,resourceName:e.state.searchValueCourse.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getResourceList()}))}))},e.resourceNameSearchCourse=function(t){e.setState({pageNum:1,resourceName:t.replace(/(^\s*)|(\s*$)/g,"")},(function(){e.getResourceList()}))},e.onShowSizeChange=function(t,a){e.setState({pageNum:1,pageSize:a},(function(){e.getResourceList()}))},e.onPageNumChange=function(t,a){e.setState({pageNum:t},(function(){e.getResourceList()}))},e.tabChange=function(t){"1"===t?e.setState({pageNum:1,activeKey:t,createUserId:void 0,courseCloudFlag:"1",courseCollectFlag:"",shareModel:"",testSourceValue:"",schoolDisplay:"hide",CourseDisplay:"hide"},(function(){return e.getResourceList()})):"2"===t?e.setState({pageNum:1,activeKey:t,createUserId:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).user.id:"",courseCloudFlag:"",courseCollectFlag:"",resourceYearCheck:"",shareModel:"",testSourceValue:"",unitId:"",resourceProvinceName:"",resourceCityName:"",resourceCountyName:"",examYearName:"",resourceProvince:"",resourceCity:"",resourceCounty:"",cityData:[],countyData:[],searchValueSchool:"",searchValueCourse:"",searchValue:"",schoolDisplay:"hide",CourseDisplay:"show"},(function(){return e.getResourceList()})):"3"===t?e.setState({pageNum:1,activeKey:t,createUserId:void 0,courseCloudFlag:"",courseCollectFlag:"1",shareModel:"",testSourceValue:"",schoolDisplay:"show",CourseDisplay:"show",searchValueSchool:"",searchValueCourse:"",searchValue:""},(function(){return e.getResourceList()})):e.setState({pageNum:1,activeKey:t,createUserId:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).user.id:"",courseCloudFlag:"",courseCollectFlag:"",resourceYearCheck:"",shareModel:"",testSourceValue:"",unitId:"",resourceProvinceName:"",resourceCityName:"",resourceCountyName:"",examYearName:"",resourceProvince:"",resourceCity:"",resourceCounty:"",cityData:[],countyData:[],searchValueSchool:"",searchValueCourse:"",searchValue:"",schoolDisplay:"hide",CourseDisplay:"hide"},(function(){return e.getResourceList()}))},e.obligationClick=function(){var t=e.state,a=t.catalogStageId,r=t.catalogSubjectId,s=t.catalogArrayChecked;e.setState({stageId:a,subjectId:r,catalogArray:s,pointsArray:[],isObligation:!0,isOrdinary:!1,pageNum:1,resourceList:[],total:0},(function(){return e.getResourceList()}))},e.ordinaryOnClick=function(){var t=e.state,a=t.knowledgeStageId,r=t.knowledgeSubjectId,s=t.pointsArrayChecked;e.setState({stageId:a,subjectId:r,catalogArray:[],pointsArray:s,isOrdinary:!0,isObligation:!1,pageNum:1,resourceList:[],total:0},(function(){return e.getResourceList()}))},e.bookChange=function(t){var a=e.state.subjectList,r="",s="";sessionStorage.setItem("resourceBookId",t),sessionStorage.setItem("resourceLibraryKeys",[]),sessionStorage.setItem("resourceParentKeys",""),sessionStorage.setItem("resourceLibraryKeys",[]),sessionStorage.setItem("resourcesPlatform_2",""),sessionStorage.setItem("resourcesPlatform_1",""),sessionStorage.setItem("resourceLibrary_1",""),sessionStorage.setItem("resource_1",""),sessionStorage.setItem("resourceOne",""),sessionStorage.setItem("resourceThree",""),sessionStorage.setItem("myCollect_1",""),sessionStorage.setItem("myCollect_2",""),sessionStorage.setItem("resourceLibrary_2",""),a.forEach((function(e){e.id===t&&(r=e.stageId,s=e.subjectId)})),e.setState({resourcesPlatform_2:"",resourcesPlatform_1:"",randomkey:e.randomkey(),resourceParentKeys:[0],keys:"",seniorId:"",pageNum:1,bookId:t,catalogArray:[],catalogArrayChecked:[],selectCatalogId:"",stageId:r,catalogStageId:r,subjectId:s,catalogSubjectId:s},(function(){e.getExamTypeTreeList(),e.getResourceList()}))},e.myStageChange=function(t){e.setState({pageNum:1,stageId:t[0],knowledgeStageId:t[0],subjectId:t[1],knowledgeSubjectId:t[1],pointsArrayChecked:[],pointsArray:[]},(function(){e.getSubjectKnowledgePointTree(),e.getResourceList()}))},e.classifyCheck=function(t,a){var r,s="";a.selectedNodes&&a.selectedNodes.length>0&&a.selectedNodes[0].props.dataRef&&(r=a.selectedNodes[0].props.dataRef.level,s=a.selectedNodes[0].props.dataRef),sessionStorage.setItem("resourceLibraryKeys",[t,r]);var o=[];if(3==s.level&&e.state.courseTree.length>0){!function e(t){return t.map((function(t){t.id!=s.parentId?e(t.children):o.push(t.parentId)}))}(e.state.courseTree)}s&&(o.push(a.selectedNodes[0].props.dataRef.parentId),o.push(t)),sessionStorage.setItem("resourceParentKeys",o),e.setState({pageNum:1,catalogArray:t,catalogArrayChecked:t,selectCatalogId:t?t[0]:"",level:r,professionId:t&&t[0]?t[0]:e.state.professionId},(function(){e.getResourceList()}))},e.knowledgePointCheck=function(t,a){e.setState({pageNum:1,pointsArrayChecked:t,pointsArray:t},(function(){e.getResourceList()}))},e.renderTreeNodes=function(t){return t.map((function(t){return 0==t.bottom?Y.a.createElement(oe,{title:Y.a.createElement("div",{className:"TreeIcon",onClick:e.DeptonSelect.bind(Object(R.a)(e),t)},t.name),key:t.id,dataRef:t},t.children&&t.children.length>0?e.renderTreeNodes(t.children):""):Y.a.createElement(oe,{switcherIcon:Y.a.createElement("span",{className:"TreeCircleIcon"}),title:t.name,key:t.id,value:t.id,dataRef:t})}))},e.onChange=function(e){},e.UploadModal=function(){e.setState({UploadModal:!0})},e.UploadCancel=function(){e.UploadResourceForm.resetFields(),e.setState({UploadModal:!1,randomkey:e.randomkey()})},e.UploadSave=function(){if(1==e.state.isClick){e.setState({isClick:!1}),e.UploadResourceForm.props.form.validateFields((function(t,a){if(!t){var r=e.UploadResourceForm.getItemsValue(),s=r.stageId?JSON.parse(r.stageId).stageId:"",o=Object(w.a)(Object(w.a)({},r),{},{stageId:s,applicationType:a.applicationType?a.applicationType:""});Object(q.a)(o).then((function(t){T.a.success("\u6dfb\u52a0\u6210\u529f"),e.UploadResourceForm.resetFields(),e.setState({UploadModal:!1,randomkey:e.randomkey()}),e.getResourceList()}))}}));var t=Object(R.a)(e);setTimeout((function(){t.setState({isClick:!0})}),1e3)}},e.previewResource=function(){var t=Object(E.a)(N.a.mark((function t(a,r){var s,o,n,c,i,u,l,d,m,p,h,g,y;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.stopPropagation(),0===window.getSelection().toString().length&&(s=r.id,o=e.state,n=o.activeKey,o.addResource,c=o.hierarchy,i=o.catalogId,u=o.courseId,l=o.url,d=o.classroomId,m=o.prepareActiveKey,p=o.stepId,h=o.backTypeCourse,"1"==e.state.addResource?(g={addResource:1,courseId:u,catalogId:i,hierarchy:c,resourceId:s,url:l,resUrl:"/teching/resource-library/resources-platform",classroomId:d,activeKey:m,stepId:p,backTypeCourse:h,handIsShow:e.state.handIsShow},sessionStorage.setItem("prevIds",JSON.stringify(g)),e.props.history.push("/teching/resource-preview?".concat(encodeURI(JSON.stringify(g))))):(y={resourceId:s,resUrl:"/teching/resource-library/resources-platform",activeKey:n,backTypeCourse:h},sessionStorage.setItem("prevIds",JSON.stringify(y)),e.props.history.push("/teching/resource-preview?".concat(encodeURI(JSON.stringify(y))))));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.ResourceDetailCancel=function(){e.setState({resourceDetailModal:!1})},e.courseTemplateCancel=function(){e.setState({courseTemplateModal:!1})},e.recommendShowModal=function(){e.setState({recommendCourseModal:!0})},e.recommendCourseCancel=function(){e.setState({recommendCourseModal:!1})},e.recommendOk=function(){e.recommendCourseModal.props.form.validateFields(function(){var t=Object(E.a)(N.a.mark((function t(a,r){var s;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a||(s={catalogId:r.sectionName,courseName:r.courseName,id:r.id,yearId:e.state.selCourse.yearId},Object($.e)(s).then((function(t){T.a.success("\u4f7f\u7528\u590d\u5236\u8be5\u8bfe\u7a0b\u6210\u529f"),e.setState({recommendCourseModal:!1})})));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},e.addressVisibleChange=function(t){e.setState({addressVisible:t})},e.examYearVisibleChange=function(t){e.setState({examYearVisible:t})},e.testSourceVisibleChange=function(t){e.setState({testSourceVisible:t})},e.testSourceFilter=function(t){if(""===t)return"\u6765\u6e90";var a=e.state,r=(a.testSourceList,a.unitListAll),s={};return r.forEach((function(e){return s[e.id]=e.unitName})),s[t]},e}return Object(L.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=sessionStorage.getItem("resourceLibraryKeys");if(t){var a=t.split(",")[0],r=t.split(",")[1];this.setState({keys:a,levels:r})}var s,o,n,c,i,u,l,d,m,p,h,g,y,f,v=this.props.location.search,S="";v?(c=(s=v.split("?")[1]).includes("%")?decodeURI(s):s,i=(o=JSON.parse(c)).addResource,u=o.catalogId,l=o.courseId,d=o.hierarchy,m=o.url,p=o.classroomId,h=o.stepId,g=o.activeKey,f=!0,n=o.isHeader,y=o.backTypeCourse,S=o.activeKey):y="myResource",g&&this.tabChange(g),this.getExamYearList(5),this.setState({userId:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).user.id:"",myUnitId:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).user.unitId:"",addResource:i,hierarchy:d,catalogId:u,courseId:l,url:m,classroomId:p,stepId:h,handIsShow:f,backTypeCourse:y,prepareActiveKey:S,isHeader:n},(function(){e.getMyStageList()})),this.getSubjectKnowledgePointTree(),this.getUnitListByKeyWord(""),this.getProvince()}},{key:"getProvince",value:function(){var e=Object(E.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.w)();case 2:(t=e.sent)&&t.length>0&&this.setState({provinceData:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getResourceFormatList",value:function(){var e=Object(E.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.o)(t);case 2:a=e.sent,this.setState({resourceFormatList:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUnitListByKeyWord",value:function(){var e=Object(E.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.a)(t);case 2:a=e.sent,this.setState({unitList:a}),t||this.setState({unitListAll:a});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getResourceList",value:function(){var e=Object(E.a)(N.a.mark((function e(){var t,a,r,s,o,n,c,i,u,l,d,m,p,h,g,y,f,v;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.pageNum,r=t.pageSize,s=t.activeKey,o=t.stageId,n=t.resourcesPlatform_1,c=t.resourcesPlatform_2,i=t.orderAscfield,u=t.searchValue,l=t.searchValueSchool,d=t.searchValueCourse,m=t.orderDescfield,p=t.level,h=t.professionId,g=t.levels,y=t.keys,f={pageNum:a,pageSize:r,professionId:h||y,mediaType:sessionStorage.getItem("resourcesPlatform_1")?sessionStorage.getItem("resourcesPlatform_1"):n,applicationType:sessionStorage.getItem("resourcesPlatform_2")?sessionStorage.getItem("resourcesPlatform_2"):c,orderAscfield:i,orderDescfield:m,title:u,subjectId:d,unitName:l,tabType:s,level:p||g,stageId:o},e.next=4,Object(q.d)(f);case 4:v=e.sent,this.setState({resourceList:v?v.data:null,total:v?v.total:0});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getExamYearList",value:function(e){for(var t=(new Date).getFullYear(),a=[],r=0;r<e;r++){var s={value:t-r};s.key=r===e-1?"\u66f4\u65e9":t-r,a.push(s)}this.setState({examYearList:a})}},{key:"getMyStageList",value:function(){var e=Object(E.a)(N.a.mark((function e(){var t,a,r,s,o=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.u)();case 2:t=e.sent,(a=t?t.map((function(e){return Object(w.a)(Object(w.a)({},e),{},{subjectName:e.stageName,id:e.stageId})})):"")&&(r="",s=sessionStorage.getItem("resourceBookId"),r=s||(a&&a[0]?a[0].stageId:""),this.setState({stageId:r,subjectList:a,bookId:r},(function(){var e=sessionStorage.getItem("resourceParentKeys");e=e?e.split(","):[],o.state.resourceParentKeys=e,o.getExamTypeTreeList(),e&&e.length>0&&(o.state.stageId=r,e.splice(e.indexOf("0"),1),o.onLoadData(1,e)),o.state.resourceParentKeys.push(0),o.state.randomkey=o.randomkey(),o.getResourceList()})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getExamTypeTreeList",value:function(){var e=Object(E.a)(N.a.mark((function e(t,a){var r,s,o,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.state,s=r.bookId,o=0!=(o=r.seniorId)?o:"",!s){e.next=8;break}return e.next=5,Object(J.f)({bookId:s,seniorId:o});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:n=e.t0,this.setState({courseTree:n,defaultKeys:n&&n.length>0?n[0].id:""});case 11:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getCourseListTreeNew",value:function(){var e=Object(E.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.bookId)){e.next=7;break}return e.next=4,Object(J.e)({bookId:t});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=[];case 8:a=e.t0,this.setState({courseTree:a,defaultKeys:a[0].id});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSubjectKnowledgePointTree",value:function(){var e=Object(E.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.subjectId)){e.next=7;break}return e.next=4,Object(J.g)({subjectId:t});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=[];case 8:a=e.t0,this.setState({subjectKnowledgePointTree:a});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateTreeData",value:function(e,t,a){var r=this;return e.map((function(e){return e.id===t?(0==e.hasOwnProperty("children")&&(e.children=[]),Object(w.a)(Object(w.a)({},e),{},{children:a})):0==e.bottom?(0==e.hasOwnProperty("children")&&(e.children=[]),Object(w.a)(Object(w.a)({},e),{},{children:r.updateTreeData(e.children,t,a)})):e}))}},{key:"onLoadData",value:function(){var e=Object(E.a)(N.a.mark((function e(t,a){var r,s,o,n,c,i,u=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,s=this.state,o=s.bookId,n=s.seniorId,c="",1==t?(n=a.join(","),r=!1,c=a[0]):(0==(c=a.props.eventKey)&&(c=""),this.state.seniorId=c,n=c,r=a.props.expanded),0!=r){e.next=14;break}if(!n||0==n){e.next=11;break}return e.next=8,Object(J.f)({bookId:o,seniorId:n});case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=[];case 12:return i=e.t0,e.abrupt("return",new Promise((function(e){a.children?e():setTimeout((function(){var a=u.updateTreeData(u.state.courseTree,c,i);1==t&&(u.state.randomkey=u.randomkey()),u.setState({courseTree:Object(I.a)(a),defaultKeys:a&&a.length>0?a[0].id:""}),e()}),1e3)})));case 14:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"DeptonSelect",value:function(e,t){B.a.isEmpty(e.id)||(this.state.professionId=e.id,this.state.level=e.level,this.setState({hierarchy:e.hierarchy}))}},{key:"randomkey",value:function(){return(Math.random(1e5)+"").replace(/^0\./,"")}},{key:"render",value:function(){var e=this,t=this.state,r=t.bookId,s=t.pageNum,o=t.pageSize,n=t.subjectList,i=t.courseTree,l=t.subjectKnowledgePointTree,m=t.isObligation,h=t.isOrdinary,y=t.resourceList,v=t.resourceFormatList,b=(t.examYearList,t.activeKey),I=t.sortSet,k=t.total,N=t.UploadModal,E=t.cataLogTree,O=t.recommendCourseModal,T=t.courseTemplateModal,w=(t.provinceData,t.cityData,t.countyData,t.searchValue),j=t.resourceDetailModal,L=t.resourceId,R=t.url,P=t.resourceParentKeys,x=t.randomkey,D=t.resourcesPlatform_1,K=t.keys,_=t.resourcesPlatform_2,z=t.isHeader,A=y&&y.length?y.map((function(t,r){return Y.a.createElement(C.a,{span:6,className:"rside-col",key:r,style:{padding:"0 8px"},onClick:function(a){return e.previewResource(a,t)}},Y.a.createElement("dl",null,Y.a.createElement("dt",null,1==t.mediaType?Y.a.createElement("img",{src:a(930),alt:""}):5==t.mediaType?Y.a.createElement("img",{src:a(532),alt:""}):4==t.mediaType?Y.a.createElement("img",{src:a(931),alt:""}):8==t.mediaType?Y.a.createElement("img",{src:a(932),alt:""}):3==t.mediaType?Y.a.createElement("img",{src:a(933),alt:""}):7==t.mediaType?Y.a.createElement("img",{src:a(934),alt:""}):6==t.mediaType?Y.a.createElement("img",{src:a(935),alt:""}):9==t.mediaType?Y.a.createElement("img",{src:a(936),alt:""}):2==t.mediaType?Y.a.createElement("img",{src:a(532),alt:""}):99==t.mediaType?Y.a.createElement("img",{src:a(937),alt:""}):0==t.mediaType?Y.a.createElement("img",{src:a(938),alt:""}):""),Y.a.createElement("dd",null,Y.a.createElement("div",{title:0==t.mediaType||10==t.mediaType||99==t.mediaType||9==t.mediaType?t.resourceName:t.title,className:"resource-title-lh"},0==t.mediaType||10==t.mediaType||99==t.mediaType||9==t.mediaType?t.resourceName:t.title,"\xa0"),Y.a.createElement("p",null,Y.a.createElement("span",null,"\u5f15\u7528 ",t.usedNum),Y.a.createElement("span",null,"\u6536\u85cf ",t.usedNum)),Y.a.createElement("p",{className:"source_style_l"},Y.a.createElement("span",{title:t.unitName},"\u6765\u6e90\uff1a",t.unitName)))))})):"",U=Y.a.createElement("div",null,Y.a.createElement(V.a,{placeholder:"\u9009\u62e9\u5c42\u6b21",onChange:this.bookChange,dropdownMatchSelectWidth:!0,value:r},n?n.map((function(e,t){return Y.a.createElement(ne,{key:t,value:e.stageId},e.stageName)})):Y.a.createElement(ne,{key:"",value:""},"\u6682\u65e0\u6570\u636e")),i&&i.length?Y.a.createElement(M.a,{key:this.state.randomkey,className:"my-collect-tree",onSelect:this.classifyCheck,showIcon:!0,showLine:!0,blockNode:!0,defaultSelectedKeys:[K,0],defaultExpandedKeys:P,loadData:this.onLoadData.bind(this,"")},Y.a.createElement(oe,{title:"\u5168\u90e8",key:"0"},this.renderTreeNodes(i))):""),F=Y.a.createElement("div",{className:"science"},Y.a.createElement(M.a,{autoExpandParent:!0,onSelect:this.knowledgePointCheck},this.renderTreeNodes(l)));return Y.a.createElement("div",{className:"resource-library teach-main"},Y.a.createElement("div",{className:["teach-main-box",z?"nonePadiingTop":null].join(" ")},z?null:B.a.isEmpty(R)?Y.a.createElement(X.a,{navName:"resource-library"}):Y.a.createElement(H.a,null),Y.a.createElement("div",{className:"teach-main-cont"},Y.a.createElement(f.a,{className:"complete-title"},Y.a.createElement(C.a,{span:22},Y.a.createElement("span",null,"\u8d44\u6e90\u5e93"),Y.a.createElement(W.a,{defaultKeys:"3"})),Y.a.createElement(C.a,{span:2,className:"ant-col-resource"},Y.a.createElement(S.a,{onClick:this.UploadModal},"\u4e0a\u4f20\u8d44\u6e90"))),Y.a.createElement(f.a,{className:"teach-main-content-lh"},Y.a.createElement(C.a,null,Y.a.createElement("div",{className:"question-tab"},Y.a.createElement("div",null,Y.a.createElement(f.a,null,Y.a.createElement(C.a,{span:24},Y.a.createElement("div",{className:"version-detail question-teaching-list",style:{display:!0===m?"block":"none"}},U)),Y.a.createElement(C.a,{span:24},Y.a.createElement("div",{className:"version-detail question-teaching-list",style:{display:!0===h?"block":"none"}},F)),Y.a.createElement(C.a,{span:24}))))),Y.a.createElement(C.a,{className:"paper-right-top"},Y.a.createElement("div",{className:"paper-right-menu paper-right-menu-lh paper-right-menu-l"},Y.a.createElement(f.a,{className:"paper-common"},Y.a.createElement(C.a,{className:"paper-year"},"\u5a92\u4f53\u7c7b\u578b"),Y.a.createElement(C.a,null,Y.a.createElement(g.a.Group,{onChange:this.resourceTypeChange.bind(this),value:D},Y.a.createElement(g.a.Button,{value:""},"\u5168\u90e8"),Y.a.createElement(g.a.Button,{value:"1"},"\u6587\u672c"),Y.a.createElement(g.a.Button,{value:"5"},"\u89c6\u9891"),Y.a.createElement(g.a.Button,{value:"4"},"\u97f3\u9891"),Y.a.createElement(g.a.Button,{value:"8"},"PPT"),Y.a.createElement(g.a.Button,{value:"3"},"\u56fe\u7247"),Y.a.createElement(g.a.Button,{value:"7"},"\u865a\u62df\u4eff\u771f"),Y.a.createElement(g.a.Button,{value:"6"},"\u52a8\u753b"),Y.a.createElement(g.a.Button,{value:"2"},"\u5fae\u8bfe"),Y.a.createElement(g.a.Button,{value:"99"},"\u5176\u5b83")))),Y.a.createElement(f.a,{className:"paper-common"},Y.a.createElement(C.a,{className:"paper-year"},"\u8d44\u6e90\u7c7b\u578b"),Y.a.createElement(C.a,null,Y.a.createElement(g.a.Group,{onChange:this.resourceFormatChange.bind(this),value:_?JSON.parse(_):""},Y.a.createElement(g.a.Button,{value:""},"\u5168\u90e8"),v.map((function(e,t){return Y.a.createElement(g.a.Button,{key:e.id,value:e.id},e.text)})))))),Y.a.createElement("div",{className:"paper-right-bottom"},Y.a.createElement("div",{className:"res-search-box"},"2"!==b?Y.a.createElement("div",{className:"paper-common-btn"},Y.a.createElement(S.a,{type:"zh"===I.value?"primary":"",onClick:function(){return e.zhClick()}},"\u521b\u5efa\u65f6\u95f4","zh"===I.value?Y.a.createElement(p.a,{type:I.zhOrder?"down":"up"}):""),Y.a.createElement(S.a,{type:"sy"===I.value?"primary":"",onClick:function(){return e.syClick()}},"\u5f15\u7528\u91cf","sy"===I.value?Y.a.createElement(p.a,{type:I.syOrder?"down":"up"}):""),Y.a.createElement(S.a,{type:"sc"===I.value?"primary":"",onClick:function(){return e.scClick()}},"\u6536\u85cf\u91cf","sc"===I.value?Y.a.createElement(p.a,{type:I.scOrder?"down":"up"}):"")):"",Y.a.createElement("div",{className:"res-btn"}),Y.a.createElement("div",{className:"res-btn"}),Y.a.createElement("div",{className:"res-btn"},Y.a.createElement(se,{placeholder:"\u8bf7\u8f93\u5165\u8d44\u6e90\u540d\u79f0",value:w,onSearch:function(t){return e.resourceNameSearch(t)},onChange:this.searchChange})),Y.a.createElement("div",null,Y.a.createElement("div",{className:"paper-all"},"\u5171",Y.a.createElement("span",{className:"paper-number"},k),"\u76f8\u5173\u8d44\u6e90"))),y&&y.length>0?Y.a.createElement("div",null,y?A:"",k?Y.a.createElement("div",{className:"pagination-style-l"},Y.a.createElement(d.a,{showSizeChanger:!0,pageSizeOptions:["16","24","36","48"],onShowSizeChange:this.onShowSizeChange,onChange:this.onPageNumChange,defaultCurrent:1,current:s,pageSize:o,total:k,showTotal:function(e){return"\u5171 "+e+" \u6761"}})):""):Y.a.createElement(u.a,{className:"empty-l",style:{marginTop:"10vh"}})))))),Y.a.createElement(c.a,{width:"600px",className:"modal-sty3",wrapClassName:"modal-btn-lh",visible:N,title:"\u4e0a\u4f20\u8d44\u6e90",onOk:this.handleAccredit,onCancel:this.UploadCancel,keyboard:!1,maskClosable:!1,key:x,footer:[Y.a.createElement(S.a,{key:"back",onClick:this.UploadCancel},"\u8fd4\u56de"),Y.a.createElement(S.a,{key:"submit",onClick:this.UploadSave},"\u786e\u8ba4")]},Y.a.createElement(Z.default,{wrappedComponentRef:function(t){e.UploadResourceForm=t}})),Y.a.createElement(c.a,{icon:Y.a.createElement(p.a,{type:"close"}),visible:T,onOk:this.recommendShowModal,onCancel:this.courseTemplateCancel,keyboard:!1,maskClosable:!1,className:"addLocalResourceModal modal-btn",width:"850px",footer:[Y.a.createElement(S.a,{key:"submit1",type:"primary",onClick:this.recommendShowModal},"\u4f7f\u7528\u6b64\u8bfe\u7a0b")]},Y.a.createElement(ae.a,{course:this.state.selCourse,courseTemplateModal:this.state.courseTemplateModal,wrappedComponentRef:function(t){e.recommendForm=t}})),Y.a.createElement(c.a,{className:"modal-btn",visible:O,title:"\u4f7f\u7528\u6b64\u8bfe\u7a0b",width:"850px",onOk:this.handleOk,onCancel:this.selectBookCancel,keyboard:!1,maskClosable:!1,footer:[Y.a.createElement(S.a,{key:"back",onClick:this.recommendCourseCancel},"\u8fd4\u56de"),Y.a.createElement(S.a,{key:"submit",type:"primary",onClick:this.recommendOk},"\u786e\u8ba4")]},Y.a.createElement(te.a,{course:this.state.selCourse,recommendCourseModal:this.state.recommendCourseModal,courseTree:E,wrappedComponentRef:function(t){e.recommendCourseModal=t}})),j?Y.a.createElement(c.a,{className:"modal-btn resourceDetailModal",visible:j,title:"\u9884\u89c8",width:"90%",height:"90%",onCancel:this.ResourceDetailCancel,keyboard:!1,maskClosable:!1,footer:[Y.a.createElement(S.a,{key:"back",onClick:this.ResourceDetailCancel},"\u8fd4\u56de")]},Y.a.createElement(ee.default,{resourceId:L})):"")}}]),r}(F.Component))||r,ie=o.a.create()(ce);t.default=ie}}]);