(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[97],{1955:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s}));var a=n(4);function o(e){return Object(a.d)("/api/course/api/v1/comNotice/getComNoticePageList",e)}function c(e){return Object(a.d)("/api/course/api/v1/comNotice/saveNewNotice",e)}function i(e){return Object(a.c)("/api/course/api/v1/comNotice/getCommonNotice",e)}function s(e){return Object(a.c)("/api/course/api/v1/comNotice/deleteNotice",e)}},2187:function(e,t,n){},2188:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHrSURBVHgB7ZnBTcNAEEX/ODFXUgAg+w7CqYB0QAt0QFIBUAGhAkIHUAGhAizBPUZQgM8k2WEG2xAkkGxnEBz2SZbjyNp9mp3dSD90P5tFIYWXAAYoyOXK3u+EFA5PDE734u0pDJF5ex10BgGCCAHtgzkhoMdyobgAosncvY7oMXu5XRH8EQJlTJiyc1dthVUsRHgkgx3WmVNh5jOVZDTkXZiXZ7vxzqTO+yq3EWwcy4RDVFWqT95KsqKO7OPsRSt33kLuc551JD8GAVLHPKraQCvXRTchohPUXFb8tuSXAWXTyYARDAlgjLWgYi75G3hJKywlc2nI0ZzR1wMYhnRhBUPOy61x+ZTKqXEAg+NHMauk/r6vPjt2TzDCbxwrvKQVXtIKL2mFl7TCS1rhJa3wklaYSUqaEX15ps4mjLCTlLRCEzr9/DB7HhB4ACN8gmFFQEVg+p/JA0nDrvCfIbomvUujj6XxD8o4OMIfU62uFnCBxZh+elF3qmSMkRwtiQMS6Yt9+TqBHTmDpsR85+CyJZZpP44zfC9dn1J8KFXXzDtCc3Iu2uu6Se7eSHKVMmbWJDeq8brKXejSSbVyNKS1pFLGzsMydv4ekZtjcdpGrmItyQptgw7C06D466OnjS9Nf7MATfrxVoo1eQM968tl6MkQDQAAAABJRU5ErkJggg=="},2710:function(e,t,n){"use strict";n.r(t);n(109);var a,o=n(72),c=n.n(o),i=(n(177),n(110)),s=n.n(i),r=(n(43),n(2)),l=n.n(r),m=(n(41),n(8)),u=n.n(m),d=(n(45),n(6)),h=n.n(d),p=(n(40),n(5)),g=n.n(p),A=(n(67),n(28)),C=n.n(A),f=n(3),k=n.n(f),N=n(7),b=(n(54),n(15)),y=n.n(b),E=n(9),v=n(12),S=n(52),j=n(11),O=n(10),I=(n(51),n(22)),T=n.n(I),w=n(0),z=n.n(w),L=(n(2187),n(35)),x=n(1955),F=n(93),X=n(1910),B=T.a.TextArea,D=Object(L.g)(a=function(e){Object(j.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={announcementList:[],addAnnouncement:!1,updateAnnouncement:!1,noticeTitle:"",noticeContent:"",courseId:"",randomkey:e.randomkey(),total:0,pageSize:10,pageNum:1,isClick:!0,navName:""},e.handleOk=function(t){e.setState({addAnnouncement:!1,randomkey:e.randomkey(),updateAnnouncement:!1})},e.handleCancel=function(t){e.setState({addAnnouncement:!1,randomkey:e.randomkey(),updateAnnouncement:!1})},e.onFinish=function(t){if(1==e.state.isClick){e.setState({isClick:!1}),e.props.form.validateFields((function(t,n){if(!t){var a={confSubjectId:e.state.courseId,title:n.noticeName,content:n.noticeContent};Object(x.d)(a).then((function(t){t&&(e.getComNoticePageList(),e.setState({addAnnouncement:!1,randomkey:e.randomkey(),noticeTitle:"",noticeContent:""}),y.a.success("\u6dfb\u52a0\u6210\u529f"))}))}}));var n=Object(S.a)(e);setTimeout((function(){n.setState({isClick:!0})}),1e3)}},e.onFinish1=function(t){if(1==e.state.isClick){e.setState({isClick:!1}),e.props.form.validateFields((function(t,n){if(!t){var a={confSubjectId:e.state.courseId,title:n.noticeName,content:n.noticeContent};Object(x.d)(a).then((function(t){t?(y.a.success("\u4fee\u6539\u6210\u529f"),Object(x.a)({id:e.state.noticeId}).then((function(t){"success"==t.message&&(e.getComNoticePageList(),e.setState({updateAnnouncement:!1,randomkey:e.randomkey(),noticeTitle:"",noticeContent:""}))}))):y.a.error("\u4fee\u6539\u5931\u8d25")}))}}));var n=Object(S.a)(e);setTimeout((function(){n.setState({isClick:!0})}),1e3)}},e.courseName_l=function(e){console.log(e)},e.courseIssue_L=function(e){console.log(e)},e.onShowSizeChange=function(t,n){e.setState({pageNum:1,pageSize:n},(function(){e.getComNoticePageList()}))},e.onPageNumChange=function(t,n){e.setState({pageNum:t},(function(){e.getComNoticePageList()}))},e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=this.props.location.search.split("?")[1],n=t.includes("%")?decodeURI(t):t,a=JSON.parse(n);this.setState({courseId:a.courseId,navName:sessionStorage.getItem("navName")},(function(){e.getComNoticePageList()}))}},{key:"getComNoticePageList",value:function(){var e=Object(N.a)(k.a.mark((function e(){var t,n,a,o,c,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.courseId,a=t.pageNum,o=t.pageSize,c={confSubjectId:n,pageNum:a,pageSize:o},e.next=4,Object(x.b)(c);case 4:i=e.sent,this.setState({total:i.total,announcementList:i.data?i.data:""});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateAnnouncement",value:function(e){var t=this;this.setState({noticeId:e}),Object(x.c)({id:e}).then((function(e){t.setState({noticeTitle:e.title,noticeContent:e.content,updateAnnouncement:!0,randomkey:t.randomkey()})}))}},{key:"delAnnouncement",value:function(e){var t=this;C.a.confirm({title:"\u63d0\u793a",content:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f\u5220\u9664\u540e\u5c06\u65e0\u6cd5\u6062\u590d\uff01",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",className:"ModalConfirm",onOk:function(){Object(x.a)({id:e}).then((function(e){"success"==e.message&&(t.getComNoticePageList(),y.a.success("\u5220\u9664\u6210\u529f"),t.setState({noticeTitle:"",noticeContent:""}))}))},onCancel:function(){}})}},{key:"randomkey",value:function(){return(Math.random(1e5)+"").replace(/^0\./,"")}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,o=a.pageNum,i=a.pageSize,r=a.total,m=a.announcementList,d=a.navName;return z.a.createElement("div",{className:"teach-main"},z.a.createElement("div",{className:"teach-main-box"},z.a.createElement(F.a,{navName:d}),z.a.createElement("div",{className:"teach-main-cont"},z.a.createElement(g.a,{className:"retrieval-wrap"},z.a.createElement(X.a,{navName:"course-announcement",courseName_l:this.courseName_l,courseIssue_L:this.courseIssue_L})),z.a.createElement(g.a,{className:"content_3"},z.a.createElement(C.a,{wrapClassName:"modal-btn-lh",centered:!0,visible:this.state.addAnnouncement,onOk:this.onFinish,onCancel:this.handleCancel,key:this.state.randomkey,keyboard:!1,maskClosable:!1,footer:[z.a.createElement(h.a,{key:"back",className:"modal-btn-style",onClick:this.handleCancel},"\u53d6\u6d88"),z.a.createElement(h.a,{key:"submit",className:"modal-btn-style",onClick:this.onFinish},"\u4fdd\u5b58")]},z.a.createElement("h2",{style:{fontSize:16,fontWeight:900,marginBottom:20}},"\u65b0\u589e\u516c\u544a"),z.a.createElement(u.a,{labelCol:{span:5},wrapperCol:{span:19},initialvalues:{remember:!0},labelAlign:"left"},z.a.createElement(u.a.Item,{label:"\u516c\u544a\u540d\u79f0",name:"noticeName",required:!0},t("noticeName",{initialValue:this.state.noticeTitle,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u516c\u544a\u540d\u79f0\uff01"}]})(z.a.createElement(T.a,{maxLength:40}))),z.a.createElement(u.a.Item,{label:"\u516c\u544a\u5185\u5bb9",name:"noticeContent",required:!0},t("noticeContent",{initialValue:this.state.noticeContent,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u516c\u544a\u5185\u5bb9\uff01"}]})(z.a.createElement(B,{rows:6,style:{resize:"none"},maxLength:2e3}))))),z.a.createElement(C.a,{wrapClassName:"modal-btn-lh",centered:!0,visible:this.state.updateAnnouncement,onOk:this.handleOk,onCancel:this.handleCancel,key:"update"+this.state.randomkey,keyboard:!1,maskClosable:!1,footer:[z.a.createElement(h.a,{key:"back",className:"modal-btn-style",onClick:this.handleCancel},"\u53d6\u6d88"),z.a.createElement(h.a,{key:"submit",className:"modal-btn-style",onClick:this.onFinish1},"\u4fdd\u5b58")]},z.a.createElement("h2",{style:{fontSize:16,fontWeight:900,marginBottom:20}},"\u7f16\u8f91\u516c\u544a"),z.a.createElement(u.a,{labelCol:{span:5},wrapperCol:{span:19},name:"addstudent",initialvalues:{remember:!0},labelAlign:"left"},z.a.createElement(u.a.Item,{label:"\u516c\u544a\u540d\u79f0",name:"noticeName",required:!0},t("noticeName",{initialValue:this.state.noticeTitle,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u516c\u544a\u540d\u79f0\uff01"}]})(z.a.createElement(T.a,{maxLength:30}))),z.a.createElement(u.a.Item,{label:"\u516c\u544a\u5185\u5bb9",name:"noticeContent",required:!0},t("noticeContent",{initialValue:this.state.noticeContent,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u516c\u544a\u5185\u5bb9\uff01"}]})(z.a.createElement(B,{rows:6,style:{resize:"none"},maxLength:2e3}))))),z.a.createElement("div",{className:"add-announcement"},z.a.createElement(h.a,{onClick:function(){e.setState({addAnnouncement:!0,randomkey:e.randomkey(),noticeTitle:"",noticeContent:""})}},"\u53d1\u5e03\u516c\u544a")),this.state.announcementList.map((function(t,a){return z.a.createElement(g.a,{key:a,className:"announcement-list"},z.a.createElement(l.a,{span:18},z.a.createElement("img",{src:n(2188),alt:""}),z.a.createElement("div",null,z.a.createElement("h2",{title:t.title},t.title),z.a.createElement("p",null,z.a.createElement("span",null,"\u53d1\u5e03\u4eba\uff1a",t.createUsername),z.a.createElement("span",null,"\u53d1\u5e03\u65f6\u95f4\uff1a",t.createTime)))),z.a.createElement(l.a,{span:6},z.a.createElement(h.a,{onClick:function(){e.props.history.push("/teaching/my-course/course-announcement/announcement/?id="+t.id)}},"\u67e5\u770b"),z.a.createElement(h.a,{onClick:function(){e.updateAnnouncement(t.id)}},"\u7f16\u8f91"),z.a.createElement(h.a,{onClick:e.delAnnouncement.bind(e,t.id)},"\u5220\u9664")))})),z.a.createElement("div",{className:"paper-right-bottom"},m&&m.length>0?z.a.createElement("div",null,r?z.a.createElement("div",{className:"pagination-style-l"},z.a.createElement(s.a,{showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,onChange:this.onPageNumChange,defaultCurrent:1,current:o,pageSize:i,total:r,showTotal:function(e){return"\u5171 "+e+" \u6761"}})):""):z.a.createElement(c.a,{style:{marginTop:"-20%"}}))))))}}]),a}(w.Component))||a,P=u.a.create()(D);t.default=P}}]);