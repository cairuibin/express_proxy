(this.webpackJsonpzjyz_admin=this.webpackJsonpzjyz_admin||[]).push([[74],{1762:function(e,t,a){"use strict";a(41);var s,n=a(8),c=a.n(n),o=(a(317),a(206)),i=a.n(o),r=(a(45),a(6)),l=a.n(r),d=(a(276),a(83)),m=a.n(d),u=(a(67),a(28)),p=a.n(u),h=a(9),I=a(12),g=a(11),f=a(10),S=a(0),v=a.n(S),y=(a(1789),a(35)),k=a(1794),E=a(1791),w=a(239),C=a(520),N=(a.n(C)()(),Object(y.g)(s=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).getClassRoom=function(){var e=s.state,t=e.classroomId,a=e.stepId;Object(w.s)([t,a]).then((function(e){e&&s.setState({classStatus:e.classStatus})}))},s.state={switchStatus:!0,classBtnContent:0==sessionStorage.getItem("stepId")?"\u8bfe\u524d\u9884\u4e60":2==sessionStorage.getItem("stepId")?"\u8bfe\u540e\u590d\u4e60":"\u8bfe\u5802\u6559\u5b66",stepId:sessionStorage.getItem("stepId")?sessionStorage.getItem("stepId"):1,courseId:"",classroomId:"",catalogId:"",classStatus:""},s}return Object(I.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.search.split("?")[1];if(t){var a=t.includes("%")?decodeURI(t):t,s=JSON.parse(a);this.setState({courseId:s.courseId,classroomId:s.classroomId,catalogId:s.catalogId,pathname:s.pathname,id:s.id,homeworkId:s.homeworkId},(function(){e.getClassRoom()}))}}},{key:"rightSwitch",value:function(){this.props.open({isOpen:!0})}},{key:"goBack",value:function(){var e=this.state,t=e.catalogId,a=e.courseId,s=e.classroomId,n=e.pathname,c=e.id,o=e.homeworkId,i={courseId:a,classroomId:s,catalogId:t};if(sessionStorage.removeItem("coursewareBack"),n)return c&&(i.id=c),o&&(i.homeworkId=o),void this.props.history.replace("".concat(n,"?").concat(encodeURI(JSON.stringify(i))));this.props.history.replace("/teching/projection-screen?".concat(encodeURI(JSON.stringify(i))))}},{key:"finishClass",value:function(){var e=this,t=this.state.classStatus,a=3==t?"\u786e\u5b9a\u8981\u9000\u51fa\u5417\uff1f":"\u786e\u5b9a\u8981\u4e0b\u8bfe\u5417\uff1f";p.a.confirm({title:"\u63d0\u793a",content:a,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",className:"ModalConfirm border_none",onOk:function(){if(2==t){var a={id:e.state.classroomId,releaseStatus:2,over:9};Object(w.j)(a).then((function(t){0==t.code&&(localStorage.setItem("changeClass",e.state.classroomId),e.props.history.replace("/"))}))}else 3==t&&e.props.history.replace("/")},onCancel:function(){}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.courseId,s=t.classroomId,n=t.catalogId,c=t.classStatus,o=this.props.changeBtn;return v.a.createElement("div",null,this.props.goBackVis?"":v.a.createElement("p",{onClick:this.goBack.bind(this)},v.a.createElement("i",{className:"iconfont"},"\ue6ba"),"\u8fd4\u56de"),o?v.a.createElement("div",null," ",v.a.createElement(i.a,{overlay:v.a.createElement(m.a,null,v.a.createElement(m.a.Item,{key:"0",onClick:function(t){sessionStorage.setItem("stepId",0),e.goBack(),e.setState({classBtnContent:t.item.props.children,stepId:0},(function(){e.props.stepCut({stepId:0}),e.setState({stepId:0})}))}},"\u8bfe\u524d\u9884\u4e60"),v.a.createElement(m.a.Item,{key:"1",onClick:function(t){sessionStorage.setItem("stepId",1),e.goBack(),e.setState({classBtnContent:t.item.props.children,stepId:1},(function(){e.props.stepCut({stepId:1}),e.setState({stepId:1})}))}},"\u8bfe\u5802\u6559\u5b66"),v.a.createElement(m.a.Item,{key:"2",onClick:function(t){sessionStorage.setItem("stepId",2),e.goBack(),e.setState({classBtnContent:t.item.props.children,stepId:2},(function(){e.props.stepCut({stepId:2}),e.setState({stepId:2})}))}},"\u8bfe\u540e\u590d\u4e60")),trigger:["click"],placement:"topCenter",className:"class-dropdown"},v.a.createElement(l.a,null,0==sessionStorage.getItem("stepId")?"\u8bfe\u524d\u9884\u4e60":2==sessionStorage.getItem("stepId")?"\u8bfe\u540e\u590d\u4e60":"\u8bfe\u5802\u6559\u5b66",v.a.createElement(k.a,null))),v.a.createElement("p",{onClick:function(){e.finishClass()}},v.a.createElement("i",{className:"iconfont"},"\ue634"),3==c?"\u9000\u51fa":"\u4e0b\u8bfe"),v.a.createElement("p",{onClick:function(){var t={courseId:a,classroomId:s,catalogId:n};sessionStorage.setItem("coursewareBack","success"),sessionStorage.removeItem("prevIds"),e.props.history.replace("/teching/projection-screen/courseware?".concat(encodeURI(JSON.stringify(t))))}},v.a.createElement("i",{className:"iconfont"},"\ue75b"),"\u8bfe\u4ef6"),v.a.createElement("div",{className:"switch",title:"\u6253\u5f00/\u5173\u95ed\u4e92\u52a8\u5217\u8868",onClick:this.rightSwitch.bind(this)},v.a.createElement(E.a,null))):null,v.a.createElement("p",{style:{float:"right"},onClick:function(){window.location.reload(!0)}},v.a.createElement("i",{className:"iconfont"},"\ue6a7"),"\u5237\u65b0"))}}]),a}(S.Component))||s),b=c.a.create()(N);t.a=b},1785:function(e,t,a){"use strict";var s=a(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},c=a(238),o=function(e,t){return s.createElement(c.a,Object.assign({},e,{ref:t,icon:n}))};o.displayName="RightOutlined";t.a=s.forwardRef(o)},1791:function(e,t,a){"use strict";var s=a(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},c=a(238),o=function(e,t){return s.createElement(c.a,Object.assign({},e,{ref:t,icon:n}))};o.displayName="MenuUnfoldOutlined";t.a=s.forwardRef(o)},1794:function(e,t,a){"use strict";var s=a(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},c=a(238),o=function(e,t){return s.createElement(c.a,Object.assign({},e,{ref:t,icon:n}))};o.displayName="UpOutlined";t.a=s.forwardRef(o)},2172:function(e,t,a){},2178:function(e,t,a){e.exports=a.p+"static/media/loadActivity.8e8e7ce5.png"},2705:function(e,t,a){"use strict";a.r(t);a(41);var s,n=a(8),c=a.n(n),o=(a(109),a(72)),i=a.n(o),r=(a(40),a(5)),l=a.n(r),d=(a(43),a(2)),m=a.n(d),u=(a(54),a(15)),p=a.n(u),h=(a(67),a(28)),I=a.n(h),g=a(3),f=a.n(g),S=a(7),v=a(9),y=a(12),k=a(11),E=a(10),w=a(0),C=a.n(w),N=(a(2172),a(35)),b=a(239),O=a(39),B=a(1776),j=a(1762),R=a(520),L=a.n(R)()(),x=Object(N.g)(s=function(e){Object(k.a)(s,e);var t=Object(E.a)(s);function s(e){var a;return Object(v.a)(this,s),(a=t.call(this,e)).componentDidMount=function(){var e=a.props.location.search.split("?")[1];if(sessionStorage.stepId||sessionStorage.setItem("stepId",1),e){var t=e.includes("%")?decodeURI(e):e,s=JSON.parse(t);a.setState({classroomId:s.classroomId,courseId:s.courseId,catalogId:s.catalogId,stepId:sessionStorage.stepId},(function(){a.getListByClassroomId()}))}},a.change=function(){a.setState({action:!0})},a.state={switchStatus:!0,linkList:[],courseName:"",stepId:sessionStorage.getItem("stepId")?sessionStorage.getItem("stepId"):1,classroomId:"",releaseStatus:"",leftStyle:{width:"82%"},rightStyle:{width:"18%"},goBackisShow:!0,rightOper:null,action:!1},a}return Object(y.a)(s,[{key:"rightSwitch",value:function(){this.state.switchStatus?this.setState({switchStatus:!1,leftStyle:{width:"100%"},rightStyle:{width:"0",minWidth:"0"}}):this.setState({switchStatus:!0,leftStyle:{width:"82%"},rightStyle:{width:"18%",minWidth:"300px"}})}},{key:"getListByClassroomId",value:function(){var e=Object(S.a)(f.a.mark((function e(){var t,a,s,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.classroomId,s=t.stepId,e.next=3,Object(b.s)([a,s]);case 3:(n=e.sent)&&this.setState({courseName:n.courseName,linkList:n.dataList,releaseStatus:n.classStatus});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"finishClass",value:function(){var e=this.state,t={id:e.classroomId,releaseStatus:e.releaseStatus},a=this;I.a.confirm({title:"\u63d0\u793a",content:"\u786e\u5b9a\u8981\u4e0b\u8bfe\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",className:"ModalConfirm",onOk:function(){Object(O.b)(t).then((function(e){0==e.code&&a.props.history.replace("/")}))},onCancel:function(){}})}},{key:"goBack",value:function(){L.goBack(-1)}},{key:"delResoruce",value:function(e){var t=this;I.a.confirm({title:"\u63d0\u793a",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8d44\u6e90\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",className:"ModalConfirm border_none",onOk:function(){Object(b.h)({id:e}).then((function(e){0==e.code&&(p.a.success("\u5220\u9664\u6210\u529f"),t.getListByClassroomId())}))},onCancel:function(){}})}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"seeResources",value:function(e){var t=this.state,a=t.courseId,s=t.classroomId,n=t.catalogId,c={id:e.resourceId,courseId:a,classroomId:s,catalogId:n};this.props.history.replace("/teching/projection-screen/screen-resource-preview?".concat(encodeURI(JSON.stringify(c))))}},{key:"render",value:function(){var e=this,t=this.state,s=t.courseName,n=t.linkList,c=t.action,o=t.classroomId,r=t.courseId,d=t.catalogId,u=t.leftStyle,p=t.rightStyle;return C.a.createElement("div",{className:"interaction"},C.a.createElement(m.a,{className:"screen-left",style:u},C.a.createElement("div",{className:"screen-left-top"},s),C.a.createElement("div",{className:"screen-left-content resource_box"},n.length?n.map((function(t,s){return C.a.createElement("div",{key:s},C.a.createElement("h2",null,t.stepName,"\uff1a",t.stepMemo),t.courseRelateResourceList&&t.courseRelateResourceList.length?t.courseRelateResourceList.map((function(t,s){return C.a.createElement(l.a,{key:s,onClick:e.seeResources.bind(e,t)},C.a.createElement(m.a,{className:"icon-box",span:1,style:{textAlign:"center",width:60}},1==t.mediaType?C.a.createElement("img",{className:"",src:a(525),alt:""}):3==t.mediaType?C.a.createElement("img",{src:a(526),alt:""}):4==t.mediaType?C.a.createElement("img",{src:a(183),alt:""}):5==t.mediaType?C.a.createElement("img",{src:a(527),alt:""}):6==t.mediaType?C.a.createElement("img",{src:a(528),alt:""}):7==t.mediaType?C.a.createElement("img",{src:a(529),alt:""}):8==t.mediaType?C.a.createElement("img",{src:a(530),alt:""}):9==t.mediaType?C.a.createElement("img",{src:a(531),alt:""}):C.a.createElement("img",{src:a(524),alt:""})),C.a.createElement(m.a,{span:15},C.a.createElement("h3",{className:"test"},t.title,"\xa0"),99==t.mediaType?C.a.createElement("p",null,"\u6682\u65e0\u7edf\u8ba1"):C.a.createElement("p",null,"\u89c2\u770b\u60c5\u51b5",t.alreadySeeNum?t.alreadySeeNum:"0","/",t.totalNum?t.totalNum:"---")),C.a.createElement(m.a,{span:7,className:"btn-wrap"},C.a.createElement("span",{onClick:function(a){a.stopPropagation();var s={classroomId:o,courseId:r,catalogId:d,resourceId:t.resourceId,title:t.title};e.props.history.replace("/teching/projection-screen/statistics?".concat(encodeURI(JSON.stringify(s))))}},"\u7edf\u8ba1"),C.a.createElement("span",{onClick:function(a){a.stopPropagation(),e.delResoruce(t.id)}},"\u79fb\u9664")))})):"")})):C.a.createElement(i.a,{description:"\u6682\u65e0\u8bfe\u5802\u8d44\u6e90",image:a(2178)})),C.a.createElement("div",{className:"screen-left-bottom"},C.a.createElement(j.a,{changeBtn:!0,refresh:function(){window.location.reload(!0)},goBackVis:this.state.goBackisShow,open:this.rightSwitch.bind(this),stepCut:function(t){e.setState({stepId:t.stepId},(function(){e.getListByClassroomId(),e.change()}))}}))),C.a.createElement(m.a,{className:"interaction-right",style:p},C.a.createElement(B.a,{ref:"rightActicity",action:c,stepCut:function(t){sessionStorage.setItem("stepId",t.stepId),e.setState({stepId:t.stepId},(function(){e.getListByClassroomId()}))},stepId:this.state.stepId})))}}]),s}(w.Component))||s,T=c.a.create()(x);t.default=T}}]);